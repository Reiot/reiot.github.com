<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: columns | Social Reiot]]></title>
  <link href="http://reiot.com/categories/columns/atom.xml" rel="self"/>
  <link href="http://reiot.com/"/>
  <updated>2012-01-22T10:06:24+09:00</updated>
  <id>http://reiot.com/</id>
  <author>
    <name><![CDATA[Ray Yun]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Python Tips]]></title>
    <link href="http://reiot.com/2006/04/27/python-tips/"/>
    <updated>2006-04-27T07:38:41+09:00</updated>
    <id>http://reiot.com/2006/04/27/python-tips</id>
    <content type="html"><![CDATA[<h3>asyncore.dispatcher</h3>

<ul>
<li>원래부터 nonblocking 이다.</li>
<li>set_socket 하는 시점에 map 에 등록된다.</li>
</ul>


<h3>StringIO.readline()</h3>

<p>StringIO 는 file-like 객체이므로 readline() 을 지원한다. 그러나 write() 한 후 읽어들이면 None 을 리턴한다. 내부적으로 유지하는 offset 이 하나이기 때문인데, 만약 사용하려면 offset(0) 을 호출해서 포인터를 맨 앞으로 돌려줘야 한다. (너무 단순한가?)</p>

<h3>zipfile</h3>

<p>zip 포맷으로 특정 폴더를 압축하기 위해서는 다음과 같이 해야 한다. 이때 압축 포맷으로 ZIP_DEFLATED 를 사용해야 파일 크기가 작아진다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">zipdir</span><span class="p">(</span><span class="n">zfile</span><span class="p">,</span><span class="nb">dir</span><span class="p">,</span><span class="n">base</span><span class="o">=</span><span class="s">&#39;.&#39;</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="s">&quot;&quot;&quot;zip directory recursively&quot;&quot;&quot;</span>
</span><span class='line'><span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">zip </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="nb">dir</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'><span class="k">global</span> <span class="n">log</span>
</span><span class='line'><span class="n">log</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;zip </span><span class="si">%s</span><span class="s">...&#39;</span><span class="o">%</span><span class="nb">dir</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="nb">dir</span><span class="p">):</span>
</span><span class='line'><span class="n">nf</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
</span><span class='line'><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">nf</span><span class="p">):</span>
</span><span class='line'>    <span class="n">zipdir</span><span class="p">(</span><span class="n">zfile</span><span class="p">,</span><span class="n">nf</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="nb">dir</span><span class="p">))</span>
</span><span class='line'><span class="k">else</span><span class="p">:</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&#39;.&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="n">zfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">nf</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">base</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="nb">dir</span><span class="p">),</span> <span class="n">f</span><span class="p">),</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZIP_DEFLATED</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>dict(zip(seq1,seq2))</h3>

<p>keys와 values를 dict로 매치시킬 때 dict()와 zip()을 사용할 수 있다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">keys</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;aaa&#39;</span><span class="p">,</span> <span class="s">&#39;bbb&#39;</span><span class="p">,</span> <span class="s">&#39;ccc&#39;</span> <span class="p">]</span>
</span><span class='line'><span class="n">values</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">]</span>
</span><span class='line'><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span><span class="n">values</span><span class="p">)</span>
</span><span class='line'><span class="p">[(</span><span class="s">&#39;aaa&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;bbb&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;ccc&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
</span><span class='line'><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span><span class="n">values</span><span class="p">))</span>
</span><span class='line'><span class="p">{</span><span class="s">&#39;aaa&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;bbb&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;ccc&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p></blockquote></blockquote></blockquote>

<h3>re.findall</h3>

<p>스트링에서 특정 seperator 로 구분된 패턴으로 자를 때, string.split() 도 좋지만 re.findall() 을 강추</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">args</span> <span class="o">=</span> <span class="s">&#39;&quot;SELECT * FROM User&quot;,&quot;aaa,bbb,ccc,ddd&quot;&#39;</span>
</span><span class='line'><span class="n">args</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;SELECT * FROM User&#39;</span><span class="p">,</span> <span class="s">&#39;,&#39;</span><span class="p">,</span> <span class="s">&#39;aaa,bbb,ccc,ddd&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">]</span>
</span><span class='line'><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;&quot;(.+?)&quot;&#39;</span><span class="p">,</span><span class="n">args</span><span class="p">)</span>
</span><span class='line'><span class="p">[</span><span class="s">&#39;SELECT * FROM User&#39;</span><span class="p">,</span> <span class="s">&#39;aaa,bbb,ccc,ddd&#39;</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p></blockquote></blockquote></blockquote>

<h3>re 를 이용한 파일명 변경</h3>

<p>특정 폴더 안에 여러가지 파일명들을 바꾸기 위해서는 re 모듈을 잘 사용해야 한다. 다음은 파일명에 ... 을 없엘 때 쓰는 스크립트이다.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">re</span>
</span><span class='line'><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">target_folder</span><span class="p">)</span>
</span><span class='line'><span class="k">for</span> <span class="n">old_name</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">new_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;\[.+\]&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">old_name</span><span class="p">)</span>
</span><span class='line'><span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">old_name</span><span class="p">,</span><span class="n">new_name</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Code Review Tips]]></title>
    <link href="http://reiot.com/2004/11/25/code-review-tips/"/>
    <updated>2004-11-25T06:44:42+09:00</updated>
    <id>http://reiot.com/2004/11/25/code-review-tips</id>
    <content type="html"><![CDATA[<p>당신의 프로그램이 다운된다면, 혹은 메모리 누수가 심하다면 다음과 같은 룰을 기반으로 코드를 리뷰하라. 이때, 코드 작성자가 아닌 다른 프로그래머를 항상 옆에 대동하면 버그를 찾을 확률은 200% 증가할 것이다. (사실 이건 내부 자료인데 몰래 공개하는 것이다. 헤헤)</p>

<ul>
<li>상속 관계의 베이스 클래스에 virtual destructor 를 선언했는가?</li>
<li>배열 포인터를 delete[] 로 삭제하는가?

<ul>
<li>delete:Wh*[]으로 정규식 검색을 하면 편하다.</li>
</ul>
</li>
<li>배열이 아닌 포인터를 delete[] 로 삭제하는가?</li>
<li>memcpy(), memset(), memmove(), strcpy() 메모리 관련 함수들의 BoundCheck가 잘 되어 있는가?</li>
<li>배열을 인덱싱할 때 파라미터의 BoundCheck 가 잘 되어 있는가?</li>
<li>다른 peer 로 부터 넘어온 모든 정수형 파라미터에 대한 BoundCheck가 잘 되어 있는가? (특히 문자열 길이에 유의)</li>
<li>STL string 을 사용한다면, %s 포맷팅할 때 c_str() 을 사용하는가?</li>
<li>Singleton 이나 STL 컨테이너에 대해서 2개 이상의 쓰레드가 동시에 읽기/쓰기 모드로 접근하는 경우 lock 을 걸고 있는가?</li>
<li>사용하지 않는 copy constructor, assignment operator 가 private 로 선언되어 있는가?</li>
<li>포인터 멤버를 가진 객체를 복사할 때 assignment operator 를 재정의했는가?</li>
<li>Warning Level 을 4 로 높인 다음 컴파일해봤는가?

<ul>
<li>초기화하지 않고 사용하는 변수(또는 클래스 데이터 멤버)가 가장 위험하다.</li>
</ul>
</li>
<li>try ~ catch( ... )은 절대 사용하지 말라. SEH Exception 까지도 캐치해버린다.버그를 숨겨서 더 큰 버그를 만들 뿐이다.</li>
<li>set_se_translator() 를 쓰지 마라. 쓰레드 로컬이라, 매 쓰레드마다 해줘야 한다. SetUnhandledExceptionFilter()는 프로세스 글로벌이다.</li>
</ul>


<p>see also:</p>

<ul>
<li><a href="http://imays.pe.kr:41414/moin/iwiki/moin.cgi/_bc_ad_b9_f6_20_c7_c1_b7_ce_b1_d7_b7_a5_20_c4_da_b5_f9_c0_c7_20_c1_d6_c0_c7_bb_e7_c7_d7">서버 프로그래밍시 주의사항</a> by imays님</li>
<li><a href="http://www.myevan.net/phpBB/viewtopic.php?t=1484">서버 프로그래밍시 주의사항</a> by 빗자루님</li>
<li><a href="http://www.macadamian.com/codereview.htm">Code Review Checklist</a></li>
<li><a href="http://www.macadamian.com/column/completeBreakfast.html">Part of Your Complete Breakfast</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MMORPG 밸런싱은 너무 힘들어요]]></title>
    <link href="http://reiot.com/2004/11/25/about-mmorpg-balancing/"/>
    <updated>2004-11-25T04:54:58+09:00</updated>
    <id>http://reiot.com/2004/11/25/about-mmorpg-balancing</id>
    <content type="html"><![CDATA[<div style="text-align:center;"><img src="http://boxcatstudio.files.wordpress.com/2009/07/DM.jpg"></div>


<p>부끄러운 이야기이지만 한때 MMORPG 기획물을 먹을 때, 공식 혹은 비공식적으로 밸런스를 더이상 하고 싶지 않다고 선언한 적이 있습니다. 꿈 많은 기획 초보에서 일년만에 타락한 실패한 기획자가 된 거죠. 알게 모르게 욕도 많이 먹었습니다. 대놓고 실력없다고 욕먹은 적도 있습니다. 그 암울했던 시절의 밸런싱 스토리를 한번 풀어내보겠습니다.</p>

<p><strong>완벽한 밸런스?</strong></p>

<p>모든 유저들의 마음에 쏙 드는 리밸런싱은 있을 수 없다. 그러나, 가장 많은 유저들이 만족한다면 그게 바로 제대로 된 밸런스다.</p>

<p>기술이 추가되거나, 전투 공식이 수정되거나, 몬스터 배치가 바뀌거나, 아이템 가격이 변동되면 분명히 누군가는 불만을 토로하게 되더군요. 그 누군가가 게임 내에서 길마 등 일정 지위(-<em>-)에 도달해 있거나, 덕망(-</em>-)이 높거나, 사장과 안면이 있거나, 게시판 글발이 좋을 경우 후폭풍이 무조건 몰아치더라구요.</p>

<p>물론 개발팀 특히 기획팀이 최선을 다하지 않아서 그랬겠지만, 결국 불쌍한 운영팀만 욕을 먹게 되더군요. 결국, 패치 후 필연적으로 발생하는 유저들의 불만을 눈가리고 아웅하기 위해,  불쌍한 기획자와 운영자들은 다음과 같은 얍삽한 노하우를 얻게 되었습니다.</p>

<pre><code>- 모든 아이템의 가격은 시간이 흐름에 따라서 점차 떨어져야 한다
- 모든 기술의 MP 소모량은 시간이 흐름에 따라서 점차  줄어들어야 한다
- 동일 레벨의 필요경험치는 시간이 흐름에 따라서 점차  줄어들어야 한다
- 동일 레벨의 육성 시간은 시간이 흐름에 따라서 점차 짧아져야 한다
- 모든 제한 요소는 시간이 흐름에 따라서 점차  완화되어야 한다
</code></pre>

<p>즉, 어떤 새로운 기능이 들어갈 때 페널티 관련 파라미터들은, 이후 플레이어들의 비난을 감안해서, 약간 높게 책정되어야 한다는 건데요, 처음부터 적정 수준을 잡았다가 플레이어들이 시위를 할 경우 더이상 낮추다간 큰일나게 되기 때문입니다.</p>

<p>이런 식의 데미지를 한번이라도 입어봤던 분들은, 요즘도 종종 이런 이야기를 합니다.
<blockquote><p>일단은 이정도로 하고 분위기를 봐서 낮추든가 합시다</p></blockquote>
<strong>아무도 믿지 말라?</strong></p>

<p>이 부분에 대해서는 제 잘못이 아주 큽니다. 왜냐하면, 기획자라는 넘이 캐릭터를 처음부터 끝까지 키워보지 않았기 때문이지요. 아무튼, 게임이 어떻게 돌아가는지, 요즘 플레이어들의 불만이 뭔지, 스스로 상황 파악이 안되고 주위 사람들에게 불평 불만을 들어야만 아는 상황이었으니... 이사람 말에 솔깃, 저사람 말에 갸웃하게 되는 지경이었습니다.</p>

<p>그러다가, 열혈 플레이어였던 사장 운전사의 피를 토하는 한마디!
<blockquote><p>아.. 캐릭터 키우기가 너무 힘들어. 지금 다들 게임을 접으려고 하고 있단 말이야. 길마들 다 난리야!!!</p></blockquote>
이 말을 듣고, 한쪽 종족의 성장 곡선을 완화시키는 패치를 내보냈더랍니다. 그 결과는... 다들 짐작하시겠지요. 그 이후, 열렙하는 개발자들의 하소연은 30-40% 허풍으로, 플레이어들의 게시판 이야기는 70-80% 과장으로 인식하게 되는 병을 얻었습니다. 게임 자체가 종족간 대립 구도를 채택해서 이런 불신증상은 더했다는... 웬만한 불만은 무시하고, 게시판에서 호소력이 있는 명문을 발견하거나, 여러 명한테서 동일한 불만을 듣게 되면, 보완 작업에 들어갔습니다.</p>

<p>그나마, 이쪽 저쪽 불만을 모두 접하는 운영팀의 이야기가 가장 중립적이었습니다. 그치만, 자기 캐릭을 키우는 넘은 또 그게 아니더군요.
<blockquote><p>제가 좀더 많이 플레이를 했더라면 충분히 막을 수 있었던 실패담이지만, 웬지 모르게 그게 안되더군요. 다들 저보고 제발 플레이좀 해보라고 이야기하곤 했지만, 그냥 한귀로 흘려버렸다는.... (물론 다들 속으로 정말 답답해하고 어떤 사람은 욕도 많이 했겠지요) 프로페셔녈이라면 절대 그럴리가 없었겠지요. 자기가 만든 게임에 대한 애정 부족! 그때 저때문에 피보신 많은 분들께 여기서나마 잠시 사죄를 드려봅니다.</p></blockquote>
<strong>밸런싱에 대한 주관적인 접근(X)</strong></p>

<p>사실 이게 본론이 되겠습니다. 사실 나리티님의 글에서 나온 목록중에서 많은 부분에 대해서 고민을 안해본게 아닙니다만, 그런 데이터 수집 활동이 너무 주관적이며 신용도가 낮다는데 문제가 있습니다. 결론부터 말하자면, 플레이어들의 게임 플레이에 대한 로그 분석 활동이 기획자들의 주요 업무가 되어야 한다는 거구요. 그에 따른, 프로그래머들의 서포트가 있어야 한다는 겁니다. (라기보다는, 아예 초기 개발 시점부터 기획팀에서 이후 조사를 위한 필요 데이터를 명시한 기획서를 넘기고, 프로그램팀에서 관련 데이터를 가공하기 쉽도록 DB에 남긴다..가 되겠네요)</p>

<p>지금 참가중인 프로젝트에서도 이런 부분이 너무 미숙해서, 회의에 들어가면 대체로 주관적인 평가들을 많이 하곤 합니다. 더군다나 퍼블리셔에서 누군가가 한마디한 것들이 점차 증폭되어 정말 진리인양 개발팀으로 흘러 들어오는 걸 보고 있노라면.. 으..</p>

<pre><code>- 게임이 어려워서 동접이 늘지 않아요.
- 처음에 몇 번 해보고 다들 접어요.
- 유저중 절반이상이 어느 수준에서 게임을 포기해요.
- 하다보면 자꾸 튕기고, 짤려요.
</code></pre>

<p>분명히 이런 부분은 데이터를 가지고 객관적으로 접근해야 하는 것임에도 불구하고, 다들 너무 즉흥적이면서 주관적으로 접근하는 경향이 있더군요. 처음부터 이런 부분을 감안하고 데이터를 남겨놓지 않으면, 정작 필요할 때 문제의 원인을 파악하기 힘든 경우가 많은데... 그렇다고 특별한 지시 없이도 알아서 필요 데이터를 잘 축적해주는 프로그래머는 드물지요.</p>

<p>그렇다고 데이터 만능주의로 흐르다가는 게임의 본연의 모습을 잃어버릴지도 모르겠네요. 가령, 플레이 시작후 일주일만에 총 신규가입자의 10%가 떨어져나가는데 이 원인은 20레벨에서 25레벨의 경험치가 너무 많아서 그런게 아니라 퀘스트의 복잡도가 너무 높고 플레이 시간이 길어져서 중얼 중얼중얼... 퀘스트를 하루에 1.5개 이상 주어지고 초보들의 소지금액을 현재의 20%로 증가시키기 위한 대책안을 마련해서 중얼 중얼... 물론 비지니스로의 가치는 충분하겠습니다만.</p>

<p>시스템 디자인 시점에서도 분명 나리띠님의 글처럼 안배가 되어 있어야 하겠지만, 과연 그게 원안대로 잘 적용되고 있는지, 플레이어들이 만족하고 있는지를 파악하려면, 테스트 시점이나 오픈 이후에도 분명 데이터 분석을 통한 사후 검증 및 개편작업은 필연적일 것입니다.</p>

<p><strong>결론 : 데이터 마이닝(?)</strong></p>

<p>전개가 좀 산만했네요. 억지로 정리를 해본다면, 완벽한 밸런싱이라고 하는 것은 다른 사람이나 자신의 주관적 판단보다는 객관적인 데이터를 토대로, 다수 플레이어들의 불평불만(?)을 가지치기하듯 최소화한다. 라고 우길 수 있겠습니다.</p>

<p>DB 전문인 후배에게 물어보니, 다들 한번쯤 들어봤을 데이터 마이닝이나 OLAP 등의 분야가 이런 부분을 다루는 거라고 하네요. 단순한 데이터에서 의미를 마이닝(mining)해내어 트렌드를 찾아내고 정책을 결정하는 거라나요? 맨 위의 그림을 보면 대충 무슨 의미인지는 아시겠습니다만.</p>

<p>큰 회사라면 몰라도, 고만고만한 작은 회사들에서는 이런 부분을 제대로 갖추기가 힘들지 않을까 합니다. 우선 무엇을 저장할지를 골라주는 경험많은 기획팀과, 어떻게 저장할지를 결정해주는 DBA, 그리고 데이터를 분석해서 적절히 플랜을 작성할 마케팅 담당자가 필수적이겠습니다. 물론, 프로그래머는 당연히 시키는 데로 데이터를 DB로 넘겨야죠.</p>

<p>물론 지금도 많은 회사들은 접속 회수와 시간, 지역/성별/나이별 통계 자료, 시간대별 분포도 등을 기반으로 마케팅 플랜을 작성하는 곳은 많겠습니다만, 게임 내부적인 수많은 파라미터들을 남겨서 이후 리밸런싱에 활용하는 회사는... 글쎄요 NCSoft 라면 아마 그렇게 할지도 모르겠습니다.</p>

<p>KGDA의 어딘가에서 본 글처럼, 아무래도 한국에는 이를 제대로 할 줄 아는 개발자가 많지 않은 듯 합니다. 이게 개발자가 알아서 해야 할 일은 아니겠지만요.
<blockquote><p>그나저나, 이렇게 결론지으면 뭐하나요? 동접이 늘어나질 않는데... ㅠㅠ</p></blockquote></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[어떻게 우리 팀의 XP가 실패했는가?]]></title>
    <link href="http://reiot.com/2004/11/24/%E1%84%8B%E1%85%A5%E1%84%84%E1%85%A5%E1%87%82%E1%84%80%E1%85%A6-%E1%84%8B%E1%85%AE%E1%84%85%E1%85%B5-%E1%84%90%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%B4-xp%E1%84%80%E1%85%A1-%E1%84%89%E1%85%B5%E1%86%AF%E1%84%91%E1%85%A2%E1%84%92%E1%85%A2%E1%86%BB%E1%84%82%E1%85%B3%E1%86%AB%E1%84%80%E1%85%A1/"/>
    <updated>2004-11-24T22:53:01+09:00</updated>
    <id>http://reiot.com/2004/11/24/어떻게-우리-팀의-xp가-실패했는가</id>
    <content type="html"><![CDATA[<p>붐붐차차 프로젝트는 처음부터 "XP를 한번 연습해본다"라는 기치를 내걸고 시작했다. 개발 초기 3-4개월동안은 별 문제없이 흘러갔지만, 7-8 개월이 지난 이후부터 지금까지, 테스트 코드는 더이상 유지보수되지 않고 있다. 과연 무엇이 문제였을까? 그리고 다음번 프로젝트에서도 XP 를 성공적으로 도입할 수 있을까?</p>

<p><strong>잘못된 테스트 프로젝트 설정</strong></p>

<pre><code>- 요약 : unittest 의 링킹 시간이 너무 길었다.
- 해결책 : DLL(?)
</code></pre>

<p>unittest 라는 프로젝트에서 다른 모든 라이브러리를 테스팅하도록 프로젝트를 구성했다. 테스팅 코드가 적을 때에는 unittest 만 통과하면 OK 이었기 때문에 편리했지만, 점차 테스팅 코드가 많아지면서 링킹해야 할 라이브러리의 개수와 크기가 늘어나게 되었고, 결국 컴퓨터가 버벅거리며 링킹할 동안 인터넷 서핑하는 습관이 생겨버렸다. 작업 효율이 떨어진 것은 당연지사.</p>

<p><strong>중복 코드의 미제거</strong></p>

<pre><code>- 요약 : TestingCode 의 중복이 너무 심해서 컴파일 시간이 너무 길어졌고, 리팩토링을 할 때에는 죽어났다
- 해결책 : 중복 코드가 제거되기 전까지는 테스트가 완료된 것이 아니다.
</code></pre>

<p>어느 날 소스를 조사해보니, (2만라인이 채 안되는) ProductionCode 보다 TestingCode 가 8배 정도 더 많다는 사실을 발견했다. 물론 이게 문제라는 것은 깨달았지만 아무도 이 부분을 고치지 않고 그냥 지나가버렸다. 시간이 나면 고치겠다는 프로그래머의 전형적인 회피술과 함께. 그리고, 언젠가부터 ''시스템 사양이 좀 떨어지는'' 한 개발자가 점점 UnitTest 를 회피하기 시작했으며, 그다음 체크아웃을 한 개발자가 깨진 UnitTest 를 복구해야 하는 일이 종종 발생하게 되었다. 덕분에 서로가 서로에게 짜증을 내게 되었는데... 그 개발자는 시스템 업그레이드 타령과 함께, 굳이 간단한 건 하지 않아도 무방하지 않느냐..라고 하고, UnitTest 를 복구해야 했던 개발자는 왜 자신이 그걸 대신 복구해야 되느냐고 화를 냈기 때문이다. (물론 이때가 팀웍이 흐트러지고 사기가 저하된 타이밍이기도 했다)</p>

<p>그러다가 대규모 리팩토링이 필요해진 시점이 있었다. 그러나, 이미 테스트 코드들이 더이상 손쓸수 없이 거대해졌기 때문에, ProductionCode 를 수정을 하는 시간에 비해 TestingCode 를 리팩토링해나가는 시간이 훨씬 더 많이 들게 되었다. 리팩토링을 완료하고 나자, 다들 UnitTest 라면 손사래를 치며 도망가버렸다.</p>

<p>웃긴 것은, Kent Beck 의 TestDrivenDevelopmentByExample 책에서는 '''중복 코드의 제거'''가 Iteration 의 필수 요소로 자리잡고 있었다. 왜 ExtremeProgrammingInstalled 번역서에서는, 이걸 더 강조해주지 않았을까? 쳇!</p>

<p><strong>UnitTest 라이브러리의 기능 부족</strong></p>

<pre><code>- 요약 : 특정 테스트를 선택하기 위해서는 항상 재컴파일이 필요했다. 결국, 테스트 시간을 더 길어졌고, 개발자들은 UnitTest 와 더 멀어졌다.
- 해결책 : 선택적인 테스트가 편리한 라이브러리를 사용할 것
</code></pre>

<p>CppUnit 과 BoostTest 중, BoostTest 를 선택한 이유는 Visual Studio 7.1 과의 호환성 문제였다. (당시 CppUnit 의 경우 VC 7.1 과 호환되지 않았다) 그러나, 이넘은 내가 원하는 코드만을 테스트한다는 것을, 즉 GUI 방식의 테스트를 지원하지 않았기 때문에, 결국 매 테스트마다 코드를 수정해야 했다. 문제는 특정 테스트를 수동으로 추가/삭제하는 파일이 다른 헤더 파일을 모두 include 하는 main 이라서, 약간만 수정하더라도 컴파일 -> 링킹을 다시 해야 했다는 데 있다.</p>

<p><strong>PairProgramming 의 실패</strong></p>

<pre><code>- 요약 : 관용의 부족으로 인한 불화(?)
- 해결책 : 정신을 뜯어고쳐야지!
</code></pre>

<p>이 부분은 솔직히 [레이옷]에게 원인이 있다. [레이옷]의 후배이자 동료인 프로그래머와 Pair를 할 때마다 티격태격 했던 것 때문이다. 조금씩 서로의 코드에 대한 관용의 마인드를 키워나가기도 했고, 관계 개선 - 후배에서 동료로 생각을 고쳐먹기 - 을 해보려고 했지만, 잘 되지 않았다. 여전히 지금도 반말 90% 존대말 10% 에다가 틈만 나면 큰소리치고 강압적으로 밀어붙이기를 해대고 있다. ㅡㅡ;</p>

<p><strong>귀차니즘</strong></p>

<ul>
<li>요약 : 4-5개월 이후부터 CRC 카드라든지 스토리, 일정 추정, 기립 회의 같은 걸 하지 않았다</li>
<li>해결책 : XP 관리자의 마인드가 중요하다.</li>
</ul>


<p>이 부분 역시 XP 관리자였던 [레이옷]에게 원인이 있다. 처음에는 다들 열정적으로 해나갔지만, 프로젝트가 길어지면서 XP의 핵심 요소들을 하나 둘씩 빠져나가고 마지막까지 남았단 UnitTest 마저도 어쩌다보니 개발자들로부터 폐기처분 당해버렸다. 중간에 문제가 있을 때마다 추스리고 나가야 했지만, 그러질 못했다.</p>

<p>see also:</p>

<ul>
<li><a href="http://xper.org/wiki/xp/_b7_b9_c0_cc_bf_ca">이 글에 대한 김창준씨의 분석</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[내맘대로 쓰는 게임 개발 방법론]]></title>
    <link href="http://reiot.com/2004/11/24/%E1%84%82%E1%85%A2%E1%84%86%E1%85%A1%E1%86%B7%E1%84%83%E1%85%A2%E1%84%85%E1%85%A9-%E1%84%8A%E1%85%B3%E1%84%82%E1%85%B3%E1%86%AB-%E1%84%80%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%B7-%E1%84%80%E1%85%A2%E1%84%87%E1%85%A1%E1%86%AF-%E1%84%87%E1%85%A1%E1%86%BC%E1%84%87%E1%85%A5%E1%86%B8%E1%84%85%E1%85%A9%E1%86%AB/"/>
    <updated>2004-11-24T22:49:51+09:00</updated>
    <id>http://reiot.com/2004/11/24/내맘대로-쓰는-게임-개발-방법론</id>
    <content type="html"><![CDATA[<h2>Extreme Game Development</h2>

<p>레이옷이 처음 온라인 게임을 만들 때에는, 최신 기술을 얼마나 잘 사용할 것인가? 라든지, 오픈후 폭주할 사용자들의 접속과 그에 따른 불만들을 생각하면서 서버를 디자인할 때에나, 코딩을 할 때 아예 처음부터 이런 부분을 모두 고려해서 잘 짜보자..라는 환상에 빠져 있었다.</p>

<p>그러나, 실제로 이렇게 하다 보면 작업 기간이 두배 세배로 늘어났으며, 그에 따라서 능률이라든지 효율이 많이 떨어졌던 적이 많았다. 이러다보니 개인 생활도 점차 피폐해져가고, 원래부터 얼마 없던 인간미도 스트레스로 인해 점점 희미해져가게 되고, 일은 일대로 진척되지 않고, 유저들은 불만을 느끼고... 재미없게 만든 게임 치고 히트를 칠 이유가 없지 않은가...</p>

<p>요즘 들어 느끼는 것은, 서버의 안정성은 경력이 쌓여갈수록 점점 높아지며, 확장성은 프로그램을 짜면 짤수록 자연스럽게 얻어진다는 점이다. 속도는 실행해보고 느리면 프로파일링을 통해서 그 부분만 최적화해나가면 되는 법. 결국 우리가 여기서 얻을 수 있는 교훈은, <strong>필요한 기능은 필요할 때 구현하면 된다. 대신, 현시점에서 가장 간결한 코드를 유지하라! 미래의 요구사항을 걱정하지 말라!</strong> 라는 것일까? 이는 Extreme Programming의 가치와 매우 유사하다.</p>

<p>즉, 불필요한 확장성과 최신 기술로 고민하는 시간을 부족한 게임성을 높이는데 주력하라는 말씀! 근데 말은 이렇게 해도 나 역시 언행일치가 잘 안될 때가 많다.</p>

<h2>헤일로2 개발자들에게 배우는 상위 법칙</h2>

<p>아직도 헤일로2 보너스 DVD 를 보지 않았다면, 꼭 동료들을 불러서 함께 봐라. 30% 정도의 과장과 연출을 무시하더라도 그들은 정말 강하다. 팀원 개개인이 게임 개발의 주체가 되어 더 나은 게임성을 만들어나가는 모습은 정말 감동적이다. 그들에게서 배울 수 있는 2가지 핵심 법칙은 다음과 같다.</p>

<pre><code>- 30초 플레이의 법칙 : 30초의 게임 플레이가 즐거우면, 모든 것이 즐겁다. (이 플레이를 계속 유지시키면 되니까...)
- 5분 플레이의 법칙 : 플레이어는 5분 동안 플레이해서 재미가 없으면 접는다. 즉, 5분 동안 플레이어를 잡아 둘 수 있다면 성공!!
</code></pre>

<h2>잦은 릴리즈</h2>

<p>적정 기간의 마일스톤은 개발팀이 하나의 목표를 향해 흔들리지 않고 달릴 수 있게 해준다. 또한 투자자들에게 일이 잘 흘러간다는 것, 내 돈이 제대로 쓰이고 있다는 것을 알게 해준다.</p>

<p>매 2-3개월마다 개발된 내용을 릴리즈하고 사내에서 시연하라. 시연은 잘못된 과거를 반성할 수 있게 해주며, 부족한 시간과 자금, 맨파워를 느낄 수 있게 해준다. 잘 되든 잘못되든 시연은 좋은 것이다. 아무리 적어도 일년에 4-6회의 내부 시연을 가져야 한다. 결과가 좋을 경우 개발팀에게 보너스를 지급하라. 나쁠 경우에는 왜 잘못되었는지에 대해서 보고서를 쓰게 하고, 보너스는 다음번 시연으로 연기하라.</p>

<p>모든 작업은 2주를 단위로 개발자들에게 할당되어야 한다. 주5일이 확산되고 있는 시점에서, 1주는 너무 짧고 3주는 너무 길다.</p>

<h2>퀄리티 > 일정</h2>

<p>퀄리티는 절대 양보될 수 없다. 버그 1개를 출시할 바에는 기능 2개를 제거하는 것이 옳다. 그러나 이미 윗사람들이나 마케터가 유저들에게 약속해버린 경우에는 어떻게 해야 할 것인가? (종종 개발팀을 압박하기 위해서 저질러지는 일들이다.) 이 기능이 빼고 출시할 바엔 차라리 포기하는 게 낫다. 그러나 이걸 포기하면 잠재적인 손해가 수천수백만원에 회사 이미지가 손상되므로 무조건 구현해라!라고 나오면 어떻게 하는 것이 옳은가?</p>

<p>중요한건 그들은 책임지지 않는다는 것이다. 최종적으로 책임지는 자는 개발팀이며 결과적으로 회사는 더욱 막심한 손해를 입는다. 주가 관리를 위해 마그나카르타를 출시했다가 치명적인 손상을 입은 소프트맥스의 케이스를 보라. 끝까지 설득하라. 그래도 안된다면 그들로 하여금 퀄리티와 스케줄 둘 중 하나를 선택케 하라.</p>

<p>실제로 불가능한 스케줄을 accept 하게 되면, 원죄를 짊어지고 시작하게 되는 것이다. 어떻게 열심히 야근하면 되지 않을까 하는 낙관적인 접근은 결국 팀을 와해시킨다. 전통적인 SE 에서 디자인 시간이 오래 걸리는 것은 이와 같은 스케줄 관리에서 소모되는 시간을 포함한 것이라고 보면 옳을 것이다. 일단 작업계획서에 서명을 하고 나면 모든 것은 끝이 난다. 그렇더라도 불가능을 확인하게 되면 즉시 상부에게 알려라. 그것이 피해를 최소화하는 것이다.</p>
]]></content>
  </entry>
  
</feed>
