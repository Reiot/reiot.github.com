<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<title>Rebooting Reiot</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="A social game developer wandering strange dungeons...">
	<meta name="author" content="Ray Yun">

    <!-- Le styles -->
	
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        font-family: 'Helvetica Neue', '맑은 고딕', Helvetica, Arial, sans-serif;
      }
      .tag-cloud, .category-cloud {
        line-height: 250%;
      }
    </style>
    <link href="/assets/css/bootstrap-responsive.min.css" rel="stylesheet">
	

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">Rebooting Reiot</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="/">Home</a></li>
              <li><a href="/archives/">Archives</a></li>
              <li><a href="/category/">Categories</a></li>
              <li><a href="/tag/">Tags</a></li>
			  
            </ul>
            <form class="navbar-search pull-left">
              <input type="text" class="search-query" placeholder="Title Search">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

	
<div class="container">

	

	<div class="row">
		<div class="span9">
			
				<div>
	<div class="page-header">
		<h1><a href="/2008/11/15/three-rules-for-database-work/">Three Rules for Database Work</a> <small>2008-11-15</small></h1>
	</div>
	<div><p><a href="http://www.openmaru.com/273"><img alt="http://www.openmaru.com/attach/1/1046597520.jpg" src="http://www.openmaru.com/attach/1/1046597520.jpg" /></a><br />
<em><a href="http://www.openmaru.com/273">하루에 10만을 채우는 게임</a>은 이런 게 이벤트가 되는구나.</em></p>
<p>오늘자 코드 프로젝트에 올라온 <a href="http://www.codeproject.com/KB/architecture/DBTool.aspx">DBTool</a>의 근간이 된, <a href="http://odetocode.com/Blogs/scott/archive/2008/01/30/11702.aspx">데이터베이스를 갖고 놀 때의 세가지 룰</a>은 생각보다 간단했다.</p>
<h3>Never use a shared database server for development work.</h3>
<p>예전에는 (rails 스타일의) development-test-production 의 3단계 구분법을 사용했다. DBA와 서버 프로그래머는 dev DB에서 열심히 뒤집어 엎어도, test DB에 연결된 다른 프로그래머들이나 테스터들은 안정적으로 사용할 수 있고, 실제 서비스는 production 데이터베이스를 쓰게 된다는 거다.</p>
<h3>Always Have a Single, Authoritative Source For Your Schema</h3>
<p>DB 에 짧지만 단순한 나의 지론은, 레파지토리 어딘가에 무조건 전체 스키마+초기데이터를 담은 SQL 파일을 두고 버전 관리를 해야 한다는 거다. 소스 코드, 애셋들은 과거의 특정 시점의 스냅샷을 꺼내올 수 있는데, 유독 데이터베이스가 열외일 수는 없다고 본다.</p>
<p>또한 어차피 데이터베이스 패치를 해야 할 테니, create, alter로 가득찬 DB 패치 스크립트도 버전 관리해야 한다. test -&gt; production 를 업그레이드할 때 모두 지우고 새로 만드는 만행을 할 수 없을테니, 아예 dev -&gt; test 에서부터 미리 스크립트를 만들어서 테스트하면 정신 건강에 좋지 않겠냔 말이다. 처음에 언급한 DBTool 이 이런 걸 자동화해주는 모양이다.</p>
<h3>Always Version Your Database</h3>
<p>보통은 Config 테이블에다가 문자열로 데이터베이스 스키마 최종 변경일을 넣어두는 걸로 해결하고 있다. 그런데 아직 뭔가 변경이 잘 되었는지를 체크할 만한 테스트를 만들 능력은 안된다. 대체로 alter 든 drop 이든 서버가 뜰 때까지는 잘 모를것 같아서.. :)</p>
<p>이 외에도 무시무시하게 긴 <a href="http://www.ssw.com.au/ssw/Standards/Rules/RulesToBetterSQLServerDatabases.aspx">Better SQL Server Databases</a> 라는 규칙도 있는데 이건 좀 귀찮구나....</p>
<p>추가:</p>
<pre><code>- 다른 글을 찾아 보니, 프로시저나 테이블 각각을 서로 다른 파일에 저장해서 관리하라는 말도 있다. 은근히 그럴듯한데?
</code></pre></div>
	<br />
	<p>
	
		<a href="/category/database/"><span class="label label-info"><span class="icon icon-folder-open"></span> database</span></a>
	
	
		<a href="/tag/database/"><span class="label"><span class="icon icon-tag"></span> database</span></a>
	
	</p>
</div>
			
				<div>
	<div class="page-header">
		<h1><a href="/2008/11/14/kgc2008-2/">KGC2008(2)</a> <small>2008-11-14</small></h1>
	</div>
	<div><p><img alt="http://sirini.net/blog/data/diablo_3_3.jpg" src="http://sirini.net/blog/data/diablo_3_3.jpg" /></p>
<p>컨셉 아트에서부터 모델링, 매핑에 이르는 모든 영역을 소화해낸다는 특급 제너럴리스트들로 구성된 디아블로3 배경팀의 아티스트는 <strong>"아트는 결국 게임을 위해서 존재한다"</strong>고 말씀하셨다.</p>
<p>파이프라인의 2단계에서부터, 텍스처도 없는 애셋을 게임에 올려서 테스트해볼 수 있어야 한다는 이야기를 그분도 좀 새겨 들으셨으면 싶다. 디테일이 지나쳐서 플레이어들에게 시각적 혼란을 주면 안되기 때문에 사진 텍스처 대신 손으로 그린다는 이야기도.</p>
<p>바닥 양탄자 색깔을 암묵적인 진행 방향으로 삼는다든지, 모든 디자이너들이 실시간으로 애셋들을 공유하되 거기에서 자신만의 커스터마이징을 거쳐서 항상 다르게 보이는 배경을 만든다든지, 3D 환경에서 랜덤맵 기반의 배경 그래픽을 만든다는 이야기들은 역시 블리자드 스케일! 이라는 인상을 받았다.</p>
<p>그나저나 먼저 다함께 스타일 가이드를 만들고, 컬러 스터디를 하고, 디자인 템플릿이 나오면 페인트오버 덧칠해서 돌려본다고 하니, 실컷 작업한 후 디렉터가 drop시키면 울면서 재작업한다던 이야기가 떠올라서 씁쓸했다. (어제 배씨 아저씨는 민주적으로는 타협과 협상의 결과가 나온다고던데, 이 아저씨는 직위 고하에 관계없이 브레인스토밍해서 최대한 아이디어를 살려 나간다고 하니, 이게 바로 국민성의 차이인가..)</p>
<p><a href="http://www.moven.com/en/home_moven.php">Moven</a> 이 고작 5천만원이라는 사실에 처음 경악했고 <em>(우리는 모캡 받은 후 그 결과를 넘겨 받는데 두 달이나 걸렸는데도  천오백만원이었는데..)</em>, 우리가 UBO에서 구현했던 게 Motion Library Based Character Simulation 에 근접한 기술이었다는데 순간 뿌듯했으며(물론 우린 더 파지 않아서 단순 Parameterized Blending 수준이었지만), 이걸 더 발전시킨 게 스포어에서 사용된 기법이었다는 것도 놀라웠다. </p>
<p>컴포넌트 기반 방법론은 강연자가 멋지다는 이야기만 하고 구체적인 적용 방안이나 장단점에 대해서는 코드조차 보여주지 않아서 아쉽다는 이야기가 있었다. (망갈로라서 그런가!!) 컴포넌트간 메시지 기반 통신은 모듈간 의존도는 확실히 줄어들고, 유닛테스트하기도 편하고, 멀티코어 대응도 쉬울 것 같은데, 클라이언트야 그렇다 치더라도 서버에서는 어떻게 잘 쓸 수 있을지가 좀 애매했다. 실제로 이런 구현을 쓰고 있는 모군에게 물어보면 역시나 디버그하기가 괴롭다는데... 흐흠. GPG 5권이나 다시 읽어봐야지.</p>
<p>jacking75님의 강연은 내가 대구 출신이라서 그런지 구수했다. C# - C++ 연동 때문에 고생을 많이 하신 것 같은데, 역시 XML로 프로토콜을 디자인하고 각 언어별로 코드 제너레이터를 만드는게 최종 진화의 모습이 아닐까 추측해본다. 조만간 나도 비슷한 툴들을 많이 만들어야 할 것 같은데, C# 보다는 VB.NET을 주로 써봐서 뭘 해야 할지 고민이다. 이런 툴의 문제점이라면 편집은 간편하지만 유출 및 보안 문제가 걸릴텐데, 요즘의 대세는 접근 제어가 가능하고 업데이트 걱정을 안해도 되는 웹 기반이 아닐까 싶다. 근데 사내에 .NET 툴들이 많고 자동 업데이트도 잘 되는 걸로 봐서는 또 괜찮을 것도 같고... (시간만 있으면 rails로 해보고도 싶은데.. 아니면 누가 실버라이트로 만들어주든가. 흐흐)</p>
<p>마지막 시간은 이미 알던 이야기라서. 32코어의 시대가 도래하면 얼랭이 세상을 지배할지도 모른다..라고만 정리해보련다. 그 때가 되면 다시 플레이어, 몬스터들 마다 얼랭 프로세스를 할당해서 갖고 놀게 될지도 모르겠다.</p></div>
	<br />
	<p>
	
		<a href="/category/gamedev/"><span class="label label-info"><span class="icon icon-folder-open"></span> gamedev</span></a>
	
	
		<a href="/tag/kgc/"><span class="label"><span class="icon icon-tag"></span> kgc</span></a>
	
	</p>
</div>
			
				<div>
	<div class="page-header">
		<h1><a href="/2008/11/13/kgc2008/">KGC2008</a> <small>2008-11-13</small></h1>
	</div>
	<div><p><img alt="http://www.avatron.com/img/air_sharing_103.jpg" src="http://www.avatron.com/img/air_sharing_103.jpg" /></p>
<p><em>터치의 must-have 아이템. KGC pdf 넣느라 사버렸다. 쿨럭.</em></p>
<p>간만에 부르조아 모드로 집에서 택시를 타고 "일산 킨텍스요~" 라고 하고 가면서 우리나라 교육 제도에 대해서 열심히 떠들었는데, 이 아저씨 할증료를 3천원이나 더 뺏어가네? 한방에 무려 17000원이 날아가버렸다. 역시 택시 기사를 믿어서는 안되는 거다. 일찍 도착하니 할 일도 없고 해서 터치에 무선랜으로 구글 리더를 읽고, 워드프레스 어플로 블로깅도 해보니 어느덧 된장남처럼 느껴졌다. </p>
<p>배재현 상무의 키노트 중에서의 백미는, 게임은 민주적으로 만들어서는 안된다는 이야기. 무능력자들에게 불필요하게 선의를 보였다가는 언젠가 어떻게든 뒷통수를 맞는다는 개인적 경험과 겹쳐져서 들렸다. 또 "전생에 어디에선가 본 듯한 게임"이라는 접근도 꽤 괜찮았다.</p>
<p>다들 NC에는 학벌이 강하니 정치가 심하니 욕하는데, 의외로 배상무의 학벌은 지방대였다. (만세!) "역시 서울 올라올 때 바로 큰 물에 갔었어야 했어"라고 하니, <a href="http://suigui.com/wordpress/2008/11/13/kgc-첫째날/">쉬귀군은 "우리가 98년도에 제대로 게임을 만들었으면 지금 저 위치에 서있었을 거다."</a> 라고 하는데 한편으로는 수긍이 가더라는.. (그러고보니 리니지 처음 나왔을 때 Wand of wish 보고 네트핵 따라 했다고 욕했었는데, 지금 생각하니 그냥 네트핵 오덕의 옹알이였을 뿐이었구나)</p>
<p>IK 에 관해서 강연하신 분은 상당히 논리정연하게 설명을 잘 해주셨다. 예전에 크라이엔진 데모때 보던 IK 장면들을 똑같이 구현하신 걸 보니 꽤 열심히 하신 모양이었다. 모션 리타겟팅도 예상 보다 퀄리티가 좋았다. 역시 애니메이션 전문 프로그래머가 있었어야 했다는 아쉬움이 들면서 동시에, 내추럴 모션이 조금만 먼저 출시되었더라도 우리가 그렇게 고생을 안했을 텐데.. 라는 원망도 들었다. 제대로 업데이트도 안하고 매년 돈만 받아 먹던 빌어먹을 이모션FX를 생각하니 울화통이 터진다. 그래 실력 없어서 빨리 출시 못한 놈들이 죄지.</p>
<p>박일씨의 강연은 예상대로 달변이었다. 7대 낭비는 저기 멀리 도요타 동네에서 온 개념인가 본데, 생각보다 게임 개발에 많이 침투해 있던 그들의 실체를 제대로 느껴본 좋은 시간이었다. 또한, 쉬귀 군이 항상 못마땅해하던 유닛테스트를 재평가하는 시간이 되지 않았을까 생각한다. </p>
<p>셋째 시간은 그다지 땡기는게 없어서 걸스타를 보러 내려갔다가, 넥슨 부스에서 대략 좌절을 하고 돌아섰다. 역시 넥슨은 남들보다 한 세대를 앞서가는 회사이구나 싶었다. 뭐 설명이 필요없는 마비노기 영웅전과, 허스키인지 뭔지 하는 개썰매 게임도 뭐랄까 감성을 자극하는 면이 남달랐다. 물론 드래곤 네스트는 퍼블리싱이니까 별개로 치고 싶지만, 직접 만들든 돈주고 사든, 결과적으로 돈만 많이 벌면 되지 그게 뭔 상관이겠느냐는 의견에 100표.</p>
<p>NHN의 C9도 괜찮았지만 넥슨에 비하면 만 1년의 최적화를 더 해야 할 것 같다는 생각. 그 외에도 괜찮은 게임들이 많이 있었지만, 지면 관계상 생략한다. 이거 맨날 남의 게임 보고 감탄만 하다가 업종을 변경하는게 아닌가 싶어서, 울면서 그냥 집으로 왔다.</p>
<p>돌아오니 나를 반기는 건, 헌재 SBS들의 종부세 위헌/헌법불합치 판정. 만수야 잘 모르는 헌재 간다고 고생 많았다.</p></div>
	<br />
	<p>
	
		<a href="/category/gamedev/"><span class="label label-info"><span class="icon icon-folder-open"></span> gamedev</span></a>
	
	
		<a href="/tag/kgc/"><span class="label"><span class="icon icon-tag"></span> kgc</span></a>
	
	</p>
</div>
			
				<div>
	<div class="page-header">
		<h1><a href="/2008/11/02/weekends-idle-thoughts/">Weekends Idle Thoughts</a> <small>2008-11-02</small></h1>
	</div>
	<div><div id="photoImgDiv2108199423" class="photoImgDiv" style="width:502px;">![회원님이 촬영한 AQUA, Anantara, Maldives.](http://farm3.static.flickr.com/2212/2108199423_a3fac43d56.jpg?v=0)</div>

<p>오랜만에 사건 사고 없는 한가한 주말이다.</p>
<p>먼저 boost asio 를 이용해서 이상적인 아름다운 윈도우 서버 코어를 만든다면? 이라는 상상의 나래를 펴봤다. 누가 봐도 멋진 서버 코어가 되려면 어떤 특성을 가져야 할까?</p>
<pre><code>- 손쉬운 확장성 : 한대의 머신에서 하나의 프로세스로 1천명에서 최대 1만 명을 처리할 수 있도록 확장하는데 무리가 없어야 한다. 즉, IOCP 핸들와 Non I/O Worker 쓰레드를 M:N 으로 조합할 수 있는 구조가 되어야 한다.
- 이벤트 기반 : 사용자가 늘어나면 폴링은 최대한 피해야 한다. 즉 주기적으로 체크해야 하는 Idle Check 같은 코드들은 타이머 쓰레드에서 Post 시켜야 한다.
- 메모리 풀 기반의 버퍼 관리 : 입출력 버퍼를 세션이나 소켓과 1:1 정적으로 매핑시키기 보다는, 메모리풀에서 필요할 때마다 주고 받는 구조를 쓰자. Gathering &amp; Scattering 을 위해서는 필수적이다.
- 버퍼 복사의 최소화 : 어차피 1-recv 는 대세다. 즉, WSABUF를 개별 세션에 연관짓기보다는 메모리 풀에서 관리하고, I/O 쓰레드에서 입력이 완료되었을 때 메시지가 온전치 않으면 버퍼를 재사용해서 다시 요청에 들어가고, 아니면 새로운 버퍼를 게임 쓰레드로 넘기자. 브로드캐스팅할 때에도 버퍼 복사 없이 하나를 사용할 것! 출력의 경우라면 N-Send 를 쓸 수 밖에 없겠다.
- 동기화의 최소화 : 쓰레드간 통신은 [lock free queue](http://www.codeproject.com/KB/cpp/lockfreeq.aspx) 를 사용해야 한다. 
- 쓰레드의 최소화 : 서버간 통신, UDP, 추가적인 listen 소켓이 생겨도 쓰레드를 더 만들지 않을 수 있게, IOCP 를 최대한 활용해야 한다.
- 멀티 코어 대응 : 단지 쓰레드를 많이 만들어서 적당히 잘 돌아가려니..하기 보다는 멀티 코어를 효율적으로 활용하는 방법을 고민해보자.
- 서비스 기반 아키텍처 : ACE의 그것처럼 서비스를 하나의 프로세스에서 돌리다가 필요하면 다른 서버로 옮기더라도 무리없는 구조가 되어야 한다.
</code></pre>
<p>광고성 글이지만 일전에 <a href="http://code.google.com/p/c10k">c10k 라고 서버 코어를 괴롭히는 스트레스 테스트 클라이언트 프레임워크</a>를 구글 코드에 만들어뒀는데 boost asio 테스트만 하다가 중단된 상태다. 대충 아래 그림과 같은 건데...</p>
<pre><code></code></pre>

<p><img alt="http://farm2.static.flickr.com/1106/1248922047_20af4a2d8c_o.jpg" src="http://farm2.static.flickr.com/1106/1248922047_20af4a2d8c_o.jpg" /></p>
<p>이런 걸 <a href="http://code.google.com/appengine/">구글 app engine</a> 으로 만들고 웹으로 요청하면 쓰레드 1만개 정도 만들어서 서버에 패킷을 보내면 괜찮을 거 같은데... 과연 구글에서 허용할까? (아마 SDK 레벨에서 쓰레드 생성이 막혀 있을 것 같다.) 만약 가능하다고 하면 대충 웹페이지에다가 서버 IP/Port 를 입력하고 테스트 시작을 누르면, 각 테스트 케이스들을 실행하고 성공/실패 여부를 화면에 출력해주는 느낌일 것 같다. (emule 에서 웹 기반으로 TCP 포트 체크하는 거랑 비슷한 거다) 헉. 역시나 찾아보니 안된단다.</p>
<pre><code>An App Engine application cannot:
&lt;ul class=&quot;doublespace&quot;&gt;
    - write to the filesystem. Applications must use [the App Engine datastore](http://code.google.com/appengine/docs/datastore/) for storing persistent data. Reading from the filesystem is allowed, and all application files uploaded with the application are available. (Files uploaded as &quot;static&quot; files are not kept on the filesystem.)
    - open a socket or access another host directly. An application can use [the App Engine URL fetch service](http://code.google.com/appengine/docs/urlfetch/) to make HTTP and HTTPS requests to other hosts on ports 80 and 443, respectively.
    - spawn a sub-process or thread. A web request to an application must be handled in a single process within a few seconds. Processes that take a very long time to respond are terminated to avoid overloading the web server.

    - make other kinds of system calls, such as [signals](http://www.python.org/doc/2.5/lib/module-signal.html).
</code></pre>

<p>그나저나 Windows Server 2008 에는 CreateThreadpoolIo() 라든지 GetCurrentProcessorNumber() 같은 해괴한 API 들이 많이 추가된 모양이다. 어디 새로 추가된 API 목록  정리된 페이지 같은 게 없을까?</p>
<p><img alt="구글 막대 그래프 예제" src="http://www.ibm.com/developerworks/kr/library/wa-googlecode1/chart.jpg" /></p>
<p>다음 잡상은 <a href="http://www.ibm.com/developerworks/kr/library/wa-googlecode1/">구글 가젯, 구글 스프레드시트 API, 구글 차트 API로 야구 핵을 만들어보자</a> 라는 글을 보고 떠올린 생각.</p>
<p>서버 개발을 하다 보면 효율적인 리포팅에 대해서 한두번쯤 고민해본다. 수없이 쌓이는 개발자 로그라든지, 동시 접속자나 아이템 판매량 등등의 통계 그래프라든지, GM들에게 노출할 다양한 사용자 액션 추적 기능 같은 것들이 있을텐데, 이런 걸 구글 apps 기반에 통합해버리면 어떨까 하는 생각이다.</p>
<p>요즘의 추세는 온라인으로 이 모든 정보를 확인할 수 있는 웹 기반 솔루션을 만드는 것일텐데, 그렇다면 가젯으로 만들어서 구글 시작 페이지에 넣고 권한 관리를 해버리면 되지 않을까? 자자. 이건 상상이니까 안되는 이유에 대해서는 고민하지 말자.</p>
<p>전사적으로 수많은 서버들의 상황을 한번에 모니터링하기에는 꽤 괜찮은 솔루션일 듯하다.  (물론 MS의 리포팅 서비스가 더 멋지긴 하겠다만..)</p></div>
	<br />
	<p>
	
		<a href="/category/programming/"><span class="label label-info"><span class="icon icon-folder-open"></span> programming</span></a>
	
	
		<a href="/tag/ASIO/"><span class="label"><span class="icon icon-tag"></span> ASIO</span></a>
	
		<a href="/tag/google/"><span class="label"><span class="icon icon-tag"></span> google</span></a>
	
		<a href="/tag/spreadsheet/"><span class="label"><span class="icon icon-tag"></span> spreadsheet</span></a>
	
		<a href="/tag/chart/"><span class="label"><span class="icon icon-tag"></span> chart</span></a>
	
		<a href="/tag/gardget/"><span class="label"><span class="icon icon-tag"></span> gardget</span></a>
	
		<a href="/tag/boost/"><span class="label"><span class="icon icon-tag"></span> boost</span></a>
	
	</p>
</div>
			
				<div>
	<div class="page-header">
		<h1><a href="/2008/10/27/blob-quiz/">Blob Quiz</a> <small>2008-10-27</small></h1>
	</div>
	<div><p><img alt="http://upload.wikimedia.org/wikipedia/en/d/df/The_Blob_poster.jpg" src="http://upload.wikimedia.org/wikipedia/en/d/df/The_Blob_poster.jpg" />요즘 고민하고 있는 문제인데, 보안상의 이유로 비유적으로 설명해보겠다. (실제로 이런 일을 하고 있는 건 아니다 -_-)</p>
<p>이글아이처럼 우리 국정원에서도, 1분 정도의 음성 통화를 대충 100K 로 압축할 수 있는 압축 알고리즘을 기반으로 하는 휴대폰 통화 감청 시스템을 구축한다고 가정하자.  하루에 10 테라바이트 씩 쌓이긴 하지만, 당연히 각 통화 데이터 끼리의 연관성은 없고, 오직 2개의 송신/수신 전화번호의 키값으로 구분될 뿐이다.</p>
<p>모든 데이터들은 프라이버시 보호보다는 HDD 부족으로 2주 정도만 지속되며, 오직 리만브라더즈 2명만 들을 수 있다. 물론 둘 다 바빠서 아무도 듣지 않을 수도 있지만, 그래도 무조건 남기긴 남겨야 하는 이 프로젝트를 당신이 맡게 되었다. (아싸 비유를 만들어내는 게 더 리얼하구나~)</p>
<p>문제는, 연기금을 모두 주가 부양에 써버린 나머지 PC 조립 서버 몇 대만으로 최대한 싸게 구현해야 한다면, 어떤 솔루션을 선택해야 할까? (한줄로 요약하면, <strong>자잘한 BLOB 들이 산더미처</strong><strong>럼 만들어질 때의 안정적인 관리 및 검색</strong>의 문제인데 검색의 비중이 상당히 낮은 케이스라고 할 수 있다.)</p>
<pre><code>- 파일 시스템 : 분산 컴퓨터들의 RAID로 보호되는 파일 시스템에 남기고, 검색은 그냥 폴더명으로.. 백업이 없어서 좀 무섭다.
- 파일 시스템 + 복제 : 안전을 위해 남기는 넘과 읽는 넘을 분리. 안 읽는 넘도 복제해야 한다는게 좀 아깝지만.
- 분산 데이터베이스 : blob insert 는 좀 힘들지만 어쨌든 검색은 쿼리다.
- 분산 데이터베이스 + 복제 : 역시 불필요한 복제의 딜레마는 마찬가지.
- 분산 파일 시스템 + 데이터베이스 : 검색은 파일 시스템, DB는 2차 백업으로... (이건 오버인가;;)
- 기가비트 이더넷 + HTTP : 분산 컴퓨터들을 기가비트 이더넷으로 묶고, HTTP 서버가 공유 폴더로 인식, Rest 방식으로 다운로드
- [in-memory 테이블이나 데이터베이스](http://en.wikipedia.org/wiki/In-memory_database): 어차피 용량의 한계로 안될 듯!
</code></pre>
<div>그러고보면 팝폴더 같은 파일 공유 서비스 회사에서, 어떻게 데이터를 관리하는지 궁금해지는구나.</div>

<div></div>

<div>-- 추가 --</div>

<div></div>

<div>배래군의 조언에 의하면</div>

<div>

    - [memory mapped file](http://en.wikipedia.org/wiki/Memory-mapped_file)을 사용하려면 거의 무한한 크기를 지원하는 64비트 버전을 사용할 것
    - 사용자 증가로 인해 시스템을 확장할때 스트레스 받지 않는 방법을 사용할 것. 안그러면 lock-in 됨.

</div>

<div>분산 환경에서도 일관성있게 접근하려면 아무래도 중앙 집중화된 DB 인데, 용량의 제약이 있으니... 뭔가 하나의 URL로 분산된 컴퓨터들 어딘가에 저장된 리소스를 한번에 가져올 수 있는 솔루션이 뭐가 있지? </div>

<div></div>

<div>큰 flat 파일 안에 트랜잭션을 지원하는 small blob bulk insert & rarely select 가 빠른 무언가가 필요하다. 가상 파일 시스템중에서 찾아봐야 할까나~ 아니면 sqlite + virtual table + memory mapped file 라도 테스트해봐야 하나..</div></div>
	<br />
	<p>
	
	
	</p>
</div>
			
			<ul class="pager">
			
			  	<li class="previous">
			    	<a href="/page/15/">&larr; Older</a>
			  	</li>
		  	
		  	
				<li class="next">
					<a href="/page/15">Newer &rarr;</a>
				</li>
		  	
			</ul>
		</div>
		<div class="span3">
			<ul class="nav nav-list well dsq-widget">
	<li class="nav-header">
		Recent Posts
	</li>
	
	<li>
		<a href="/2008/11/15/three-rules-for-database-work/">Three Rules for Database Work</a>
	</li>
	
	<li>
		<a href="/2008/11/14/kgc2008-2/">KGC2008(2)</a>
	</li>
	
	<li>
		<a href="/2008/11/13/kgc2008/">KGC2008</a>
	</li>
	
	<li>
		<a href="/2008/11/02/weekends-idle-thoughts/">Weekends Idle Thoughts</a>
	</li>
	
	<li>
		<a href="/2008/10/27/blob-quiz/">Blob Quiz</a>
	</li>
	
	<li class="nav-header dsq-widget-title">
		Recent Comments
	</li>
	<script type="text/javascript" src="http://reiot.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=200"></script>
</ul>
		</div>
	</div>

</div> <!-- /container -->


    <footer>
      <p class="pull-right">
        <a href="http://github.com/Reiot/droppress" class="btn btn-success btn-mini">powered by DropPress 0.0.1</a>
      </p>
    </footer>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
	
    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/title_search.js"></script>
	

  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-247024-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>

  </body>
</html>