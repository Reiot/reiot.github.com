<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<title>Rebooting Reiot</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Social Game Developer wandering strange dungeon...">
	<meta name="author" content="Ray Yun">

    <!-- Le styles -->
	
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="/assets/css/bootstrap-responsive.min.css" rel="stylesheet">
	

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">Rebooting Reiot</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="/">Home</a></li>
              <li><a href="/archives/">Archives</a></li>
              <li><a href="/category/">Categories</a></li>
              <li><a href="/tag/">Tags</a></li>
			  
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

	
<div class="container">

	<div class="row">
		<div class="span9">
			
				<article>
	<div class="page-header">
		<h1><a href="/2008/12/27/networking-metaphore/">Networking Metaphor</a> <small>2008-12-27</small></h1>
	</div>
	<div><p>[caption id="" align="aligncenter" width="500" caption="http://www.flickr.com/photos/jasoncross/1260110610/"]<a href="http://www.flickr.com/photos/jasoncross/1260110610/"><img alt="http://farm2.static.flickr.com/1304/1260110610_4e110ad3f5.jpg" src="http://farm2.static.flickr.com/1304/1260110610_4e110ad3f5.jpg" /></a>[/caption]</p>
<p>네트워크 프로그래머가 클라이언트 서버간 통신(혹은 P2P 통신)을 바라보는 메타포에 대해서 갑자기 궁금해졌다.</p>
<p>가장 흔한 개념은 바로 패킷이다. 만약 컨텐트 코드에서 Packet 이나 Command, Message 같은 객체와, Send 와 Receive 같은 함수가 노출되어 있다면, 그걸 만든 사람은 데이터 통신을 바이트의 전송이라는 개념으로 인지하는 것이 아닐까? 데이터를 던지고 받는다는 개념의 네트워킹은 아마도 귀찮은 하드코딩 노가다 작업일 확률이 높다. 흐흐.</p>
<p>조금 높은 레벨(?)로 올라간다면 원격 함수 호출(RPC)이 있겠다. 무언가를 상대방에게 요청(request)하면, 상대방은 그걸 처리한 후 성공이나 실패 같은 결과(response)를 보내준다. 이런 메타포에서는 동기/비동기라든지, 타임아웃 같은 처리들이 따라오게 된다. 만약 네트워크로 무언가를 요청하는 행위가 함수 호출 인터페이스처럼 잘 래핑되어 있다면, 대략 1초간 으쓱해도 무방하겠다. :P</p>
<p><img alt="http://ou800doc.caldera.com/en/SDK_netapi/graphics/rpc.gif" src="http://ou800doc.caldera.com/en/SDK_netapi/graphics/rpc.gif" /></p>
<p>추가적으로, 결과가 없는 요청은 특별히 이벤트(event) 혹은 통지(notification)라는 메타포라고 부를 수 있겠다. 사실 매번 렌더링을 해야 하는 게임 클라이언트나, 항상 빠른 응답 속도를 보장해야 하는 서버가 동기적 요청을 하는 일은 정말 드문 경우이다. 이런 이유로 비동기적인 통신이 대부분이기 때문에 적당히 현재 상황을 알려주고 잊어버리고 있다가, 혹시나 결과(보통은 에러)가 오면 음..그런가? 하고 처리하는 느낌으로 코드를 만들 때가 있다. 시간이 나면 Notify 같은 이름들이 있는지 한번 체크해보시라.</p>
<p>위에 나온 것들은 대체로 즉각적인 처리를 필요로 하는 반면, 어떤 이벤트들은 시간축으로 늘어질 때가 있다. 무슨 말이냐 하면 이동, 공격, 물리 같이 float 단위의 정밀한 사건들은 공간 뿐만 아니라 시간과도 밀접한 관계가 있기 때문이다. 이런 상황을 아름답게 처리하려면, 받는 족족 무언가를 처리하기보다는, 데이터를 시간순으로 쌓아두고 예측, 보간을 통해 그럴듯하게 보여줄 필요가 있다. 이런 걸 보통 동기화(synchronization) 또는 복제(replication)이라고 부른다. 보통 이런 코드들은 네트워크를 넘어선 상위 로직 레벨에 존재하는 경우가 많은데, 어떤 네트워크 라이브러리들은 이런 수준도 알아서 잘 처리하기도 한다.</p>
<p>[caption id="" align="aligncenter" width="300" caption="from http://www.problogger.net"]<a href="http://www.problogger.net"><img alt="http://www.problogger.net/wp-content/uploads/2007/08/rss-buttons.gif" src="http://www.problogger.net/wp-content/uploads/2007/08/rss-buttons.gif" /></a>[/caption]</p>
<p>좀 억지스럽긴 하나, 이메일이나 RSS 등에서 주로 쓰이는 발행(publish)과 구독(subscribe)이라는 메타포는 어떨까?  채팅 채널 같이 지속적인 이벤트가 간간히 발생하는 논리적인 영역에 참가하면, 꾸준히 어떤 이벤트들이 날아오게 된다. 사람들이 바글바글 거리는 지역에 발생하는 수많은 이벤트들을 클라이언트에게 알려줄 때 즉각적인 브로드캐스팅 대신, 이런 개념을 사용한다면 필터링을 통해 트래픽 절감의 효과를 손쉽게 얻을 지도 모르겠다. 후후.</p>
<p>이렇게 단순한 이야기를 현학적으로 어렵게 쓴 이유는, 사실 며칠 전 XML로 프로토콜을 정의하고 코드를 만드는 걸 한번 해볼까 하고, <a href="http://www.codalogic.com/lmx/xsd-overview.html">스키마 튜토리얼</a>을 살펴 보다가, 프로토콜은 XML이 아니라 XSD에 들어가는게 맞지 않냐는 생각이 들어서였다. 물론 XSD도 사실 XML이니까, 쓸데없는 고민 없이 그냥 해도 될 것 같기도 한데... 그러다보니 또 굳이 요즘 세상에 트래픽이 많은 게임이 아니라면 XML 프로토콜을 쓰고, 파싱 및 검증을 XSD로 하는 것도 괜찮지 않냐는 망상에서 허우적 거리고 있다.</p>
<p><img alt="http://upload.wikimedia.org/wikipedia/en/3/32/CheckEmail.png" src="http://upload.wikimedia.org/wikipedia/en/3/32/CheckEmail.png" /></p>
<p>또 한편으로는 클래스 다이어그램과 시퀀스 다이어그램으로 클라이언트/서버간 통신을 표현하고, 그걸 파싱해서 각종 RPC 함수들의 골격을 만들어내면 인생이 좀 수월해지지 않을까 하는 생각도 든다. 물론 프로토콜이 바뀔 때에 기존 코드가 날아가지 않도록 코드 제너레이터를 잘 짜야겠지.</p>
<p>글 시작과 끝의 주제가 다른 걸로 봐서, 아무래도 요즘 스트레스를 많이 받나 보다. ㅋㅋ</p></div>
	
	<p>
	
		<a href="/tag/xml/"><span class="label">xml</span></a>
	
		<a href="/tag/protocol/"><span class="label">protocol</span></a>
	
		<a href="/tag/schema/"><span class="label">schema</span></a>
	
	</p>
	
</article>
			
				<article>
	<div class="page-header">
		<h1><a href="/2008/12/21/memory-wall/">Memory Wall</a> <small>2008-12-21</small></h1>
	</div>
	<div><p><img alt="http://lh6.ggpht.com/_nOquiran9-s/Rur1hp0B7kI/AAAAAAAAALI/rjrpIObJtMo/IMG_1987.JPG" src="http://lh6.ggpht.com/_nOquiran9-s/Rur1hp0B7kI/AAAAAAAAALI/rjrpIObJtMo/IMG_1987.JPG" /></p>
<p>9.11 Memory Wall</p>
<p>구글에서 memory wall 을 검색하면 위와 같은 사진들이 나온다. 아마도 기억과 회상을 위한 그림이나 사진, 메모들을 붙이는 벽을  memory wall 또는 remembrance wall 이라고 부르는 모양이다.</p>
<p>훗날 128 코어의 시대가 도래하면 얼랭 게임 서버가 혹시 대세가 되지는 않을까 했는데, 벌써부터 <a href="http://minjang.egloos.com/2166350">멀티 코어에도 메모리 장벽이라는 한계가 있다는 이야기</a>가 솔솔 들린다. 이로 인해 <a href="http://devnote.net/86">8-16코어를 넘어서기가 힘들다고 해서 널티코어 효과(Nulticore Effect)</a>라고 부른다니.. <a href="http://xeraph.egloos.com/4781141">xeraph님이 GG하신 게</a> 정답이지도? :)</p>
<p>보통 물리적/논리적으로 서버 프로세스가 늘어날수록 디버깅이 어려워지고, 관리 비용도 증가한다고 한다. 그래서 요즘은 분산을 고려해서 모듈끼리도 메시지 통신을 하도록 한 후, 개별 모듈들을 최대한으로 단순하게 구현하려고 노력중이다. 대신 메시지를 만드는게 여간 귀찮은 일이 아니라서, 언제 시간이 나면 후딱 XML 메시지 같은 걸 만들어볼까 싶기도 한데... 그럴 여유도 없을 뿐더러, 만들어도 같이 감동해줄 전우가 없다는 게 안타깝다. 크흑.</p>
<pre><code>
 

</code></pre></div>
	
	<p>
	
		<a href="/tag/multicore/"><span class="label">multicore</span></a>
	
		<a href="/tag/erlang/"><span class="label">erlang</span></a>
	
	</p>
	
</article>
			
				<article>
	<div class="page-header">
		<h1><a href="/2008/12/08/smart-people/">Smart People</a> <small>2008-12-08</small></h1>
	</div>
	<div><p><img alt="http://pds9.egloos.com/logo/200804/01/93/f0025793.jpg" src="http://pds9.egloos.com/logo/200804/01/93/f0025793.jpg" /></p>
<pre><code>- [열심히 하는 사람 보다는, 잘하는 사람이 되어라.(Don't Work Hard, Work Well)](http://agile.egloos.com/2897508)
- 전문 직장인이 되기 보단, 전문 직업인이 되어라.
</code></pre>
<p>예전에 모시던 분들이 즐겨 하시던 말들이다. 과거의 무능하고 나태했던 내 모습을 곳곳에서 찾아낼 때마다, 혹시나 나도 곧 그렇게 무뎌질까 두렵다.</p>
<p>칼날을 더욱 날카롭게 세우기 위해서, 이번 달부터 새벽 영어 회화를 다시 시작했다. 영어 강사에게 리만 브라더스가 왜 나쁜지를, 왜 미국산 소고기가 나쁜지를 설명하기가 여간 힘들지 않았다. 역시나 함께 듣는 이십대 중반의 젊은 친구들은 정치에 관심이 없었다는 것도 확인했다. 덕분에 의도하지 않게 근무 시간이 한 시간 넘게 늘어나 버렸는데, 나보다 항상 더 일찍 나와서 일하는 사람도 있어서 깜짝 놀랬다. 역시 출근 순서가 회사의 실질적 직급 순라는 이야기가 맞는 걸까 하핫 :)</p>
<p>그리고, 스마트한 회사 친구들과 얼랭 대결(?) 프로젝트도 바야흐로 가동되었다. 주사위를 굴려 2:2 로 짝을 지어 모종의 코딩 대결을 펼치려고 하는 중인데, 역시나 한 마디만으로 열길 사람 속도 알아듣는 친구들이라서 기대가 된다. 반짝이는 후학들의 걸림돌이 되지 않기 위해서라도, 집에서 열심히 예습복습을 해야것다. 클클.</p></div>
	
	<p>
	
		<a href="/tag/erlang/"><span class="label">erlang</span></a>
	
	</p>
	
</article>
			
				<article>
	<div class="page-header">
		<h1><a href="/2008/11/16/prepare-the-battle/">Prepare the battle</a> <small>2008-11-16</small></h1>
	</div>
	<div><p><a href="http://minjang.egloos.com/2137737"><img alt="http://www.tesionline.com/intl/img/focus/asian-crisis.jpg" src="http://www.tesionline.com/intl/img/focus/asian-crisis.jpg" /></a></p>
<p><a href="http://minjang.egloos.com/2137737">DHL도 미국에서 철수하고, SUN, 구글, HP, 이베이, 아마존 같은 유수 기업들이 감원을 하고 있고,</a> 실리콘밸리에는 <a href="http://mushman.co.kr/2690827">총격 사고</a>까지 나고 있는데, 펀더멘탈이 그렇게나 튼튼하다는 바이 코리아의 게임 회사들은 어떨게 될까? 최대한 네가티브하게 예측해서 그게 운좋게 맞아 떨어지면 나중에 1g 정도 우쭐하려나 싶어, 최악의 경우만을 가정해 보겠다.</p>
<p>조만간 닥쳐온다는 10년짜리 세계적 불황에 대해 조금이라도 고려하고 있는 회사라면, 슬슬 군살을 빼기 시작할 것이다. 가장 간단한 전기 절약 운동에서부터 연봉 동결, 유휴 인력 정리 해고, 싹수 없는 프로젝트의 조기 캔슬에 이르기까지 다양한 방식의 근검절약을 시행할 것이다. 최근의 중대형 회사들은 개발자들을 싹쓸이한 후, 동시에 5-10개의 프로젝트를 돌리는 것이 대세인데, 게임이란 것이 50% 의 성공률 완성율도 보장할 수 없는게 현실이다. 즉 인건비만 년간 50-100억 정도 까먹는다는 걸 감안해보면, 어떤 CEO도 이런 유혹을 이겨낼 수 없을 게다. 만약 이게 현실이 된다면 조만간 인력 시장에 고급 인력들이 가득하게 되고, 그러면 <a href="http://reiot.cafe24.com/2008/10/19/pareto-principle/">회사에서 어울렁 더울렁 웹서핑하면서 버티던 베짱이들</a>의 목은 더욱 위태로워질 것이다. :P</p>
<p>또, 부분 유료화라는 비지니스 모델이 기나긴 불황의 터널 속에서는 오히려 악재가 될 수도 있다. 내수 침체로 청소년들의 지갑이 얇아지면 그냥 무료 상태로만 게임을 즐길 가능성도 배제할 수 없으니까 말이다. 혹자는 IMF 시절을 예로 들면서, 경기가 침체될 수록 사람들이 값싼 놀이 수단을 찾기 때문에 게임 쪽은 괜찮을 거라고 하고, 나도 그렇게 믿고 싶지만.. 마찬가지로 이유로 해외 수출에 의존하는 모델도 힘들어질 수 있다. 이미 불황을 겪고 있는 일본이나, 중국 같은 이머징 마켓을 제외하면, 다들 배고픈데 비싼 돈을 주고 우리 나라 게임을 수입해와서 서비스 할 이유도 없지 않을까. 단 쥐새끼가 계속 삽질을 해대면 계속 원화 가치가 떨어져서 그때쯤이면 비싼 돈이 아닐 수도 있으니, 어째 고마워해야 할지도 모르겠다.</p>
<p><img alt="http://img148.imageshack.us/img148/9008/bf2142billboard2ha4.jpg" src="http://img148.imageshack.us/img148/9008/bf2142billboard2ha4.jpg" /></p>
<p>또 불황이 길어지면 사람들이 더이상 컴퓨터를 업그레이드하지 않을 수도 있다. 즉 차세대 콘솔 수준의 높은 퀄리티의 그래픽 때문에 개발비를 투입하는 것보다는, 아이폰 게임이나 닌텐도의 Wii처럼 게임성에 올인하는 게 더 현명한 전략일 수도 있겠다. 이런 걸 감안해보면 저사양에서도 잘 돌아가면서, 전세계 글로벌하게 광고를 수주해서 게임 내에서 보여주는 방식으로 (게이머들에게 금전적인 부담없이) 수익을 벌어들이는 모델이 가장 좋지 않을까 싶기도 하다. 광고 한번 보면 한 시간 플레이가 가능해요! 아이템도 하나 드려요! 뭐 이런 방식이 될까나..</p>
<p>그렇다면 대한민국만큼 공돌이들이 하류 인생인 나라도 드물테니, 해외로 나가서 새로운 미래를 개척해보면 어떨까?  아마 그때 쯤이면 환급받을 국민 연금도 똥값이 되고, 그나마 현금 보유한 걸 달러로 환전하면 50% 로 줄어들어 버릴 것 같다. 그나마 내수가 튼튼한 나라로 이민가서 후딱 적응하는 게 나을 수도 있겠지만, 이 불황이란 게 전지구적인 규모라서 그 나라의 게임 회사들이라고 영향을 받지 않으리란 보장이 없으니... 지금 후딱 나가서 신입으로 입사해도 시원찮을 판이다. (<a href="http://criburn.net/blog/jongs/entry/%EB%B8%94%EB%A6%AC%EC%9E%90%EB%93%9C-%EA%B0%9C%EB%B0%9C%EC%9E%90-Jeff-Kang%EA%B0%95%ED%98%95%EC%9B%90%EC%94%A8%EA%B0%80-%EB%A7%90%ED%95%98%EB%8A%94-%EA%B0%9C%EB%B0%9C-%ED%8F%AC%EC%9D%B8%ED%8A%B8%EC%99%80-%EB%82%B4-%EC%83%9D%EA%B0%81">블리자드는 56살짜리 신입 디자이너도 뽑는다</a>니, 두려워하지 말지어다)</p>
<p>이래서, 회사를 옮기려고 하는 지인들에게 무조건 100억 이상의 매출을 가진 회사로 옮기라고 권했는데, 어째 다들 힘든 모양이다. 올해를 넘기면 새 회사에서 실력을 발휘해 보기도 전에 밀려날 지도 모르니 어서 빨리 취업하시기 바라며, 결국 중요한 건 자신의 내공을 재테크 하고, 회사에서 열심히 일해서 낙오 그룹에 끼이지 않는 방법 밖에 없다. 그래도 안되면 핀란드 가서 임업을 하든, 뉴질랜드에서 목축업을 해야 될지도... ㅠ_ㅠ</p></div>
	
	<p>
	
		<a href="/tag/ingamead/"><span class="label">ingamead</span></a>
	
	</p>
	
</article>
			
				<article>
	<div class="page-header">
		<h1><a href="/2008/11/15/three-rules-for-database-work/">Three Rules for Database Work</a> <small>2008-11-15</small></h1>
	</div>
	<div><p><a href="http://www.openmaru.com/273"><img alt="http://www.openmaru.com/attach/1/1046597520.jpg" src="http://www.openmaru.com/attach/1/1046597520.jpg" /></a><br />
<em><a href="http://www.openmaru.com/273">하루에 10만을 채우는 게임</a>은 이런 게 이벤트가 되는구나.</em></p>
<p>오늘자 코드 프로젝트에 올라온 <a href="http://www.codeproject.com/KB/architecture/DBTool.aspx">DBTool</a>의 근간이 된, <a href="http://odetocode.com/Blogs/scott/archive/2008/01/30/11702.aspx">데이터베이스를 갖고 놀 때의 세가지 룰</a>은 생각보다 간단했다.</p>
<h3>Never use a shared database server for development work.</h3>
<p>예전에는 (rails 스타일의) development-test-production 의 3단계 구분법을 사용했다. DBA와 서버 프로그래머는 dev DB에서 열심히 뒤집어 엎어도, test DB에 연결된 다른 프로그래머들이나 테스터들은 안정적으로 사용할 수 있고, 실제 서비스는 production 데이터베이스를 쓰게 된다는 거다.</p>
<h3>Always Have a Single, Authoritative Source For Your Schema</h3>
<p>DB 에 짧지만 단순한 나의 지론은, 레파지토리 어딘가에 무조건 전체 스키마+초기데이터를 담은 SQL 파일을 두고 버전 관리를 해야 한다는 거다. 소스 코드, 애셋들은 과거의 특정 시점의 스냅샷을 꺼내올 수 있는데, 유독 데이터베이스가 열외일 수는 없다고 본다.</p>
<p>또한 어차피 데이터베이스 패치를 해야 할 테니, create, alter로 가득찬 DB 패치 스크립트도 버전 관리해야 한다. test -&gt; production 를 업그레이드할 때 모두 지우고 새로 만드는 만행을 할 수 없을테니, 아예 dev -&gt; test 에서부터 미리 스크립트를 만들어서 테스트하면 정신 건강에 좋지 않겠냔 말이다. 처음에 언급한 DBTool 이 이런 걸 자동화해주는 모양이다.</p>
<h3>Always Version Your Database</h3>
<p>보통은 Config 테이블에다가 문자열로 데이터베이스 스키마 최종 변경일을 넣어두는 걸로 해결하고 있다. 그런데 아직 뭔가 변경이 잘 되었는지를 체크할 만한 테스트를 만들 능력은 안된다. 대체로 alter 든 drop 이든 서버가 뜰 때까지는 잘 모를것 같아서.. :)</p>
<p>이 외에도 무시무시하게 긴 <a href="http://www.ssw.com.au/ssw/Standards/Rules/RulesToBetterSQLServerDatabases.aspx">Better SQL Server Databases</a> 라는 규칙도 있는데 이건 좀 귀찮구나....</p>
<p>추가:</p>
<pre><code>- 다른 글을 찾아 보니, 프로시저나 테이블 각각을 서로 다른 파일에 저장해서 관리하라는 말도 있다. 은근히 그럴듯한데?
</code></pre></div>
	
	<p>
	
		<a href="/tag/database/"><span class="label">database</span></a>
	
	</p>
	
</article>
			
			<ul class="pager">
			
			  	<li class="previous">
			    	<a href="/page/12/">&larr; Older</a>
			  	</li>
		  	
		  	
				<li class="next">
					<a href="/page/12">Newer &rarr;</a>
				</li>
		  	
			</ul>
		</div>
		<div class="span3">
			<ul class="nav nav-list well">
	<li class="nav-header">
		Recent Posts
	</li>
	
	<li>
		<a href="/2008/12/27/networking-metaphore/">Networking Metaphor</a>
	</li>
	
	<li>
		<a href="/2008/12/21/memory-wall/">Memory Wall</a>
	</li>
	
	<li>
		<a href="/2008/12/08/smart-people/">Smart People</a>
	</li>
	
	<li>
		<a href="/2008/11/16/prepare-the-battle/">Prepare the battle</a>
	</li>
	
	<li>
		<a href="/2008/11/15/three-rules-for-database-work/">Three Rules for Database Work</a>
	</li>
	
</ul>
		</div>
	</div>

</div> <!-- /container -->


    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
	
    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
	

  </body>
</html>