
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Social Reiot</title>
  <meta name="author" content="Ray Yun">

  
  <meta name="description" content="2004년 자바서비스넷의 어느 청년의 고민담에 달린 수많은 리플들. IT 개발자라면 한번쯤 읽어봤으면 한다. 내 안에도 찌질이가 살고 있지만, 저렇게 살고 싶지는 않다. 그리고 중간에 일본사는넘이라는 분의 이야기는 꼭 읽어보기를.그러고보니 내가 스물 다섯일 때는 ...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://reiot.com/page/39/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Social Reiot" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header role="banner"><hgroup>
  <h1><a href="/">Social Reiot</a></h1>
  
    <h2>Social Game Developer wandering in strange dungeon.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:reiot.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/10/20/%E1%84%8C%E1%85%A9%E1%84%80%E1%85%B3%E1%86%B7%E1%84%8B%E1%85%B3%E1%86%AB-%E1%84%8B%E1%85%A9%E1%84%85%E1%85%A2%E1%84%83%E1%85%AC%E1%86%AB-%E1%84%8C%E1%85%A2%E1%84%86%E1%85%B5%E1%84%8B%E1%85%B5%E1%86%BB%E1%84%82%E1%85%B3%E1%86%AB-it-%E1%84%80%E1%85%A2%E1%84%87%E1%85%A1%E1%86%AF%E1%84%8C%E1%85%A1%E1%84%83%E1%85%B3%E1%86%AF%E1%84%8B%E1%85%B4-%E1%84%90%E1%85%A9%E1%84%85%E1%85%A9%E1%86%AB/">조금은 오래된, 재미있는 IT 개발자들의 토론</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-10-20T22:39:08+09:00" pubdate  data-updated="true" >Oct 20<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.javaservice.net/~java/bbs/read.cgi?m=resource&amp;b=chat2&amp;c=r_p&amp;n=1097846224&amp;p=6&amp;s=t#1097846224">2004년 자바서비스넷의 어느 청년의 고민담</a>에 달린 수많은 리플들. IT 개발자라면 한번쯤 읽어봤으면 한다. 내 안에도 찌질이가 살고 있지만, 저렇게 살고 싶지는 않다. 그리고 중간에 일본사는넘이라는 분의 이야기는 꼭 읽어보기를.</p>

<p>그러고보니 내가 스물 다섯일 때는 얼른 10억 벌고 서른살에 은퇴해서 캐나다에서 송어 낚시를 하는게 꿈이었는데&#8230; 벌써 서른 둘이 되어 버렸다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/10/19/steam-war-%E1%84%92%E1%85%A1%E1%86%B7%E1%84%83%E1%85%A2%E1%84%8C%E1%85%A5%E1%86%AB-mmofps/">Steam War : 함대전 MMOFPS</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-10-19T09:48:08+09:00" pubdate  data-updated="true" >Oct 19<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.lazeska.com/" class="imagelink" title="라제스카"><img class='' src='http://boxcatstudio.files.wordpress.com/2009/07/lz.jpg' width='' height='' alt='라제스카' title='라제스카'></a>
<a href="http://www.lazeska.com/">이 그림 한장 </a>덕분에 잊혀졌던 함대전 MMOFPS의 추억이 되살아났다. (역시나 수백번 글로 써봐도 그림 한장이 주는 감동은 따라갈 수 없다) 어쨌든, 한동안 비공개로 해놓고 혼자 끄적여 봤는데, 아무래도 몇 년 동안은 MMO 개발을 할 수 없을 것 같아서 이참에 공개해본다. 재미로 쓴 글이므로 현실감이 없더라도 웃으면 곤란. 핫핫.<a href="http://boxcatstudio.files.wordpress.com/2009/07/203.jpg">
</a></p>

<pre><code>- 드넓은 하늘에서 수백, 수천대의 비행선, 비공정들이 펼치는 치열한 대규모 공중전. (그렇다. 레이옷은 XBOX의 크림슨 스카이에서 많은 감명을 받았다. 물론 코난이나 나우시카, 라퓨타, 붉은돼지 같은 지브리표 비공정도 무척 좋아한다. 무엇보다도 멋진 것은 은하영웅전설의 멋진 전술과 전략들을 리얼타임으로 구현해 내는 것.)
- 때는 1940년대, 증기기관이 전세계적 주동력이 되어버린 팩션(가상역사)의 세계. 신기술을 기반으로 나치 동맹군은 세계대전을 일으킨다. 플레이어는 연합군과 동맹군, 중립국연합 중의 하나의 세력을 선택해서 전쟁을 치른다.
- 다른 플레이어들 또는 AI 편대를 이끌고 나치(혹은 연합군)를 무찔러라. 수 십 대의 모선에서 출발한 수 백 대의 프로펠러기가 날아다니며, 수 백개의 미사일, 수 천발의 총알 속에서 살아남아라. 거대한 비공정을 건조하고, 수 십대의 동료 모선들과 함께 전략을 구상하고 전술을 실행하라. 히틀러, 괴벨, 롬멜, 처칠 같은 영웅 NPC가 지휘하는 초거대비공정을 수백명의 동지들과 함께 공략하라. (레이드?)
- 레벨이 올라가면 다수의 편대를 이끌거나, 보다 거대하고 화력이 강한 비행선을 조종할 수 있다. 대형 비공정은 여러 플레이어가 역할을 분담해서 움직여야 한다.
- 모든 비행기들은 증기 기관 또는 열기구를 주 동력원으로 사용하며, 이동을 위해서는 프로펠러를 사용한다. 오직 작은 미사일만이 화약추진체를 사용할 수 있다.  기본적인 무기는 느린 대포와 빠른 기관총, 그리고 아주 초기적인 유도 성능을 가진 미사일 만을 사용할 수 있다. 초기적인 레이다를 사용할 수 있다.  상대를 무찌르면 무기, 부품 등의 아이템이 떨어진다. 현상금을 받아 돈을 벌어 비행기를 업그레이드하거나 새로 산다. 부품이나 완제품을 경매장에 사고 팔 수 있다.
- 세계 지도를 띄우면 언제 어디에서 전투가 일어나는지를 확인할 수 있다. 여기에서 AI 대전 또는 플레이어 대전을 선택하고 전투에 임한다. 각 전투 지역에는 몇 명이 참가해서 몇 분동안 싸우고 있는지 확인할 수 있다. 100 명 이상이 참가할 수 있는 대규모 전투는, 일정 시간마다 리스폰된다. 세계 지도에는 초대형 모선의 위치가 그려진다. 대체로 전투는 이 주위에서 이루어진다.
- 전투 지역을 선택하면 AI가 움직이는 대형 모선에서 전투가 시작된다. (대체로 전투는 비슷한 규모로 시작된다. 만약 규모가 다르면 AI에 의해서 조정된다.) 이 대형 모선은 맵의 정반대편에서 대기하고 있으며, 방어력과 공격력이 좋아서 혼자 힘으로는 파괴하기가 어렵다. 불리할 경우 모선 안으로 대피해서 후퇴할 수 있다.
</code></pre>

<p>누가 빨리 만들어주세요. 매달 이만오천원 이하면 결제해 드립니다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/20/otl-tips/">OTL Tips</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-09-20T16:52:38+09:00" pubdate  data-updated="true" >Sep 20<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong><em>[공지사항] 이 글은 더이상 업데이트되지 않으며, 최신 버전은<a href="http://reiot.springnote.com/pages/87217"> http://reiot.springnote.com/pages/87217</a>에서 읽으실 수 있습니다. </em></strong></p>

<p><a href="http://otl.sourceforge.net/">OTL</a>은 ODBC를 잘 래핑한 오픈소스 DB 쿼리 라이브러리이다. 헤더 파일 하나만 있으면, 굳이 ODBC 래퍼 클래스를 만들지 않아도 충분히 안심하고 쓸 수 있으며, MYSQL, MSSQL, ORACLE 모두에 사용될 수 있다. 꽤 여러 곳에서 사용되고 있고, 평판도 좋다고 알려져 있어서 써봤는데, 대략 반년동안 사용해본 경험으로는, 차라리 OLE DB 를 쓰거나, ODBC 래핑 라이브러리를 어딘가에서 갖다 쓰는 게 더 개발기간을 단축시킬 수 있다고 판단된다. OTL 만의 미묘한 버그스러움이 너무 많기에&#8230; &#8221;&#8217;비추천&#8221;&#8217;이었다. 그러나 최근에 legacy code를 손보면서 raw ODBC 코드를 만지다가 결국 포기하고 다시 OTL을 도입한 적도 있어서, 뭐라고 표현하기는 난감하지만 하나 확실한 건, ODBC를 직접 만지는 것보다는 백만배 정도 나으므로, 한번 써보기를 권한다.</p>

<h3>data binding</h3>

<p>OTL type 과 ODBC type 과의 대응표를 잘못 기억했다가는 마감 시간에 낭패를 보는 경우가 있다. 특히 헷갈리는 타입들을 적어본다.</p>

<table>
<thead>
<th>ODBC</th>
<th>OTL</th>
<td>bit</td>
<td>int</td>
<td>tinyint</td>
<td>int</td>

<tr>
<td>smallint</td>
<td>short</td>
</tr>
<tr>
<td>datetime/smalldatetime</td>
<td>char[N] (only for explicit-binding select)</td>
</tr>
</thead></table>


<p>implicit_select 에서는 datetime -> string 바인딩은 지원되지 않으므로, convert() 등으로 변환해서 string 으로 받아야 한다. 그런데, explicit binding select 에서는 웬지 지원이 된다. 이유는&#8230;.모른다&#8230; <img class='' src='http://boxcatstudio.files.wordpress.com/2009/07/icon_sad.gif' width='' height='' alt='(' title='('></p>

<p>timestamp 타입을 받으려면 아무래도 otl_datetime 을 사용하는 편이 좋을 것 같다. 그리고, built-in type 으로 바인딩을 하는 것보다는, otl_value<T>를 쓰면 NULL 체크도 되니깐 추천.</p>

<h3>output parameter + implicit_select</h3>

<p>잘 되던 프로시저의 output 파라미터의 값이 이상해진다든지 꼬일 경우, 새로 추가된 로직에 select 가 들어가있는지를 확인할 것. (ODBC의 한계는 아닌 듯한데) OTL에서의 프로시저는 output 파라미터만을 가지든, implicit_select 만을 하든, 둘 중 하나만 해야 한다. 아래와 같이 둘 다 할 경우 바보가 된다.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">CREATE</span> <span class="k">procedure</span> <span class="n">test_proc</span>
</span><span class='line'><span class="o">@</span><span class="n">param</span> <span class="nb">int</span> <span class="k">output</span>
</span><span class='line'><span class="k">AS</span>
</span><span class='line'><span class="p">....</span>
</span><span class='line'><span class="k">SELECT</span> <span class="n">something</span> <span class="k">FROM</span> <span class="n">tbl</span>
</span><span class='line'><span class="n">IF</span> <span class="o">@@</span><span class="n">error</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span> <span class="k">OR</span> <span class="o">@@</span><span class="n">rowcount</span> <span class="o">&lt;&gt;</span> <span class="n">N</span>
</span><span class='line'><span class="p">....</span>
</span></code></pre></td></tr></table></div></figure>


<p>위와 같은 코드들은 assignment select 로 해결하면 된다.</p>

<h3>otl_implicit_select</h3>

<p>output parameter 가 아닌, 내부에서 select 를 하는 프로시저의 경우 이 옵션을 명시해줘야 한다. 주의할 점은, datetime 이나 smalldatetime 을 내부에서 select 하고, OTL 에서 스트링으로 받으면 incompatible datatype 예외가 던져진다. 이때에는 varchar(N)으로 cast/convert 하는 것을 권장한다.</p>

<h3>SET NOCOUNT ON/OFF</h3>

<p>OTL/ODBC 의 가장 극악한 버그(?) 중의 하나이다.</p>

<p>OTL 은 @@rowcount 와 다른 output parameter 또는 select 결과를 구분할 수 없다고 한다. 그래서, SET NOCOUNT 를 설정해야만 프로시저에서 값을 제대로 읽어올 수 있다. (이 문제 때문에 얼마나 많은 시간을 날려버렸던가!! 만약 OTL 에서 프로시저를 제대로 실행할 수 없다면 90% 는 이 문제라고 보면 된다.)</p>

<p>주의할 점은, 프로시저 내부에서 다른 프로시저를 호출할 때 하위 프로시저에서 SET NOCOUNT OFF 를 해 버리면 그 뒤의 결과값 역시 꼬여버리게 된다는 점이다. 따라서, &#8221;&#8217;OTL 에서 직접 호출하는 프로시저의 시작과 끝에만 SET NOCOUNT 를 설정하고, 다른 프로시저에서는 절대 사용하지 말 것을 권장한다.&#8221;&#8217;</p>

<h3>Multiple ResultSet</h3>

<p>OTL/ODBC 에서는 공식 지원하지 않는다. 실제로 해보면 첫번째 result set 은 잘 받지만 두번째 이후부터는 eof() 가 되어 버린다. 결국, 해킹을 하거나 포기하는 수 밖에 없는데&#8230; 그래도 강제 실행을 시도해보겠다면 대략 다음과 같이 해 보기를&#8230; (내부 구조가 복잡해서 결국 포기했지만&#8230;)</p>

<p>otl_stream stmt(1,
&#8220;{CALL get_multi_resultset(:p&lt;int,in>)}&#8221;,
conn,
otl_implicit_select);
stmt &lt;&lt;(int)1;
otl_cur &amp; s = (**stmt.ss).cursor_struct;
SQLRETURN result = SQLMoreResults( s.cda );</p>

<h3>Binding varchar</h3>

<p>문자열 바인딩시 NULL 을 위한 공간을 2바이트씩 예비해두어야 한다. 예를 들면, otl_statement 로 바인딩시 VARCHAR(10) 컬럼의 값을 읽거나 쓰려면 :XXX&lt;char[12]> 를 사용해야 한다는 뜻이다.</p>

<h3>Constant SQL Statements</h3>

<p>dynamic binding 이 필요없을 경우 otl_cursor::direct_exec() 를 사용해야 한다. &#8221;&#8217;반대로 말하면 otl_stream 에 static sql 을 사용하지 말라!&#8221;&#8217; rpc 를 알고 싶다면 otl_cursor::direct_exec() 의 리턴값을 사용하면 된다.</p>

<h3>otl_connect::auto_commit_on()</h3>

<p>otl_cursor::direct_exec() 를 이용해서 insert/delete 를 호출할 경우, 암시적인 트랜잭션이 발생해서 관련된 테이블이나 row 에 IX 를 걸게 된다. 따라서 다른 커넥션(otl_connect)에서 관련 테이블에 쿼리를 하게 되면 블로킹되는 불상사가 발생할 수 있다. 또는 아예 처음부터 커넥션 자체에 auto_commit_on()를 설정해서, 매 쿼리 실행마다 자동적으로 commit 를 하도록 하면 좋다.</p>

<p>otl_stmt::set_commit()도 비슷한 역할을 하는 게 아닐까 추측한다.  그런데, 이 옵션을 켰을 때 동일 커넥션에 대해서 여러번 쿼리를 하는 경우 이미 사용중이라는 에러 메시지가 나온다. 도대체&#8230;. ㅠㅠ</p>

<h3>ODBC Connection Pooling 기능 추가하기</h3>

<p>OTL을 ThreadPooling 과 함께 사용하기 위해서는 Connection Pooling 이 필수적이다. (그렇지 않으면 Thread Local Storage를 사용해야 하는데, 이는 권장하지 않는다고 빌게이츠가 말했다 ㅎㅎ)</p>

<p>테스트삼아, 단순한 SELECT COUNT(*) FROM XXX를 ThreadPooling 을 이용해서 로컬랜에 설치된 MSSQL 서버에 N번 쿼리를 큐잉하고 GetTickCount()로 시간을 체크해보았다. 이때, 풀링을 사용할 경우 평균 쿼리 시간이 5ms 정도 낮게 나왔으며 최소 쿼리 시간이 0 인 횟수가 꽤 많이 나왔다. 풀링을 하지 않을 경우에는 99% 의 확률로 10ms 이상의 시간이 소모되었다.</p>

<pre><code>- 주의사항 i. shared environment 생성 전, 즉 rlogin() 전에 풀링을 설정해야 한다!! i. env 즉 프로세스당 풀링 대신 시스템 전체에서 연결을 풀링하고 싶다면 SQL_CP_ONE_PER_DRIVER(?)를 사용하면 된다.
</code></pre>

<p>inline
bool SQL_OK ( SQLRETURN nResult )
{
return nResult == SQL_SUCCESS || nResult == SQL_SUCCESS_WITH_INFO;
}</p>

<p>void EnableConnectionPooling()
{
// enable connection pooling per environment
SQLRETURN ret = SQLSetEnvAttr(SQL_NULL_HANDLE,
SQL_ATTR_CONNECTION_POOLING,
(LPVOID)SQL_CP_ONE_PER_HENV,
0);
BOOST_REQUIRE( SQL_OK(ret) );
}</p>

<p>void DisableConnectionPooling()
{
SQLRETURN ret = SQLSetEnvAttr(SQL_NULL_HANDLE,
SQL_ATTR_CONNECTION_POOLING,
(LPVOID)SQL_CP_OFF,
0);
BOOST_REQUIRE( SQL_OK(ret) );
}</p>

<p>bool IsConnectionPooling()
{
DWORD value;
SQLRETURN ret = SQLGetEnvAttr(SQL_NULL_HANDLE,
SQL_ATTR_CONNECTION_POOLING,
&amp;value,
0,
NULL);
BOOST_REQUIRE( SQL_OK(ret) );</p>

<p>if ( value == SQL_CP_ONE_PER_HENV || value == SQL_CP_ONE_PER_DRIVER )
{
return true;
}
else if ( value == SQL_CP_OFF )
{
return false;
}
else
{
BOOST_ERROR( &#8220;error&#8221; );
}
return false;
}</p>

<h3>precreated handle 사용하기</h3>

<p>Connection Pooling 을 사용할 때, otl_connect::rlogin()을 쓰게 되면 매번마다 id/passwd 를 파싱하고 environment handle 을 생성하는 등 불필요한 부하가 있다. 따라서 미리 shared environment handle 을 하나 할당하고, hdbc handle 도 만들어서 객체를 생성하면 비교적 나을 것이다.</p>

<h3>스트림 풀링</h3>

<p>스트림의 풀이 otl_connect 객체 내부에 존재하므로, 이 객체를 항상적으로 유지해야만 풀링의 효과를 볼 수 있다.</p>

<h3>테스트 결과</h3>

<p>1000개의 단순쿼리(})를 ThreadPooling을 이용해서 처리, 그 시간을 살펴보았다. 첫번째를 제외하고는 모든 상황에서</p>

<pre><code>- NO_POOLING : 매 작업마다 재연결 시도
- POOLING : 단지 ODBC Connection Pooling 옵션만 설정하고 위와 같음
- ODBC_POOLING : 미리 env 1개를 생성하고 매 작업마다 hdbc handle 만 생성해서 쿼리하기
- OTL_POOLING : 아예 otl_connect 객체를 자체 풀링시킴
- OTL_POOLING_NO_STREAM_POOLING : 위와 같지만 ODBC 풀링과 스트림 풀링을 끈 상태
</code></pre>

<table>
<thead>
<th>Query Type</th>
<th>minTick</th>
<th>maxTick</th>
<th>avgTick</th>
<th>#threads</th>
<td>NO_POOLING</td>
<td>0</td>
<td>47</td>
<td>12</td>
<td>4</td>
<td>POOLING</td>
<td>0</td>
<td>47</td>
<td>10</td>
<td>4</td>

<tr>
<td>ODBC_POOLING</td>
<td>0</td>
<td>78</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>OTL_POOLING_NO_STREAM_POOLING</td>
<td>0</td>
<td>78</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>OTL_POOLING</td>
<td>0</td>
<td>32</td>
<td>0</td>
<td>2</td>
</tr>
</thead></table>


<p>결론적으로 otl_connect 객체를 자체적으로 풀링하는 방법이 가장 빨랐다. 그러나, 스트림 풀링을 끄면 2위인 ODBC_POOLING과 비슷한 걸로 봐서 스트림 풀링의 비용이 꽤 높다는 것을 알 수 있다. (쿼리 자체를 좀더 복잡하게 해서 테스트해야 나을 거 같다.)</p>

<p>see also:</p>

<pre><code>- http://snaiper80.cafe24.com/wiki/wiki.cgi?OTL
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/09/activex/">ActiveX</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-09-09T21:34:46+09:00" pubdate  data-updated="true" >Sep 9<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong><em>[공지사항] 이 페이지는 더이상 업데이트되지 않으며, 최신 버전은 <a href="http://reiot.springnote.com/pages/87215">http://reiot.springnote.com/pages/87215</a> 에서 읽으실 수 있습니다.</em></strong></p>

<p>어쩌다보니 ActiveX를 이용해서 브라우저에서 클라이언트를 실행하는 작업을 도와주게 되었다. 담당자나 나나 이 쪽으로는 거의 지식이 전무한 상태였는데, 삽질을 반복하면서 여러 가지 유용한 정보들을 알아내었다. 이미 귀국 날짜가 연기된 마당이므로 시간도 널널하고 해서 알아낸 점들을 정리해본다.</p>

<p>혹시라도 이 분야에 처음 발을 들였다면 <a href="http://www.codeproject.com/com/CompleteActiveX.asp">A Complete ActiveX Web Control Tutorial</a>를 꼭 읽어보기 바란다. 물론 <a href="http://en.wikipedia.org/wiki/ActiveX">위키피디아</a>의 설명도 괜찮다.</p>

<h2>설치 여부 알아내기</h2>

<p><a href="http://game.paran.com/">파란닷컴</a>처럼 active-x 컨트롤이 설치되지 않은 컴퓨터에 대해서 설치 안내 페이지로 redirect 시키려면, onerror 이벤트를 이용하면 된다.</p>

<p><a href="http://december.com/html/4/element/script.html">&lt;script</a> language=&#8221;javascript&#8221; for=&#8221;mycontrol&#8221; event=&#8221;onerror&#8221;>
location.href = &#8216;/redirect/to/how-to-install.html&#8217;;
</script></p>

<p><a href="http://december.com/html/4/element/object.html">&lt;OBJECT</a> ID=&#8217;mycontrol&#8217; CLASSID=&#8217;&#8230;.&#8217; codebase=&#8230;.>
<a href="http://december.com/html/4/element/span.html"><SPAN></a>Active-X control not installed. go to <a href="http://december.com/html/4/element/a.html">&lt;a</a> href=&#8221;/redirect/to/how-to-install.html&#8221;>HOW TO INSTALL Active-X</a> page</SPAN>
</OBJECT></p>

<p>이때 OBJECT 태그 사이의 코드들은 해당 객체가 로드되지 않을 경우 렌더링된다는 점을 잘 활용하면 좋을 것이다.</p>

<h2>삭제하기</h2>

<p>XP 의 경우 $WINDOWS/Downloaded Program Files/ 아래에서 삭제하면 된다. Windows 2003 의 경우는 어디인지 확인할 수 없었다.</p>

<h2>컨트롤 활성화</h2>

<p>올해부터 IE에서는 <a href="http://www.microsoft.com/korea/windows/ie/ie6/activex/activate/default.mspx">컨트롤이나 애플릿들이 기본적으로 비활성화 상태로 변경되</a>었다. 이를 수정하는 방법은 자바스크립트 코드를 이용해서 OBJECT 태그를 쓰면 된다. 보다 자세한 사항은 <a href="http://support.microsoft.com/kb/914257/ko">HOWTO</a> 문서를 참고할 것.</p>

<p><a href="http://december.com/html/4/element/script.html"><script></a>
document.write('<a href="http://december.com/html/4/element/object.html">&lt;object</a> classid="CLSID:..." type="application/x-oleobject" codebase="..." width="320" height="240"> </object>');
</script></p>

<h2>ActiveX Control Pad</h2>

<p>마이크로소프트에서 제공하는 유틸리티인데 실제로 마소에서는 받아지질 않는다. 따라서 <a href="http://www.download.com/ActiveX-Control-Pad/3000-2406_4-861343.html?tag=pop">여기</a>서 받을 것.</p>

<h2>브라우저로 이벤트 전달하기</h2>

<p>만약 ActiveX 컨트롤에서 click 등의 마우스 이벤트 핸들러를 정의했다면 javascript 레벨에서 동일한 이벤트 핸들러를 정의할 수 없다. 이는 컨트롤이 이벤트를 먹어버리기 때문으로 보이는데, 이를 해결하려면 컨트롤에서 이벤트를 정의하고 브라우저로 보내준 다음 브라우저에서 핸들링을 하면 된다.</p>

<p>Public Event CloseBrowser()
Public Sub OnClick()
&#8217; handle click event
RaiseEvent CloseBrowser() &#8217; fire event
End</p>

<p><a href="http://december.com/html/4/element/script.html">&lt;script</a> language=&#8221;javascript&#8221; for=&#8221;mycontrol&#8221; event=&#8221;closebrowser&#8221;>
self.close();
</script></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/09/log4cxx/">Log4cxx</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-09-09T15:03:17+09:00" pubdate  data-updated="true" >Sep 9<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class='' src='http://logging.apache.org/images/ls-logo.jpg' width='' height='' alt='' title=''></p>

<p>서버 프로그래머라면 빠르고 간편한 로그와 트레이스에 대해서 한번쯤은 고민해봤을 것이다. 파일 로그 또는 윈도우의 이벤트 로그를 보통 쓰고 있겠지만, 생각보다 편하지 않은게 사실이다. 그런 의미에서 이번 기회에 <a href="http://logging.apache.org/log4cxx/index.html">Log4j을 C++로 포팅한 Log4cxx</a>의 특징에 대해서 알아보는 시간을 가져봤다.</p>

<p>다음 내용은 <a href="http://logging.apache.org/log4cxx/manual/Introduction.html">Log4cxx의 개요 문서</a>를 축약한 것이므로, 가능하면 본문을 읽어보기를 권장한다.</p>

<pre><code>- 이름 기반으로 계층화(hierarchical)된 로그 지원 : 종류별 로그 객체를 만들어둘 필요가 없이, 필요할 때마다 이름을 키값으로 로그 객체에 접근하면 된다. 가령 system.net 은 system.net.packet 의 상위 계층이 된다.
- 상속 지원 : 하위 계층에 속한 로그들은 상위 계층의 로그에게 종속된다. 윈도우의 이벤트 로그과 비슷하게 로그 레벨(DEBUG-INFO-WARN-ERROR-FATAL)을 지원하며, 이 역시 상속 기반으로 동작한다.
- 복수의 Appender 지원 : 하나의 로그 객체에 콘솔, 파일, 이벤트로그, 소켓 등 여러 가지 종류의 출력 스트림(Appender)을 2개 이상 붙일 수 있다. 당연히 비동기적으로 동작한다.
- XML 기반의 외부 환경 설정 파일 지원 : 각 로그 객체의 on/off 부터 레이아웃(==포맷팅)까지 모두 외부 환경 파일에서 설정 가능하다.
- 고성능 : 굳이 #ifdef … #endif 로 지우지 않고 그냥 off 만 해둬도 함수 호출 하나 + 정수 연산 정도의 부하만 준다.
</code></pre>

<p>잘 찾아보면 <a href="http://www.codeproject.com/csharp/TraceTool.asp?df=100&amp;forumid=28124&amp;exp=0&amp;select=1261034&amp;fr=26">log4j/log4net 등의 출력을 GUI로 이쁘게 보여주는 유틸리티</a>도 없지 않으므로, 굳이 까만 콘솔 화면을 뚫어지게 쳐다보기 보다는 저런 툴을 활용해보는 건 어떨까 싶다. 물론 라이브 로그도 지원해줘야 하고, 손쉬운 필터링과 검색 기능이 들어가야 하겠지만…</p>

<p>가장 좋은 건, 데몬을 띄워두면 패널에 아이콘화되어 있다가, 에러가 발생하면 깜빡거리며 툴팁이 뜨고, 이를 클릭하면 어플리케이션 이름-시간-내용 메시지를 보여주는 모니터링 어플리케이션을 만들어 두는 것이다. 마찬가지로 필터링 기능이 들어가야 하겠지만.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/08/%E1%84%85%E1%85%A1%E1%84%89%E1%85%B3%E1%84%87%E1%85%A6%E1%84%80%E1%85%A1%E1%84%89%E1%85%B3-%E1%84%80%E1%85%B3%E1%84%85%E1%85%A2%E1%86%AB%E1%84%83%E1%85%B3%E1%84%8F%E1%85%A2%E1%84%82%E1%85%A7%E1%86%AB-%E1%84%89%E1%85%A1%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%8C%E1%85%A5%E1%86%AB/">라스베가스 &amp; 그랜드캐년 사진전</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-09-08T00:23:00+09:00" pubdate  data-updated="true" >Sep 8<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/236625957"><img class='' src='http://static.flickr.com/89/236625957_2d160f7cba_s.jpg' width='' height='' alt='' title=''></a> <a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/236621761"><img class='' src='http://static.flickr.com/82/236621761_b241158e4d_s.jpg' width='' height='' alt='' title=''></a> <a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/236616922"><img class='' src='http://static.flickr.com/97/236616922_616cba2587_s.jpg' width='' height='' alt='' title=''></a> <a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/236614900"><img class='' src='http://static.flickr.com/88/236614900_938f823497_s.jpg' width='' height='' alt='' title=''></a> <a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/236612458"><img class='' src='http://static.flickr.com/89/236612458_b410c994f0_s.jpg' width='' height='' alt='' title=''></a> <a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/236610619"><img class='' src='http://static.flickr.com/84/236610619_5ffc59b02c_s.jpg' width='' height='' alt='' title=''></a> <a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/235675320"><img class='' src='http://static.flickr.com/80/235675320_614fb8ff75_s.jpg' width='' height='' alt='' title=''></a> <a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/235660261"><img class='' src='http://static.flickr.com/81/235660261_0940dec4f4_s.jpg' width='' height='' alt='' title=''></a> <a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/235660260"><img class='' src='http://static.flickr.com/88/235660260_b7d4c9a0b6_s.jpg' width='' height='' alt='' title=''></a></p>

<p>레이옷의 <a href="http://flickr.com/photos/78725883@N00/sets/72157594258890065/detail/">Flicker</a>에 가시면 좀더 최신의 사진들을 보실 수 있습니다. 자자. 저희 회사로 오십시요. 해외 출장 겸 영어 연수 겸 관광의 기회가 주어집니다. 매번 겨울-봄 워크샵은 스키장에서 보내고, 이번 가을 워크샵은 일본으로 갈 예정이라니까요~~</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/06/%E1%84%86%E1%85%B5%E1%84%80%E1%85%AE%E1%86%A8%E1%84%8B%E1%85%B5%E1%84%85%E1%85%A1%E1%84%82%E1%85%B3%E1%86%AB-%E1%84%82%E1%85%A1%E1%84%85%E1%85%A1%E1%84%82%E1%85%B3%E1%86%AB/">미국이라는 나라는&#8230;</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-09-06T22:20:08+09:00" pubdate  data-updated="true" >Sep 6<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class='' src='http://ec1.images-amazon.com/images/P/B000FEHG76.01._SS500_SCLZZZZZZZ_V53894984_.jpg' width='' height='' alt='BlackBerry' title='BlackBerry'></p>

<ul>
<li><p>우리 보스는 <a href="http://www.dt.co.kr/contents.htm?article_no=2006030302013231728002">대규모 정전에도 무선 인터넷을 통해서 업무 메일을 받아 볼 수 있다</a>는 블랙 베리폰을 사용한다. 며칠 전 점심때 회사에서 약 20분 정도 떨어진 말레이시아 레스토랑에서 점심을 먹고, 돌아오는 길에 이 폰으로 현재 LA 의 각 도로 사정을 검색하고 어느 도로를 타고 돌아갈 것인지를 검색했다. 그러면서 한달에 겨우 10달러로 무선인터넷을 무제한으로 사용할 수 있다고 자랑하면서, 구글에 접속해서 검색도 하고, 현재 서비스중인 게임의 각 서버 별 MRTG 트래픽 그래프도 확인하는 걸 보여주기도 했다. 저녁 때에도 함께 식사를 마치고 돌아오는 길에는 부하 직원으로부터 메일이 온 것도 보여줬다. (이쯤 되면 짐작하겠지만, 우리 보스 역시 지름신의 가호를 받은 사람 중의 하나다. 오죽했으면 BMW 745의 다음 차로 무엇을 골라야 할지 걱정이라고까지 말할 정도겠는가..)</p></li>
<li><p>본사의 마케팅 담당인 션(27세)은 최근 <a href="http://www.sonee.com/blog/?no=265">소니군이 무척이나 갖고 싶어하는 350Z</a>를 겨우 이만오천달러에 구입했다. 우리가 본사로 첫 출근하는 날, 그는 자신의 바탕 화면에 당당하게 새 차의 사진을 붙여 놓고, 우리 실장에게 자랑을 해대었다. 그리고는 며칠 후 생일 휴가를 받아서 한동안 얼굴도 보이지 않았다. -_-;;</p></li>
<li><p>본사가 들어선 건물의 화장실은 항상 굳게 잠겨 있다. 잠을 설쳐 컨디션이 좋지 않은 날, 에어컨 바람을 계속 쐬다 보면 배가 아파지는 허약한 장을 소유한 레이옷에게는 참 죽을 맛이다. 물어보니 자꾸 화장실을 이상한 용도(-_-)로 사용하는 사람들이 있어서 그렇다나?</p></li>
<li><p>본사도 그렇고 호텔도 그렇고 이 근처(다이아몬드 바)에는 아시아계 사람들이 꽤나 많다. 그래서, 일부를 제외하면 대체로 본토 발음이 아니라서 그럭 저럭 잘(?) 들리기는 한데, 뭔가 샤방샤방한 언니들 대신 거대하신 분들만 계셔서 좀 아쉽긴 하다. (참고로 밥먹으러 가거나 쇼핑을 가도 한국어가 통한다. -_-+)</p></li>
<li><p>미국의 고속 도로도 때로는 막히곤 한다. 이번 주 월요일은 노동절이어서 다들 놀았는데, 덕분에 라스베가스에서 LA까지 오는데 8시간이나 걸렸다. 운전하느라 무리하신 최실장에게 묵념. 잇힝.</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/04/%E1%84%8B%E1%85%A7%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%AB-%E1%84%85%E1%85%A1%E1%84%89%E1%85%B3%E1%84%87%E1%85%A6%E1%84%80%E1%85%A1%E1%84%89%E1%85%B3/">여기는 라스베가스</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-09-04T17:37:24+09:00" pubdate  data-updated="true" >Sep 4<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div style="float:right;margin-left:10px;margin-bottom:10px;">
 <a href="http://www.flickr.com/photos/78725883@N00/233227004/" title="photo sharing"><img class='' src='http://static.flickr.com/87/233227004_bf06a9f33c_m.jpg' width='' height='' alt='' title=''></a>
  
 
  [Hotel Venetian](http://www.flickr.com/photos/78725883@N00/233227004/)
  
  Originally uploaded by [Reiot](http://www.flickr.com/people/78725883@N00/).
 
</div>


<p>LA에서 수많은 초원과 사막, 황무지를 네시간 넘게 달려서 도착했다. 일단 요 사진은 맛배기. 더 보려면 1달러를 내시오~~</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/09/01/xp%E1%84%90%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%B4-%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%E1%84%89%E1%85%B5%E1%86%AF/">XP팀의 작업실</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-09-01T15:57:47+09:00" pubdate  data-updated="true" >Sep 1<span>st</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class='' src='http://www.scissor.com/resources/teamroom/main_room.jpg' width='' height='' alt='' title=''>
우리도 빨리 이런 <a href="http://blog.naver.com/yuzico/130007299724">XP팀의 작업실</a>을 꾸며야 할텐데&#8230; 미국처럼 땅도 넓은 동네에서는 이런 게 가능하겠지만, 우리 나라에서는 회사의 전폭적인 지지 없이는 불가능할 듯.</p>

<ul>
<li>원문 보기 : <a href="http://www.scissor.com/resources/teamroom/">An XP Team Room</a></li>
<li>번역본 보기 : <a href="http://blog.naver.com/yuzico/130007299724">XP팀의 작업실</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/08/30/%E1%84%8B%E1%85%A1%E1%84%86%E1%85%A6%E1%84%85%E1%85%B5%E1%84%8F%E1%85%A1%E1%86%AB-%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF/">아메리칸 스케일</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-08-30T07:21:20+09:00" pubdate  data-updated="true" >Aug 30<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a class="tt-flickr" href="http://www.flickr.com/photos/78725883@N00/228179028"><img class='' src='http://static.flickr.com/75/228179028_c06dbabfbf_s.jpg' width='' height='' alt='' title=''></a></p>

<p>LA에 도착하자 마자 느낀 점은 눈에 보이는 모든 것이 커다랗다는 점이다. 넓은 도로 폭, 큰 자동차, 큰 건물과 창고들 그리고 거대한 사람들(-_-). 이것이 바로 어메리칸 스타일인가? 하고 신기해하던 촌놈 레이옷은 점심으로 나온 몬스터 감자를 보고 또 한번 놀랬다. 비록 시차 적응 때문에 컨디션이 영 아니었지만 토핑만 겨우 먹을 수 있을 정도로 크기와 양이 대단했다.</p>

<p>오늘 하루는 영단어의 홍수 속에서 헤엄만 치다가 끝났다. 가만히 사람들이 말하는 것을 들어보면, 표준 영어와 비표준 영어의 차이가 확 느껴질 덩도로, 영어라는 언어의 스펙트럼이 넓다는 것이 새삼 느껴졌다. (물론 우리나라의 사투리도 장난 아니지만) 다행인 것은 몇몇 착한 친구들이 계속 이야기를 걸어 줘서 그럭저럭 대화를 이어갈 수 있었다는 사실. 단어의 조합으로 질문의 의도를 파악하고 적당히 대답해주는 걸 반복하다 보니, 조금은 자신감이 생기는 것 같았다. 역시 외국어를 배울 때 가장 중요한 것은 의사 소통 실패를 두려워하지 않는 자신감인 것 같다.</p>

<p>역시나, 여기도 사람이 사는 곳에 불과한 것 같다. (단지 크기만 클 뿐)</p>

<ul>
<li>심심하신 분은 <a href="http://www.flickr.com/photos/78725883@N00/sets/72157594254444505/show/">출장 첫째날 사진</a>도 보셔요.</li>
</ul>

</div>
  
  


    </article>
  
  <nav class="pagination">
    <div>
      
        <a class="prev" href="/page/40/">&larr; Older</a>
      
      <a href="/blog/archives">Blog Archives</a>
      
      <a class="next" href="/page/38/">Newer &rarr;</a>
      
    </div>
  </nav>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/09/21/wordpress-to-octopress/">Wordpress To Octopress</a>
      </li>
    
      <li class="post">
        <a href="/2011/07/09/jquery-proven-performance-tips-tricks/">jQuery Proven Performance Tips &amp; Tricks</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/18/jquery-mobile-tip/">jQuery Mobile Tip</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/18/clienpad-appspot-com/">clienpad.appspot.com</a>
      </li>
    
      <li class="post">
        <a href="/2011/04/15/ant-cookbook/">Ant Cookbook</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/reiot">@reiot</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'reiot',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("reiot", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/reiot" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @reiot</a>
  
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - Ray Yun -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
    (function () {
      var disqus_shortname = 'reiot';
      
        
        var disqus_script = 'count.js'
      

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


  

  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</body>
</html>
