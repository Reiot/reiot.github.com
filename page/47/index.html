
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Social Reiot</title>
  <meta name="author" content="Ray Yun">

  
  <meta name="description" content=".h .cpp 단축키 Visual Assist 를 사용하시는 분은, 도구-옵션-환경-키보드 에서 VAOpenOpposite를 Ctrl+Q등으로 단축키를 지정하면 파일 전환을 보다 쉽게 할 수 있다. Alt + F7 도구-옵션-환경-키보드에서 빌드.선택영역빌드를 Alt &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://reiot.com/page/47">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Social Reiot" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-247024-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Social Reiot</a></h1>
  
    <h2>Social Game Developer wandering in strange dungeon.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:reiot.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/26/visual-studio-tips/">Visual Studio Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-26T23:40:23+09:00" pubdate data-updated="true">Nov 26<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>.h <-> .cpp 단축키</h2>

<p>Visual Assist 를 사용하시는 분은, <strong>도구-옵션-환경-키보드</strong> 에서 VAOpenOpposite를 Ctrl+Q등으로 단축키를 지정하면 파일 전환을 보다 쉽게 할 수 있다.</p>

<h2>Alt + F7</h2>

<p><strong>도구-옵션-환경-키보드</strong>에서  빌드.선택영역빌드를 Alt+F7로 단축키 지정하면, 현재 프로젝트를 키보드만으로 빌드할 수 있다.</p>

<h2>외부 도구</h2>

<p>레이옷은 현재 솔루션의 각 프로젝트의 산출물(exe,pdb,xml 등)들을 서버에 배포하기 위해서 Python 으로 배포 스크립트를 제작했다. 문제는 이 넘을 실행하기 위해서 꼭 탐색기를 띄워서 찾아가서 실행하는게 너무 귀찮았다는 점. 그러나 <strong>도구-외부도구-외부명령</strong> 으로 새 명령을 등록할 수 있다. 아래와 같이 등록하면, 이제 파이썬 스크립트를 메뉴에서 실행할 수 있게 된다. 특히 출력창 사용을 선택하면 스크립트의 표준 출력을 Visual Studio 에서 살펴볼 수 있다.</p>

<p><img src="http://boxcatstudio.files.wordpress.com/2009/07/external_tool.JPG"></p>

<p>또한 이 명령을 도구모음에 등록하면 더욱 편하다. [도구]-[사용자지정]-[새로만들기]에서 도구바를 하나 만든 다음, [명령] 탭을 눌러 아까 등록한 넘을 [범주]-[도구]-[외부명령N]에서 찾아 드래그 앤 드랍으로 새 도구바로 옮겨 주면 끝. 그나저나, 아이콘을 새로 등록하고 싶지만 어떻게 하는지 모르겠다.</p>

<h2>한글폴더/파일</h2>

<p>가능하면 사용하지 말라. 레이옷은 빈태군의 권유를 듣고 한쪽귀로 흘리다가 다음과 같은 고생을 하게 되었다.</p>

<ul>
<li>xerces c++ 라이브러리 사용시, XML 파일의 절대 경로를 파싱할 때 한글 폴더가 포함될 경우 [Unicode] 로 경로 문자열을 넘겨야 한다.</li>
<li>DevPartner 사용시 디버깅 정보가 찾아지지 않는다.</li>
<li>이 외에도, 프로젝트 폴더명 중에 space 가 포함될 경우에도 항상 $(InputDir) 등의 매크로들을 &#8221; &#8221; 으로 둘러싸줘야 한다.</li>
</ul>


<h2>정규식</h2>

<p>global replace 할 때, 정규식을 사용하면 매우 편리하다. 다음 예를 살펴보자</p>

<p>string strValue = <strong>NODE_TEXT(pStrNode);           // &#8212;-> string strValue = pStrNode.ToString();
int iValue = </strong>NODE_INT(pIntNode);                 // &#8212;-> int iValue = pIntNode.ToInt();</p>

<p>MSXML 에서 xerces 로 XML 라이브러리를 교체할 때, 위와 같은 코드가 이곳 저곳에 수두룩 했다. 이를 고치기 위해 다음 정규식을 사용했다.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Find: __NODE_TEXT({.+})
</span><span class='line'>Replace: \1.ToString()</span></code></pre></td></tr></table></div></figure>


<ul>
<li>() 의 경우 backslash escape 를 해줘야 한다</li>
<li>.+ 는 설명안해도 알 듯?? ㅋㅋ</li>
<li>특정 패턴을 replace 에서 사용하려면 {패턴}으로 검색하고, (발견순서대로) \N 으로 사용하면 된다</li>
<li>replace 는 정규식이 아니니깐 막 써도 된다</li>
</ul>


<p>일반 문자열 &#8220;xxx&#8221; 를 _T(&#8220;xxx&#8221;) 로 바꾸는 정규식</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Find: \"{:Al@}\" || 문자열 가운데 ' ' 또는 '_' 가 있을 경우 인식이 안된다.
</span><span class='line'>Replace: _T("\1")</span></code></pre></td></tr></table></div></figure>


<h2>빌드 이벤트</h2>

<p>UnitTest나 EventLog 를 위한 Message DLL 등을 만들 때 사용되는 사용자 지정 빌드 단계에 대해서 알아보자. 우선, MSDN 에 나오는 Visual Studio 빌드 이벤트 및 사용자 지정 빌드 단계의 순서는 다음과 같다.</p>

<ul>
<li>&#8221;&#8217;빌드 전 이벤트&#8221;&#8217;</li>
<li>개별 파일에 대한 사용자 지정 빌드 단계</li>
<li>프록시 생성기</li>
<li>MIDL</li>
<li>리소스 컴파일러</li>
<li>C/C++ 컴파일러</li>
<li>&#8221;&#8217;링크 전 이벤트&#8221;&#8217;</li>
<li>링커 또는 라이브러리 관리자(해당되는 경우)</li>
<li>BSCMake</li>
<li>프로젝트에 대한 사용자 지정 빌드 단계</li>
<li>웹 배포 도구</li>
<li>&#8221;&#8217;빌드 후 이벤트&#8221;&#8217;</li>
</ul>


<p>UnitTest를 자동으로 실행하게 하려면, &#8221;&#8217;프로젝트 사용자 지정 빌드 단계&#8221;&#8217; 또는 &#8221;&#8217;빌드 후 이벤트&#8221;&#8217;가 적절하다.</p>

<h2>Command Line Build</h2>

<p>특이하게도 한 순간에 한가지 프로젝트, 한가지 빌드 타겟만이 가능하다. 결국 여러 개의 프로젝트를 함께 빌드하려면 각각을 따로 명시해야 할 듯. /out 의 경우 이전 파일에 로그를 append 한다.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>devenv  /project  /build  /out</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/26/moniwiki-tips/">MoniWiki Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-26T23:21:26+09:00" pubdate data-updated="true">Nov 26<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Security</h2>

<blockquote><p>$security_class=&#8221;needtologin&#8221;;</p></blockquote>

<h2>RcsLite</h2>

<blockquote><p>$version_class=&#8217;RcsLite&#8217;;</p></blockquote>

<h2>Disable Theme</h2>

<p>테마와 CSS 모두 강제 지정하려면 아래와 같이 할 것.</p>

<blockquote><p>$theme=&#8217;&#8230;&#8217;;</p>

<p>$theme_css=1;</p></blockquote>

<h2>MoinMoin Migration(?)</h2>

<p>MoinMoin 위키에서 MoniWiki 로 이전한 경우, 구글 등의 검색 엔진이나 지인들의 링크가 이전 주소로 되어 있는 경우, fake moin.cgi 를 만들어서 링크를 계속 유지시킬 필요가 있다.  특히 apache 환경에서는 .htaccess 설정을 이용해서 손쉽게 fake moin.cgi 를 만들 수 있다.  일단 아래와 같이 moin.cgi 를 만든다. 특별히 실행권한을 주지 않아도 무방하다.</p>

<blockquote><p>&lt;?php</p>

<p>chdir(&#8220;/path/to/moniwiki&#8221;);</p>

<p>include(&#8220;wiki.php&#8221;);</p>

<p>?></p></blockquote>

<ul>
<li>.htaccess 에 moin.cgi 를 php 가 핸들링하도록 다음과 같이 추가한다.</li>
</ul>


<blockquote><p><Files moin.cgi></p>

<p>SetHandler application/x-httpd-php</p>

<p></Files></p></blockquote>

<h2>파일 업로드 크기 제한</h2>

<p>이것은 모니위키의 문제가 아닌 php 의 문제이다. php.ini 에서 업로드 및 POST 크기 제한을 적절하게 수정해야 한다.</p>

<h2>xls 파일 업로드</h2>

<p>UploadFiles.php 에서 기본적으로 정의된 확장자가 아닐 경우 업로드가 금지된다. 따라서, 여기에 xls 확장자를 추가할 것.</p>

<blockquote><p>// plugin/UploadFile.php:71</p>

<p>$pds_exts=&#8221;png|jpg|jpeg|gif|mp3|zip|tgz|gz|txt|css|exe|hwp|xls&#8221;;</p></blockquote>

<h2>external link 제거</h2>

<p>한글로 된 외부 링크의 경우 URL 이 너무 길어져서 화면 크기를 넘어서는 경우가 있다. 아예 URL 표시를 제거하는 편이 더 좋을 듯?</p>

<blockquote><p>// wiki.php:1440</p>

<p>$external=$this->ex_bra.$url.$this->ex_ket;</p>

<p>$external=&#8221;; //  <link rel="icon" href="/reiot.png" type="image/png" /></p></blockquote>

<p>see also:</p>

<ul>
<li>http://en.wikipedia.org/wiki/Favicon</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/26/python-service/">Python Service</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-26T19:50:56+09:00" pubdate data-updated="true">Nov 26<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>win32serviceutil.ServiceFramework를 상속받아서 SvcStop(), SvcDoRun() 을 override 하면 가장 기본적인 서비스를 구현할 수 있다. 아래의 예제는 Python Programming on Win32 에서 발췌한 것이다.</p>

<h1>!python</h1>

<p>import win32serviceutil, win32service, win32event
class MyService(win32serviceutil.ServiceFramework):
  <em>svc_name</em> = &#8220;MyService&#8221;
  <em>svc_display_name</em> = &#8220;My First Service&#8221;
  def <strong>init</strong>(self,args):
  win32serviceutil.ServiceFramework.<strong>init</strong>(self,args)
  self.event = win32event.CreateEvent(None,0,0,None)
  def SvcStop(self):
  self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
  win32event.SetEvent(self.event)
  def SvcDoRun(self):
  win32event.WaitForSingleObject(self.event,win32event.INFINITE)</p>

<p>if <strong>name</strong>==&#8217;<strong>main</strong>&#8217;:
  win32serviceutil.HandleCommandLine(MyService)</p>

<p>이렇듯 간단한 서비스를 실행하기 위해서는 우선 Win32 Python 모듈과 함께 배포되는 PythonService.exe를 레지스트리에 등록해야 한다. 다음과 같이 하라. (그런데, 아마도 win32 모듈을 설치하면 자동으로 이 넘이 등록되는 듯하다. 확인 요망)</p>

<blockquote><p>PythonService.exe /register</p></blockquote>

<p>이제 서비스를 실행해보자. win32serviceutil.HandleCommandLine()이 이미 모든 것을 구현해뒀기 때문에, 그냥 다음과 같이 하면 된다.</p>

<blockquote><p>python MyService.py install | start | stop | remove</p></blockquote>

<p>물론 net start | stop MyService 라고 해도 서비스를 시작/종료할 수 있다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/25/code-review-tips/">Code Review Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-25T06:44:42+09:00" pubdate data-updated="true">Nov 25<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>당신의 프로그램이 다운된다면, 혹은 메모리 누수가 심하다면 다음과 같은 룰을 기반으로 코드를 리뷰하라. 이때, 코드 작성자가 아닌 다른 프로그래머를 항상 옆에 대동하면 버그를 찾을 확률은 200% 증가할 것이다. (사실 이건 내부 자료인데 몰래 공개하는 것이다. 헤헤)</p>

<ul>
<li>상속 관계의 베이스 클래스에 virtual destructor 를 선언했는가?</li>
<li>배열 포인터를 delete[] 로 삭제하는가?

<ul>
<li>delete:Wh*[]으로 정규식 검색을 하면 편하다.</li>
</ul>
</li>
<li>배열이 아닌 포인터를 delete[] 로 삭제하는가?</li>
<li>memcpy(), memset(), memmove(), strcpy() 메모리 관련 함수들의 BoundCheck가 잘 되어 있는가?</li>
<li>배열을 인덱싱할 때 파라미터의 BoundCheck 가 잘 되어 있는가?</li>
<li>다른 peer 로 부터 넘어온 모든 정수형 파라미터에 대한 BoundCheck가 잘 되어 있는가? (특히 문자열 길이에 유의)</li>
<li>STL string 을 사용한다면, %s 포맷팅할 때 c_str() 을 사용하는가?</li>
<li>Singleton 이나 STL 컨테이너에 대해서 2개 이상의 쓰레드가 동시에 읽기/쓰기 모드로 접근하는 경우 lock 을 걸고 있는가?</li>
<li>사용하지 않는 copy constructor, assignment operator 가 private 로 선언되어 있는가?</li>
<li>포인터 멤버를 가진 객체를 복사할 때 assignment operator 를 재정의했는가?</li>
<li>Warning Level 을 4 로 높인 다음 컴파일해봤는가?

<ul>
<li>초기화하지 않고 사용하는 변수(또는 클래스 데이터 멤버)가 가장 위험하다.</li>
</ul>
</li>
<li>try ~ catch( &#8230; )은 절대 사용하지 말라. SEH Exception 까지도 캐치해버린다.버그를 숨겨서 더 큰 버그를 만들 뿐이다.</li>
<li>set_se_translator() 를 쓰지 마라. 쓰레드 로컬이라, 매 쓰레드마다 해줘야 한다. SetUnhandledExceptionFilter()는 프로세스 글로벌이다.</li>
</ul>


<p>see also:</p>

<ul>
<li><a href="http://imays.pe.kr:41414/moin/iwiki/moin.cgi/_bc_ad_b9_f6_20_c7_c1_b7_ce_b1_d7_b7_a5_20_c4_da_b5_f9_c0_c7_20_c1_d6_c0_c7_bb_e7_c7_d7">서버 프로그래밍시 주의사항</a> by imays님</li>
<li><a href="http://www.myevan.net/phpBB/viewtopic.php?t=1484">서버 프로그래밍시 주의사항</a> by 빗자루님</li>
<li><a href="http://www.macadamian.com/codereview.htm">Code Review Checklist</a></li>
<li><a href="http://www.macadamian.com/column/completeBreakfast.html">Part of Your Complete Breakfast</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/25/cpb/">CPB</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-25T06:30:15+09:00" pubdate data-updated="true">Nov 25<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>Windows 환경에서 PDB 파일에 저장된 심볼을 DIA SDK 를 이용해서 접근, 루아 스택에 바인딩해주는 라이브러리.</li>
<li>코드를 수정하지 않아도 lua 레벨에서 원하는 변수에 접근해서 수정하는 것이 가능하다.</li>
<li>tweaking 라이브러리가 필요하다면 강력 추천!</li>
<li>namespace 지원 안함. 즉 std:: 시리즈나 namespace 안에 있는 변수들은 바인딩 불가. (version 006)</li>
</ul>


<p>see also:</p>

<ul>
<li><a href="http://www.thomasandamy.com/projects/CPB/">CPB official homepage</a></li>
<li><a href="http://reiot.cafe24.com/?p=37">CPB 맛보기</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/25/xml-rpc/">XML RPC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-25T06:08:58+09:00" pubdate data-updated="true">Nov 25<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>XML RPC는 HTTP 프로토콜 위에 XML 로 RPC(Remote Procedure Call. 원격지의 어플리케이션에 정의된 함수를 로컬인 것처럼 호출할 수 있게 해주는 기법)을 구현한 것이다. 특히 Python을 이용하면 정말 쉽게 XML RPC 를 사용할 수 있다. 레이옷은 MoinMoin 위키의 매크로에서 XML RPC 로 원격지의 시스템에 설치된 게임 서버 WindowsService를 제어하는 에이전트를 구현중이다</p>

<p>see also:</p>

<ul>
<li><a href="http://sandbox.rulemaker.net/ngps/m2/">M2Crypto - Python + OpenSsl + SWIG</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/25/xml-tips/">XML Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-25T06:03:27+09:00" pubdate data-updated="true">Nov 25<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Unicode XML in code</h2>

<p>코드 안에 L&#8221; &#8221; 을 붙여서 정의한 XML 스트링은 당연히 UTF-16 이다. 만약 UTF-8 로 바꾸고 싶다면 컨버팅 함수를 통하는 수 밖에 없다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/25/using-xerces-c/">Using Xerces C++</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-25T05:57:41+09:00" pubdate data-updated="true">Nov 25<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Xerces는 XML 파싱을 위한 C++/Java 공개 라이브러리다. 기존의 Microsoft XML SDK를 이용한 XML 파싱 라이브러리가 있음에도 불구하고, Xerces를 이용한 파서를 새로 만들게 된 것은 Microsoft XML SDK가 Visual C++에서만 컴파일이 정상적으로 되었기 때문이다. Borland C++ Builder를 이용해서 기존의 라이브러리를 컴파일하기 위해 몇가지 시도를 해보았지만, 정상적으로 되지가 않았다. 결국 포기하고 다른 방편으로 Xerces를 이용하게 되었다.</p>

<p>파싱 클래스나 함수 등은 W3C에서 이미 규정한 것이기 때문에 Xerces나 Microsoft나 별반 다르지 않다. 차이점은 함수의 프로토타입이나, 내부적으로 사용하는 유틸리티 클래스들인데, 이는 쉽게 넘어갈 수 있는 문제였다. 게다가 나중에 유닉스 계열로 가도 이 라이브러리를 그대로 이용할 수 있으니 이 어찌 즐겁지 않으리요.</p>

<h2>Install For Microsoft Visual C++</h2>

<pre><code>- http://xml.apache.org 에서 Xerces 바이너리를 다운받는다. 소스를 다운받아도 상관없으나 컴파일하는 수고를 덜려면 바이너리를 받는 게 낫다.
- 인스톨하고, Visual C++에서 PATH를 잡아준다.
- 프로젝트 링크 탭에다가 xerces-c_2.lib 또는 xerces-c_2D.lib 라이브러리를 집어넣는다.
- xerces-c_2.lib라면 xerces-c_2_2_0.dll을, xerces-c_2D.lib라면 xerces-c_2_2_0D.dll을 PATH로 잡혀있는 디렉토리 어디엔가 복사해둔다.
- 컴파일하고 실행한다.
</code></pre>

<h2>주의해야할 점</h2>

<p>Xerces를 사용해서 XML 문서를 다룰 때, 한글을 사용하기 위해서는</p>

<blockquote><p>< ?xml version="1.0" encoding="Windows-1252"?></p></blockquote>


<p>과 같은 헤더를 붙여줘야한다. 인터넷 익스플로러에서 보면 한글이 깨져서 보이지만, 실제로 프로그램에서 돌릴 때는 괜찮다.</p>

<blockquote><p>< ?xml version="1.0" encoding="euc-kr"?></p></blockquote>


<p>로 하는 경우에는 인터넷 익스플로러에서는 보면 괜찮지만, 프로그램 돌릴 때는 한글 문자가 깨지게 된다.</p>

<p>see also:</p>

<pre><code>- [http://xml.apache.org](http://xml.apache.org/)
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/25/sax-event-handling/">SAX 이벤트 처리하기</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-25T05:49:42+09:00" pubdate data-updated="true">Nov 25<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>XML 프로세싱에는 두 가지 모델이 있다. DOM(Document Object Model)과 SAX(Simple API for XML)다.</p>

<ul>
<li>DOM은 XML 문서를 파싱해서 트리 형식의 객체를 만들어낸다. 클라이언트, 즉 DOM을 사용하는 프로그래머는 이 트리에 붙어서 문제를 해결해 나가야한다.</li>
<li>SAX는 이벤트 기반이다. XML 문서를 처음부터 파싱해 나가면서, &#8221;새로운 element가 나왔다&#8221;, &#8221;element의 끝이 나왔다&#8221; 등등의 이벤트가 발생될 때마다 사용자가 지정한 함수를 호출하는 형식으로 파싱이 이루어진다.</li>
</ul>


<p>현재 만들어져 있는 라이브러리는 SAX를 이용한 라이브러리다. 마이크로소프트에서 지원하는 XML SDK를 이용해서, element들의 집합으로 이루어진 트리를 구성하거나, 리스트를 생성할 수 있도록 만들어져 있다. 아직까지는 DTD 관련 처리는 되어있지 않다.</p>

<h2>SAX 이벤트 처리</h2>

<p>SAX를 이용한 애플리케이션을 만들때 처리해줘야하는 이벤트를 설명하자면 다음과 같다.</p>

<ul>
<li>startDocument : 문서의 처음을 읽을 때 호출된다.</li>
<li>endDocument : 문서의 마지막을 읽을 때 호출된다.</li>
<li>startPrefixMapping : 모르겠다.</li>
<li>endPrefixMapping : 모르겠다.</li>
<li>startElement : 엘리먼트의 시작점을 만났을 때 호출된다. 위의 예제에서는  이 부분이나  같은 엘리먼트를 만났을 때 호출된다.</li>
<li>endElement : 엘리먼트의 끝점을 만났을 때 호출된다. startElement와 대칭되는 쌍으로서 항상 불리게 된다. 물론 문서에 문법 오류가 있을 때에는 안 불린다.</li>
<li>characters : 엘리먼트의 시작과 끝 사이의 글자를 만났을 때 호출된다. 위의 예에서는 test 태그 사이의 hey를 만났을 때 호출된다.</li>
<li>ignorableWhitespace : 모르겠다. 공백 문자를 만났을 때 호출되는 것 같은데 사용하지 않는다.</li>
<li>processingInstruction : 모르겠다.</li>
<li>skippedEntity : 역시 모르겠다.</li>
</ul>


<p> 각각의 이벤트 핸들링 함수에는 인자로 노드의 이름과 길이 등이 따라오기 때문에 이를 이용해서 트리나 리스트를 만들어내는 것은 매우 쉽다. 다만 기본적인 처리가 2바이트 문자이고, 유니코드 로케일 문제 때문에 문자열 변환이 약간 귀찮다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/11/25/about-mmorpg-balancing/">MMORPG 밸런싱은 너무 힘들어요</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-11-25T04:54:58+09:00" pubdate data-updated="true">Nov 25<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div style="text-align:center;"><img src="http://boxcatstudio.files.wordpress.com/2009/07/DM.jpg"></div>


<p>부끄러운 이야기이지만 한때 MMORPG 기획물을 먹을 때, 공식 혹은 비공식적으로 밸런스를 더이상 하고 싶지 않다고 선언한 적이 있습니다. 꿈 많은 기획 초보에서 일년만에 타락한 실패한 기획자가 된 거죠. 알게 모르게 욕도 많이 먹었습니다. 대놓고 실력없다고 욕먹은 적도 있습니다. 그 암울했던 시절의 밸런싱 스토리를 한번 풀어내보겠습니다.</p>

<p><strong>완벽한 밸런스?</strong></p>

<p>모든 유저들의 마음에 쏙 드는 리밸런싱은 있을 수 없다. 그러나, 가장 많은 유저들이 만족한다면 그게 바로 제대로 된 밸런스다.</p>

<p>기술이 추가되거나, 전투 공식이 수정되거나, 몬스터 배치가 바뀌거나, 아이템 가격이 변동되면 분명히 누군가는 불만을 토로하게 되더군요. 그 누군가가 게임 내에서 길마 등 일정 지위(-<em>-)에 도달해 있거나, 덕망(-</em>-)이 높거나, 사장과 안면이 있거나, 게시판 글발이 좋을 경우 후폭풍이 무조건 몰아치더라구요.</p>

<p>물론 개발팀 특히 기획팀이 최선을 다하지 않아서 그랬겠지만, 결국 불쌍한 운영팀만 욕을 먹게 되더군요. 결국, 패치 후 필연적으로 발생하는 유저들의 불만을 눈가리고 아웅하기 위해,  불쌍한 기획자와 운영자들은 다음과 같은 얍삽한 노하우를 얻게 되었습니다.</p>

<pre><code>- 모든 아이템의 가격은 시간이 흐름에 따라서 점차 떨어져야 한다
- 모든 기술의 MP 소모량은 시간이 흐름에 따라서 점차  줄어들어야 한다
- 동일 레벨의 필요경험치는 시간이 흐름에 따라서 점차  줄어들어야 한다
- 동일 레벨의 육성 시간은 시간이 흐름에 따라서 점차 짧아져야 한다
- 모든 제한 요소는 시간이 흐름에 따라서 점차  완화되어야 한다
</code></pre>

<p>즉, 어떤 새로운 기능이 들어갈 때 페널티 관련 파라미터들은, 이후 플레이어들의 비난을 감안해서, 약간 높게 책정되어야 한다는 건데요, 처음부터 적정 수준을 잡았다가 플레이어들이 시위를 할 경우 더이상 낮추다간 큰일나게 되기 때문입니다.</p>

<p>이런 식의 데미지를 한번이라도 입어봤던 분들은, 요즘도 종종 이런 이야기를 합니다.</p>

<blockquote><p>일단은 이정도로 하고 분위기를 봐서 낮추든가 합시다</p></blockquote>


<p><strong>아무도 믿지 말라?</strong></p>

<p>이 부분에 대해서는 제 잘못이 아주 큽니다. 왜냐하면, 기획자라는 넘이 캐릭터를 처음부터 끝까지 키워보지 않았기 때문이지요. 아무튼, 게임이 어떻게 돌아가는지, 요즘 플레이어들의 불만이 뭔지, 스스로 상황 파악이 안되고 주위 사람들에게 불평 불만을 들어야만 아는 상황이었으니&#8230; 이사람 말에 솔깃, 저사람 말에 갸웃하게 되는 지경이었습니다.</p>

<p>그러다가, 열혈 플레이어였던 사장 운전사의 피를 토하는 한마디!</p>

<blockquote><p>아.. 캐릭터 키우기가 너무 힘들어. 지금 다들 게임을 접으려고 하고 있단 말이야. 길마들 다 난리야!!!</p></blockquote>


<p>이 말을 듣고, 한쪽 종족의 성장 곡선을 완화시키는 패치를 내보냈더랍니다. 그 결과는&#8230; 다들 짐작하시겠지요. 그 이후, 열렙하는 개발자들의 하소연은 30-40% 허풍으로, 플레이어들의 게시판 이야기는 70-80% 과장으로 인식하게 되는 병을 얻었습니다. 게임 자체가 종족간 대립 구도를 채택해서 이런 불신증상은 더했다는&#8230; 웬만한 불만은 무시하고, 게시판에서 호소력이 있는 명문을 발견하거나, 여러 명한테서 동일한 불만을 듣게 되면, 보완 작업에 들어갔습니다.</p>

<p>그나마, 이쪽 저쪽 불만을 모두 접하는 운영팀의 이야기가 가장 중립적이었습니다. 그치만, 자기 캐릭을 키우는 넘은 또 그게 아니더군요.</p>

<blockquote><p>제가 좀더 많이 플레이를 했더라면 충분히 막을 수 있었던 실패담이지만, 웬지 모르게 그게 안되더군요. 다들 저보고 제발 플레이좀 해보라고 이야기하곤 했지만, 그냥 한귀로 흘려버렸다는&#8230;. (물론 다들 속으로 정말 답답해하고 어떤 사람은 욕도 많이 했겠지요) 프로페셔녈이라면 절대 그럴리가 없었겠지요. 자기가 만든 게임에 대한 애정 부족! 그때 저때문에 피보신 많은 분들께 여기서나마 잠시 사죄를 드려봅니다.</p></blockquote>


<p><strong>밸런싱에 대한 주관적인 접근(X)</strong></p>

<p>사실 이게 본론이 되겠습니다. 사실 나리티님의 글에서 나온 목록중에서 많은 부분에 대해서 고민을 안해본게 아닙니다만, 그런 데이터 수집 활동이 너무 주관적이며 신용도가 낮다는데 문제가 있습니다. 결론부터 말하자면, 플레이어들의 게임 플레이에 대한 로그 분석 활동이 기획자들의 주요 업무가 되어야 한다는 거구요. 그에 따른, 프로그래머들의 서포트가 있어야 한다는 겁니다. (라기보다는, 아예 초기 개발 시점부터 기획팀에서 이후 조사를 위한 필요 데이터를 명시한 기획서를 넘기고, 프로그램팀에서 관련 데이터를 가공하기 쉽도록 DB에 남긴다..가 되겠네요)</p>

<p>지금 참가중인 프로젝트에서도 이런 부분이 너무 미숙해서, 회의에 들어가면 대체로 주관적인 평가들을 많이 하곤 합니다. 더군다나 퍼블리셔에서 누군가가 한마디한 것들이 점차 증폭되어 정말 진리인양 개발팀으로 흘러 들어오는 걸 보고 있노라면.. 으..</p>

<pre><code>- 게임이 어려워서 동접이 늘지 않아요.
- 처음에 몇 번 해보고 다들 접어요.
- 유저중 절반이상이 어느 수준에서 게임을 포기해요.
- 하다보면 자꾸 튕기고, 짤려요.
</code></pre>

<p>분명히 이런 부분은 데이터를 가지고 객관적으로 접근해야 하는 것임에도 불구하고, 다들 너무 즉흥적이면서 주관적으로 접근하는 경향이 있더군요. 처음부터 이런 부분을 감안하고 데이터를 남겨놓지 않으면, 정작 필요할 때 문제의 원인을 파악하기 힘든 경우가 많은데&#8230; 그렇다고 특별한 지시 없이도 알아서 필요 데이터를 잘 축적해주는 프로그래머는 드물지요.</p>

<p>그렇다고 데이터 만능주의로 흐르다가는 게임의 본연의 모습을 잃어버릴지도 모르겠네요. 가령, 플레이 시작후 일주일만에 총 신규가입자의 10%가 떨어져나가는데 이 원인은 20레벨에서 25레벨의 경험치가 너무 많아서 그런게 아니라 퀘스트의 복잡도가 너무 높고 플레이 시간이 길어져서 중얼 중얼중얼&#8230; 퀘스트를 하루에 1.5개 이상 주어지고 초보들의 소지금액을 현재의 20%로 증가시키기 위한 대책안을 마련해서 중얼 중얼&#8230; 물론 비지니스로의 가치는 충분하겠습니다만.</p>

<p>시스템 디자인 시점에서도 분명 나리띠님의 글처럼 안배가 되어 있어야 하겠지만, 과연 그게 원안대로 잘 적용되고 있는지, 플레이어들이 만족하고 있는지를 파악하려면, 테스트 시점이나 오픈 이후에도 분명 데이터 분석을 통한 사후 검증 및 개편작업은 필연적일 것입니다.</p>

<p><strong>결론 : 데이터 마이닝(?)</strong></p>

<p>전개가 좀 산만했네요. 억지로 정리를 해본다면, 완벽한 밸런싱이라고 하는 것은 다른 사람이나 자신의 주관적 판단보다는 객관적인 데이터를 토대로, 다수 플레이어들의 불평불만(?)을 가지치기하듯 최소화한다. 라고 우길 수 있겠습니다.</p>

<p>DB 전문인 후배에게 물어보니, 다들 한번쯤 들어봤을 데이터 마이닝이나 OLAP 등의 분야가 이런 부분을 다루는 거라고 하네요. 단순한 데이터에서 의미를 마이닝(mining)해내어 트렌드를 찾아내고 정책을 결정하는 거라나요? 맨 위의 그림을 보면 대충 무슨 의미인지는 아시겠습니다만.</p>

<p>큰 회사라면 몰라도, 고만고만한 작은 회사들에서는 이런 부분을 제대로 갖추기가 힘들지 않을까 합니다. 우선 무엇을 저장할지를 골라주는 경험많은 기획팀과, 어떻게 저장할지를 결정해주는 DBA, 그리고 데이터를 분석해서 적절히 플랜을 작성할 마케팅 담당자가 필수적이겠습니다. 물론, 프로그래머는 당연히 시키는 데로 데이터를 DB로 넘겨야죠.</p>

<p>물론 지금도 많은 회사들은 접속 회수와 시간, 지역/성별/나이별 통계 자료, 시간대별 분포도 등을 기반으로 마케팅 플랜을 작성하는 곳은 많겠습니다만, 게임 내부적인 수많은 파라미터들을 남겨서 이후 리밸런싱에 활용하는 회사는&#8230; 글쎄요 NCSoft 라면 아마 그렇게 할지도 모르겠습니다.</p>

<p>KGDA의 어딘가에서 본 글처럼, 아무래도 한국에는 이를 제대로 할 줄 아는 개발자가 많지 않은 듯 합니다. 이게 개발자가 알아서 해야 할 일은 아니겠지만요.</p>

<blockquote><p>그나저나, 이렇게 결론지으면 뭐하나요? 동접이 늘어나질 않는데&#8230; ㅠㅠ</p></blockquote>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/48/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/46/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/09/21/wordpress-to-octopress/">Wordpress To Octopress</a>
      </li>
    
      <li class="post">
        <a href="/2011/07/09/jquery-proven-performance-tips-tricks/">jQuery Proven Performance Tips &amp; Tricks</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/18/jquery-mobile-tip/">jQuery Mobile Tip</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/18/clienpad-appspot-com/">clienpad.appspot.com</a>
      </li>
    
      <li class="post">
        <a href="/2011/04/15/ant-cookbook/">Ant Cookbook</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/reiot">@reiot</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'reiot',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("reiot", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/reiot" class="twitter-follow-button" data-show-count="false">Follow @reiot</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Ray Yun -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'reiot';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
