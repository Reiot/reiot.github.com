<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
	<title>Rebooting Reiot</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="A social game developer wandering strange dungeons...">
	<meta name="author" content="Ray Yun">

    <!-- Le styles -->
	
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/assets/js/google-code-prettify/prettify.css" rel="stylesheet">
    <link href="/assets/css/droppress.css" rel="stylesheet">
	

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">Rebooting Reiot</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="/">Home</a></li>
              <li><a href="/archives/">Archives</a></li>
              <li><a href="/category/">Categories</a></li>
              <li><a href="/tag/">Tags</a></li>
			  
            </ul>
            <form class="navbar-search pull-right">
              <input type="text" class="search-query" placeholder="Title Search">
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

	
<div class="container">

	

	<div class="row">
		<div class="span9">
			
				<div>
	<div class="page-header">
		<h1><a href="/2006/02/13/console-vs-service/">Console vs. Service</a> <small>2006-02-13</small></h1>
	</div>
	<div><p>지금까지는 command line 파라미터로 콘솔로 실행할 것인지 아니면 서비스로 실행할 것인지를 결정했다. 그러지 말고 아예 ConsoleRunner 와 ServiceRunner 를 외부 실행 파일로 만들어버리고 나머지 코드는 dll 로 만들어버리는건 어떨까?</p>
<pre><code>- 컨텐트 코드가 dll 이므로, TestRunner 에게 넘기기도 용이하다
- ServiceRunner 를 아예 서비스로 만들 수 있다.
- 서버 모듈을 자동으로 다운받아서 지정된 넘을 실행하는 수준의 서비스 관리가 가능해진다.
</code></pre>
<p>특히 3번처럼 호스트-서비스의 결집도가 너무 높은 상황(서비스를 다른 머신으로 옮기려면 해당 머신에 실행 파일을 복사하고 서비스를 설치하는 등의 과정을 거쳐야 한다는 점)을 해소할 수 있다는 점에서 왠지 괜찮을 것 같다는 생각을 해본다.</p>
<p>시간이 나면 WYSIWYG 방식의 서버-서비스 배치툴을 만들어서 그 결과를 XML로 추출해내어 배포하면 알아서 적당한 서비스 모듈을 다운받아 실행하는 그런 멋쥔 환경을 구축해보고 싶다. (그렇다. 서비스 설치 및 설정이 너무 귀찮아서 망상에 젖은 것 뿐이다. 그보다는 빨리 서버간 패치 시스템을 구축해야 할텐데... rsync가 제일 나은 툴일까나..)</p></div>
	<br />
	<p>
	
		<a href="/category/programming/"><span class="label label-info"><span class="icon icon-folder-open"></span> programming</span></a>
	
	
	</p>
</div>
			
				<div>
	<div class="page-header">
		<h1><a href="/2006/02/10/오늘의-버그/">오늘의 버그</a> <small>2006-02-10</small></h1>
	</div>
	<div><p>김학규님의 <a href="http://www.lameproof.com/zboard/zboard.php?id=bbs2&amp;no=381">스트레스 테스트 삽질기</a>에 비하면 아무 것도 아니지만, 오늘 미국 테스트 서버에서 특이한 버그를 만나게 되어서 한번 써본다.</p>
<p>며칠 전부터 토너먼트 관련 UDP 버그가 발생한다는 보고를 받았다. 지정된 토너먼트 시각이 되면 자동적으로 방이 생성되고 사람들이 들어가는데, 유독 첫번째 방에서만 플레이가 되고 나머지 방에서는 100% UDP failed 가 생긴다는 것이었다. 도저히 소프트웨어 문제라고는 여겨지지 않아서 사내 테스트 환경에서는 테스트를 해봤지만 재현이 되지 않았다. 안되면 다 안되고 되면 다 되어야지 왜 딱 하나만 되는 것이며, 그것도 가장 첫번째 방만 되는 것인지 아무리 생각해도 믿어지지 않았지만 직접 눈으로 보게 되자 디버깅할 수 밖에 없었다. 30분정도 디버깅을 하다보니 아예 서버로부터 UDP 패킷이 오지 않는 걸 확인했고 그때 떠오른 게 바로 방화벽 설정이었다.</p>
<p>알고보니 방화벽의 허용 범위의 맨 끝에 첫번째 방에서 사용하는 UDP 포트만이 운좋게 걸려 있었고 나머지는 out of bound 여서 생기는 문제였다. 미국은 거의 대부분 방화벽을 필수로 사용하고 있으며, 지난 번에도 역시 방화벽 때문에 한달 정도 고생을 한 적이 있어서 다행히 금방 문제를 찾을 수 있었다. 덕분에 미국 테스터들과 출장간 동료들이 좀 갈굼을 당했지만, 빨리 찾게 되었으니 그나마 다행이 아닐까 한다.</p></div>
	<br />
	<p>
	
		<a href="/category/gamedev/"><span class="label label-info"><span class="icon icon-folder-open"></span> gamedev</span></a>
	
	
	</p>
</div>
			
				<div>
	<div class="page-header">
		<h1><a href="/2006/02/10/pilot-movie/">파일럿 무비</a> <small>2006-02-10</small></h1>
	</div>
	<div><p>오늘 한 달동안 작업한 테크니컬 데모의 중간 버전을 프리젠테이션을 위한 동영상으로 만들어서 (한달동안 두명이서 한 것이라는 코멘트를 잊지 말라는 당부와 함께) 미국에 넘겼다. 화질, 코덱, 용량, 업로드 같은 사소한 문제 때문에 삽질을 조금 했지만 어쨌든 무사히 넘길 수 있었다. 디자이너가 없어서 이전 버전의 리소스를 거의 그대로 사용했고, 카메라 연출 같은 건 신경도 쓰지 못해서 좀 아쉽긴 하다.</p>
<p>어쨌든 시간이 좀 남았길래 저녁 무렵 사원들을 모아놓고 완다와 거상 예약판의 부록으로 따라온 <a href="http://remains.x-y.net/tt/index.php?pl=83">이코와 완다의 파일럿 무비</a>를 함께 관람하는 시간을 가졌다. 게임을 모르는 사람도 있어서 파일럿 무비와 최종 게임 동영상도 함께 보면서 이야기를 나누었는데, 만족스럽진 않았지만 어쨌든 다음 갈 길에 대한 합의를 볼 수 있었다.</p>
<p>대체로 기능 구현만을 근근히 마친 프로토타입을 개발하고 이를 실제로 시연하면서 경영진에게 게임의 특징을 하나씩 보여주는 게 보통인데, 파일럿 무비의 경우 처음부터 동영상으로 편집할 것을 감안해서 <strong>목표로 하는 게임성을 선택적으로 구현</strong>할 수 있기에 꽤 매력적인 것 같다. 그리고 보여주고 싶은 것만 보여줄 수 있으므로 게임의 비전에 대한 공유가 프로토타입 시연보다 더욱 효과적일 것이다. (참고로, 시연자가 잘못하면 보는 사람이 뭘 봐야 할지 모르게 될 수도 있다 -_-) 시연하면서 다운될 것도 걱정하지 않아도 되고, 갓 들어온 신참 교육용으로도 무지 좋으며, 나중에 게임이 대박이 나면 부록 DVD에 이 영상을 넣을 수도 있다!!</p>
<p>앞으로 예상하는 개발 프로세스는 대충 이렇다. 일단 새 엔진을 이용한 테크니컬 데모를 통해서 기술적인 방향을 공유하고, 프로토 타입 대신 파일럿 무비를 제작해서 게임성을 공유한 다음, 실질적인 제작에 들어간다는 것이다. 그때까지는 어쩔 수 없이 하드 코딩을 해야겠지만, 개발 도중 의견 충돌 때문에 엎어버린다든지, 낙하산 때문에 배가 산으로 간다든지 하는 위험을 줄일 수 있을테니 어찌 선택하지 않을 수 있으랴...</p>
<p>더 관심이 있는 사람은 <a href="http://kwanny.ntreev.net/tt/index.php?pl=133&amp;ct1=-1">서관희님의 관련글</a>을 참고하시길...</p>
<p>ps. 동영상 편집의 세계는 멀고도 험하다.</p></div>
	<br />
	<p>
	
		<a href="/category/gamedev/"><span class="label label-info"><span class="icon icon-folder-open"></span> gamedev</span></a>
	
	
	</p>
</div>
			
				<div>
	<div class="page-header">
		<h1><a href="/2006/02/05/ogre-for-psp/">Ogre for PSP</a> <small>2006-02-05</small></h1>
	</div>
	<div><p><img alt="http://www.ogre3d.org/images/M_images/ogrebtn.png" src="http://www.ogre3d.org/images/M_images/ogrebtn.png" /> PSP에서 3D 프로그래밍을 하는 법을 검색하다가 우연히 <a href="http://www.ogre3d.org/phpBB2/viewtopic.php?p=123549">Ogre3D 엔진이 PSP로 포팅된다는 이야기</a>를 Ogre 포럼에서 찾아냈다. PPC 포팅을 담당한 개발자가 하는 김에 PSP포팅도 맡겠다는 이야기인 듯한데... 2월 내에는 나오지 않을까 하는 희망을 품어본다. SDL 특히 pygame이 포팅된다는 소문도 들리는 시점에, Ogre3D까지 포팅이 되면 결국 PSP에서는 python으로도 3D 프로그래밍이 가능해진다는 소리가 되는 셈이다.</p>
<p>그나저나 OGRE를 보고도 /오우거/ 대신 글자 그대로 장난삼아 읽던 /오그레/라는 발음이 연상되어 큰일이다;;</p>
<p>ps. <a href="http://luaplayer.org">LuaPlayer</a>가 <a href="http://www.goop.org/psp/gl/">PSPGL</a> 기반으로 재작성되고 있는 중인데, <a href="http://forums.ps2dev.org/viewtopic.php?t=4591">3D보다는 2D쪽 기능에 한정</a>될 것 같다.</p></div>
	<br />
	<p>
	
		<a href="/category/gamedev/"><span class="label label-info"><span class="icon icon-folder-open"></span> gamedev</span></a>
	
	
	</p>
</div>
			
				<div>
	<div class="page-header">
		<h1><a href="/2006/02/02/alter-table-alter-column/">ALTER TABLE ALTER COLUMN</a> <small>2006-02-02</small></h1>
	</div>
	<div><p>총 15개의 통계 테이블의 리팩토링이 드디어 오늘 끝났고, 내일 테스트만 무사히 통과하면 다음 작업으로 넘어갈 수 있을 것 같다. arithmetic overflow 로 인해 모든 numeric 관련 로직을 계산 컬럼으로 추출해내고 하나씩 검증하는데 이틀이나 날려 먹었던 것이다. 실제로 이백라인에 가까웠던 프로시저가 거의 30% 정도로 분량이 줄었고 각 쿼리문들 역시 간단한 DDL 로 바뀌게 되었는데, 솔직히 너무 허탈하다. :(  </p>
<p>테스트가 성공리에 끝이 나면, 이제 남은 이슈는 본섭 패치를 얼마나 손쉽게 자동화할 것인가? 이다. 변경된 프로시저의 경우 drop - create 로 해결할 수 있지만, 계산 컬럼으로 바꾸는 것은 녹녹치 않았다. 문제는 한번도 관리되지 않았던 DEFAULT constraint 들 때문인데...</p>
<pre><code>- ALTER TABLE ALTER COLUMN 으로 일반 컬럼을 계산 컬럼으로 바꿀 수 없다
- 결국 DROP COLUMN + ADD COLUMN 으로 해결해야 한다
- DROP COLUMN 을 하려면 의존 관계가 없어야 한다
- 그런데 바꿔야할 모든 컬럼들이 DEFAULT 제약조건을 가지고 있었고, 얘네들의 이름이 모두 랜덤이다. -_-
</code></pre>
<p>일단 DBA 와 상의해봐야 되겠지만 어째 해결책은 없을 듯하다. 따라서 오늘의 결론은</p>
<blockquote>
<p>"모든 DEFAULT 제약 조건에 이름을 붙여라"</p>
</blockquote></div>
	<br />
	<p>
	
		<a href="/category/database/"><span class="label label-info"><span class="icon icon-folder-open"></span> database</span></a>
	
	
	</p>
</div>
			
			<div class="pagination pagination-centered">
				<ul>
				
					<li><a href="/page/37/">&laquo;</a></li>
				
				
				  	<li >
				  	
				    	<a href="/page/38/">38</a>
				    
				  	</li>
		  		
				  	<li >
				  	
				    	<a href="/page/39/">39</a>
				    
				  	</li>
		  		
				  	<li class="active">
				  	
				    	<a href="/page/40/">40</a>
				    
				  	</li>
		  		
				  	<li >
				  	
				    	<a href="/page/41/">41</a>
				    
				  	</li>
		  		
				  	<li >
				  	
				    	<a href="/page/42/">42</a>
				    
				  	</li>
		  		
				  	<li >
				  	
				    	<a href="/page/43/">43</a>
				    
				  	</li>
		  		
				
					<li><a href="/page/44/">&raquo;</a></li>
				
		  		</ul>
			</div>
		</div>
		<div class="span3">
			<ul class="nav nav-list well dsq-widget">
	<li>
		
		<a href="http://facebook.com/reiot" style="display: inline-block"><img src="/assets/img/facebook.png" /></a>
		
		
		<a href="http://twitter.com/reiot" style="display: inline-block"><img src="/assets/img/twitter.png" /></a>
		
	    <a href="atom.xml" style="display: inline-block"><img src="/assets/img/rss.png" /></a>
	</li>
	<li class="nav-header">
		Recent Posts
	</li>
	
	<li>
		<a href="/2006/02/13/console-vs-service/">Console vs. Service</a>
	</li>
	
	<li>
		<a href="/2006/02/10/오늘의-버그/">오늘의 버그</a>
	</li>
	
	<li>
		<a href="/2006/02/10/pilot-movie/">파일럿 무비</a>
	</li>
	
	<li>
		<a href="/2006/02/05/ogre-for-psp/">Ogre for PSP</a>
	</li>
	
	<li>
		<a href="/2006/02/02/alter-table-alter-column/">ALTER TABLE ALTER COLUMN</a>
	</li>
	
	<li class="nav-header dsq-widget-title">
		Recent Comments
	</li>
	<script type="text/javascript" src="http://reiot.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=200"></script>
</ul>
		</div>
	</div>

	<footer>
	<p class="pull-right">
		<a href="http://github.com/Reiot/droppress" class="btn btn-success btn-mini">powered by DropPress 0.0.1</a>
	</p>
</footer>

</div> <!-- /container -->


    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
	
    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/google-code-prettify/prettify.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/droppress.js"></script>
	

  
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-247024-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
  

  </body>
</html>