
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Social Reiot</title>
  <meta name="author" content="Ray Yun">

  
  <meta name="description" content="ACE_Message_Block- duplicate()는 recursive 로 동작한다. 따라서 메시지 블럭 리스트를 순회하면서 선택적으로 duplicate() 할 수는 없다.- release() 역시 recursive 로 동작한다.- release()는 new ...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://reiot.com/page/44/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Social Reiot" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header role="banner"><hgroup>
  <h1><a href="/">Social Reiot</a></h1>
  
    <h2>Social Game Developer wandering in strange dungeon.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:reiot.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/03/22/ace-tips/">ACE Tips</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-03-22T08:17:06+09:00" pubdate  data-updated="true" >Mar 22<span>nd</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>ACE_Message_Block</strong></p>

<pre><code>- duplicate()는 recursive 로 동작한다. 따라서 메시지 블럭 리스트를 순회하면서 선택적으로 duplicate() 할 수는 없다.
- release() 역시 recursive 로 동작한다.
- release()는 new 로 생성한 객체에 대해서만 호출해야 한다. 권고에 따르면 가능한한 메시지 블럭은 힙에 생성해서 사용하는게 좋다고 한다.
- 실제 쌓여 있는 데이터의 크기를 알려면 size() 대신 length() 를 써야 한다.
- 생성자에 버퍼와 크기를 넘겨주더라도 이것이 내부적으로 복사되지는 않으며 단지 포인터만을 가지게 된다. 이때 wr_ptr() 을 수동으로 늘려줘야 한다.
- copy()는 append()로 동작하지만 버퍼를 자동적으로 늘리지는 않는다.
- copy(char*)의 경우 널문자도 함께 버퍼에 쓰게 된다. 따라서 copy(str.c_str(),str.size())로 하는 것이 안전하다.
- reset() 은 rd_ptr 과 wr_ptr 을 초기화한다. 단 base 로 가기보다는 0 으로 초기화된다는데 주의.
- data_block() 을 이용해서 내부 데이터 블럭을 교체할 경우 rd_ptr 과 wr_ptr 을 수동으로 설정해줘야 한다.
- ACE_Message_Block(char*,int) 생성자는 겉보기에는 copy()가 발생하는 것 같지만 실제로는 단지 데이터 블럭이 포인터만을 갖게 되므로 복사가 발생하지 않는다. 가령 ACE_Message_Block("abcde",5) 의 경우 내부 데이터 블럭은 문자열 상수의 주소값을 가지게 된다. 또한 wr_ptr() 역시 수동으로 설정해줘야 하는 것으로 미루어 보건데, 아무래도 read only 용으로만 사용해야 할 것 같다.
</code></pre>

<p><strong>ACE_Asynch_Acceptor/Connector</strong></p>

<pre><code>- ACE_Asynch_Acceptor 와 ACE_Asynch_Connector 의 make_handler 는 기본적으로 new 를 해서 리턴한다. 만약 활성화된 연결들을 관리하려면 이 함수를 오버라이드해야 한다.
- 비동기 accept 를 여러 개 준비하려면 단지 ACE_Asynch_Acceptor::open()의 파라미터만을 많이 주면 된다. 굳이 핸들러 여러 개를 먼저 만들어놓을 필요는 없다. (내부적으로 여러 개의 ACE_HANDLE 을 많이 만든 다음 연결이 이루어진 직후에 핸들러를 만들어서 넘겨준다)
</code></pre>

<p><strong>ACE_Task</strong></p>

<pre><code>- ACE_Task_Base + ACE_Message_Queue = ACE_Task
- ACE_Activation_Queue 와 ACE_Method_Request 를 이용하면 [Active Object Pattern](http://reiot.cafe24.com/archives/414)(함수의 호출과 실행을 분리시키는 패턴)을 적용할 수 있다.
- ACE_Activation_Queue::dequeue() 등 timeout 을 지정할 수 있는 wait 함수의 경우 대체로 [상대 시간이 아닌 절대 시간](http://groups.google.co.kr/group/comp.soft-sys.ace/browse_thread/thread/bbe91c5ae17bce4b/35bdddf72c32e413?q=absolute+time&amp;rnum=1#35bdddf72c32e413)을 사용한다. 따라서 ACE_OS::gettimeofday() 등으로 현재 시간을 어디에선가 얻어온 다음 시간을 계산해줘야 하는 귀차니즘이 있다.
</code></pre>

<p><strong>Reactor</strong></p>

<pre><code>- ACE_Reactor_Notification_Strategy 는 Reactor::notify(handler,mask)를 호출해주는 strategy 패턴 클래스이다. ACE_Message_Queue 의 경우, 모든 enqueue 멤버 함수의 끝에 notify() 를 호출하는데 이를 통해서 reactor 로 하여금 특정 핸들러의 특정 콜백을 호출토록 할 수 있다.
- ACE_WFMO_Reactor 의 경우 62개 핸들 제한이 존재하므로, 수백-수천개의 연결을 관리하려면 ACE_Select_Reactor 와 ACE_TP_Reactor 를 사용해야 한다. 단 윈도우에서 성능은 그다지 좋지 않으므로 proactor 로 만드는 편이 좋을 것이다.
</code></pre>

<p><strong>ACE_Acceptor/Connector</strong></p>

<pre><code>- ACE_Event_Handler 와 함께 사용될 수 없다. 오직 ACE_Svc_Handler 와만 가능
</code></pre>

<p><strong>CDR</strong></p>

<pre><code>- 모든 primitive type 의 경우 구조체처럼 바이트 정렬이 된다. { char, int } 와 { char, short, int } 모두 8 byte 를 차지한다. ACE_LACKS_CDR_ALIGNMENT 를 이용하면 정렬을 하지 않을 수 있다.
- string 의 경우 [길이]+[바디]로 직렬화되는데 이때 길이를 위해서 unsigned long 를 사용한다. 내부적으로 스트링의 길이를 측정하기 위해 strlen 이 호출된다. (뜨아)
- from_string() 과 to_string()의 경우 최대 길이를 넘겨 줘야 한다.
- 배열이나 문자열을 위한 버퍼는 내부적으로 new 를 통해서 할당된다.
- write_string() 의 경우 (바이트 크기+1)만큼 전송되는 반면, write_wstring() 은 그냥 전송된다. 즉 "hello" 는 (4+5+1)=10 바이트로 전송되지만 L"hello" 는 (4+5*2)=14 바이트로 전송된다.
- 이미 존재하는 메시지 블럭을 ACE_InputCDR로 읽되 메시지 복사를 피하고 싶다면 ACE_InputCDR(data_block,flag,rd_pos,wr_pos) 생성자를 사용해야 한다. ACE_InputCDR(msg_block)의 경우 내부 메시지 블럭으로 복사가 일어난다는 점에 유의할 것.
- 이미 존재하는 메시지 블럭에 ACE_OutputCDR로 쓰려면 ACE_OuptutCDR(mb) 를 사용하면 된다. 내부적으로 duplicate()가 호출된다.
</code></pre>

<p>ACE_Get_Opt/ACE_ARGV</p>

<pre><code>- ACE_Get_Opt 는 UNIX 스타일의 command line parameter 의 파싱을 도와준다. 이때 옵션 문자열의 포맷이 중요한데, "h:kl:" 은 *-h param1 -k -l param2 *형식을 의미한다.
- ACE_ARGV 는 어떤 문자열을 argc, argv 로 바꿔주며, 그 결과를 ACE_Get_Opt 에게 넘겨서 커맨드라인 파라미터를 파싱하는 것처럼 해결할 수 있다. 특히 환경파일에 저장된 옵션 스트링을 파싱할 때 사용하면 좋다.
</code></pre>

<p><strong>misc</strong></p>

<pre><code>- #define ACE_NTRACE 0 를 켜면 해당 파일에서 참조하는 ACE 프레임워크에 대해 트레이스가 남는다. 만약 전역으로 켜고 싶다면 stdafx.h 에다 넣을 것.
- ACE_TMAIN 을 쓸 수 없는 경우 ACE::init() 와 ACE::fini() 를 수동으로 불러줘야 한다.
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/03/15/dont-reinvent-the-ace/">Don&#8217;t Reinvent the ACE</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-03-15T22:45:36+09:00" pubdate  data-updated="true" >Mar 15<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class='' src='http://www.cs.wustl.edu/~schmidt/gifs/ace-copy1.jpg' width='' height='' alt='' title=''><a href="http://www.cs.wustl.edu/~schmidt/ACE.html">ACE</a>를 처음 소개받은 때는 윈도우용 서버를 처음 개발하던 2003년도였다. 그러나 그 방대한 프레임워크와 학습량에 질려 제대로 써보지도 못하고 결국 포기하고, 대신 Proactor 와 비동기 입출력 부분만 직접 구현, 일년 정도의 정제 과정 끝에 5분만에 새 서비스를 만들어서 띄울 수 있는 수준까지 서버 코어를 완성할 수 있었다. (물론 일부 몰지각한 버그들로 인해서 삽질도 많이 했었다.)</p>

<p>이제 와서 돌이켜보면 그간의 과정들은 <a href="http://gatorlog.com/?p=68">바퀴를 재발명</a>하는 것과 비슷했다. 이미 ACE에 도입된 ACE_Task 같은 개념들을 열심히 재구현하고 있거나, win32 API를 래핑하고 있는 자신을 발견하는 경우가 한두번이 아니었다. 물론 ACE의 무게나 최적화에 대해서는 많은 이견이 있지만, 동접 수십만의 MMORPG를 만들지 않는 한 괜찮지 않을까 하는 검증되지 않은 희망을 품고 있다.</p>

<p>그 외에도 이번에 만들 <strike>진정한</strike> 분산 서버를 위한 기능들이 이미 ACE에 존재하고 있다는 점도 매력적이다. 물론 다운 버그를 잡느라 프레임워크 속에서 허우적대며 디버깅하는 모습이 상상되긴 하지만, 한번 도전해보련다. 캬캬~</p>

<p>ps. 그런데 벌써부터 vc8 + unit test + ACE 의 궁합(/clr:safe 옵션)이 잘 맞지 않고 있다. :(</p>

<p>see also:</p>

<pre><code>- [ACE 팁 모음](http://reiot.cafe24.com/archives/413)
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/03/09/z-net/">Z-Net</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-03-09T02:52:08+09:00" pubdate  data-updated="true" >Mar 9<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>Z-Net</strong> is lua-based network middleware which supports</p>

<pre><code>- automated data &amp; function call replication
- topology independent
- protocol independent
- reliablility control
- bandwidth control
- prediction layer
- lag-simulation
- replay
- massive spectator mode
- secure
- inspired by Unreal Script
</code></pre>

<p>하여튼 뭐 저런 엔진을 만들고 있습니다. 어디까지가 루아이고 어디까지가 C++ 일지는 아직 불명.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/02/25/mmosg-massive-multiplayer-online-sports-game/">MMOSG - Massive Multiplayer Online Sports Game</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-02-25T07:20:52+09:00" pubdate  data-updated="true" >Feb 25<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>가마수트라에서 검색을 하다가 <a href="http://www.gamasutra.com/php-bin/news_index.php?story=5774">2005년 어떤 회사가 online extreme sports 게임을 만들고 있다</a>는 기사를 읽었다. 자세히는 몰라도 눈덮인 높은 산에서 수 백 여명이 스키나 보드를 타고 내려오면서 온갖 묘기를 한다고 생각하니 꽤 재미있을 듯하다. (왜 내려오는지에 대해서는 아무 생각이 없다)</p>

<p>우리야 팀플레이가 중시되는 스포츠이기에 MMOSG로 만들기엔 좀 무리가 있다만, 심리스 월드를 돌아다니다가 마음 맞는 사람끼리 경기장으로 가서 야구도 하다가 축구도 하고 미식축구도 할 수 있고, 할 일 없으면 그냥 관중이 되어서 구경하다가 빈 물병도 던져보고, 진짜 열받는 날에는 옷을 모두 벗고 축구 경기장으로 뛰어들다가 감옥에 가서 일주일동안 로그인 금지도 당할 수 있는 그런 MMOSG라면 꽤 <strike>매력적</strike>(이라고 쓰고 투자할 사람이 많을것 같다라고 읽는다 -_-)이지 않을까?</p>

<p>그런 의미에서, 선배 MMOFPS들의 서비스 노하우만 어디서 잘 훔쳐올 수 있다면 정말 좋겠다. 흣흣</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/02/18/%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3-%E1%84%8B%E1%85%A2%E1%86%A8%E1%84%89%E1%85%A7%E1%86%AB-%E1%84%80%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%B4-%E1%84%87%E1%85%AE%E1%86%AB%E1%84%85%E1%85%B2/">네트워크 액션 게임의 분류</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-02-18T09:02:21+09:00" pubdate  data-updated="true" >Feb 18<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>네트워크 액션 게임들을 peer 간 연결, 동기화 처리, 서버 유무 등으로 구분지어보면 대략 다음과 같다.</p>

<pre><code>- **asynchronous P2P** : 모든 peer 들이 1:1로 연결되며, 적당히 정보를 주고 받으며 최신의 정보들만을 적용하는 방식이다. 디아블로1 등 액션 게임에서 주로 사용되며, 속도는 빠르지만 보안성이 떨어진다. 접속자 숫자가 비교적 많은 편. 패킷 손실에도 비교적 안전하다.

- **synchronous P2P** : 모든 peer 들이 1:1로 연결되는 것은 맞지만 액션 정보를 전송한 후 일정 시간 후에 모든 peer 에서 동시에 실행하는 방식. RTS등 동기화가 치명적인 게임에서 사용되며, 최대 접속자가 10여명 안팎으로 제한된다. 무손실 UDP 를 주로 사용한다.

- **client/server** : 각 peer 들은 서버와 직접 연결되어, 모든 판정은 dedicated 서버상에서 이루어지는 방식. 서버는 주기적으로 스냅샷 정보를 모든 클라이언트에게 브로드캐스트한다. 퀘이크나 하프라이프, 언리얼 같은 FPS 게임에서 주로 사용하는 방식. 비동기 처리와 패킷 손실이라는 점은 asynchronous P2P와 유사하다. P2P가 아니므로 홀펀칭이라든지 NAT 때문에 골치 썩는 일이 없어서 좋다.

- **hosted client/server** : 디아블로2의 배틀넷이나 MMOFPS와 같이 client/server 모델에서 사용자가 서버를 운영하는 대신 회사에서 직접 관리하는 방식이다. 서버 운영 및 트래픽 때문에 돈이 무지 많이 들기 때문에 웬만한 회사에서는 엄두도 못낸다. 그리고 서버 다운이 되면 온갖 원성을 다 사게 되므로 보통 약관을 애매모하게 쓰는 편이다. 유일한 장점은 보안성이 가장 높다는 점.
- **N-P2P** : 앞으로 우리가 구현할, 1-4의 장점만을 취하고 단점은 버린, 즉 보안성도 좋고 빠른 액션도 가능하면서도 동기화도 잘맞는 가운데 30명 이상(1)의 연결도 지원, 그리고 보이스 채팅(2)과 대규모 spectator 모드도 지원하면서 트래픽도 낮은 방식. 
</code></pre>

<ul>
<li>20명 이상의 플레이어를 지원하려면 P2P로는 힘들지 않을까? 연결 노드가 도대체 몇 개야..</li>
<li>그나저나 보이스 채팅은 한때는 vaporware 에 가까웠는데, 요즘은 꽤 많은 게임에서 지원하고 있다.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/02/15/zero-ping/">Zero Ping</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-02-15T20:50:44+09:00" pubdate  data-updated="true" >Feb 15<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Zero Ping 은 상당히 다양한 의미를 가지고 있다.</p>

<pre><code>- **0-ping** : FPS 게임의 랜파티에서 이루어지는 빠르고 쾌적한 게임들을 의미한다.
- **nick name** : 많은 수의 FPS 팬들이 이 이름을 클랜 이름 또는 별명으로 사용하고 있었다.
- **[client-side hitscan](http://www.planetquake.com/rocketland/haqsau/hl1100.shtml) **: FPS 게임들의 모드(MOD) 중 무기를 발사하는 순간 클라이언트에서 판정 여부를 결정, 서버로 보내는 방식의 게임을 의미한다. 퀘이크3의 레일건처럼 즉각적인 판정이 필요한 무기들이 랙에 취약하다는 점 때문에 만들어진 것으로 보인다. 그렇지만 보안 문제로 인해서 정식 게임에는 거의 채택되지 않으며, 팬들이 만든 모드로만 존재한다. server-side [lag compensation](http://reiot.cafe24.com/archives/303) 으로 보안 문제를 해결할 수는 있지만 랙 자체를 해결할 수는 없다.
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/02/14/lag-compensation/">Lag Compensation</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-02-14T14:21:58+09:00" pubdate  data-updated="true" >Feb 14<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class='' src='http://boxcatstudio.files.wordpress.com/2009/07/thumb_Lag_compensation.jpg' width='' height='' alt='' title=''></p>

<p>P2P 게임의 난제는 바로 동기화이다. 이는 내가 지금 보고 있는 것은 다른 사람의 과거이며, 때문에 100% 완벽한 동기화는 불가능하다는 사실에서 출발하게 된다. 보통은 <a href="http://www.g-matrix.pe.kr/feature/multi/deadreckoning.htm">Dead Reckoning</a> 으로 적당히 해결하게 되는데, 모든 사람들이 공 하나만 바라보는 스포츠 게임처럼 동기화가 치명적인 게임에서는 이것만으로는 부족한 감이 있다. 카운터 스트라이크와 같은 Dedicated 방식의 게임에서는 누군가가 총을 쏠 경우 그 사람의 latency 를 감안해서 서버에서 타겟의 과거 위치에 대해서 계산해주는 <a href="http://www.ra.is/unlagged/">랙 보상</a> 기법을 지원해주는데, 이걸 과연 P2P 게임에 도입할 수 있을지가 의문이다.</p>

<p>완벽한 동기화를 고집한다면야 RTS게임에서 채택하는 synchronous P2P를 채택하면 되지만, 워크래프트3에서도 6:6밖에 안되는데 우리 수준에서 9:9+a 를 지원한다는 것은 사실상 불가능한 일. 그렇다고 디아블로2처럼 IDC수준으로 서버를 세팅해서 트래픽을 모두 감당한다는 건 너무 돈이 많이 들고&#8230; 과연 사악한 인터넷 환경에서 동기화도 잘 맞고 속도도 빠른 방식은 무엇일까? 고작 생각난다는 건 걔중에서 제일 빠르고 사양도 제법 좋은 놈의 컴퓨터에다가 서버 역할을 맡긴다는 건데, 이건 너무 구식이란 말이다. 흑.</p>

<p>이번 기회에 체계적으로 P2P와 동기화에 대해서 제대로 공부 좀 해야 겠다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/02/14/sc-failure/">Sc Failure&#8230;</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-02-14T04:43:28+09:00" pubdate  data-updated="true" >Feb 14<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a title="scfailure.JPG" class="imagelink" href="http://boxcatstudio.files.wordpress.com/2009/07/scfailure.JPG"><img class='' src='http://boxcatstudio.files.wordpress.com/2009/07/scfailure.JPG' width='' height='' alt='' title=''></a></p>

<p>sc create 를 이용하면 손쉽게 서비스를 설치할 수 있다는 사실은 잘 알려져 있다. 문제는 서비스가 시작할 때 문제가 발생할 경우 복구 방법에 대한 설정이다. 이 경우 error 파라미터를 잘 조정하면 될 것 같지만 실제로는 <a href="http://www.microsoft.com/technet/prodtechnol/windowsserver2003/ko/library/ServerHelp/0a658e97-51d5-4109-b461-a474c799964e.mspx">sc failure</a> 라는 다른 명령어를 사용해야 한다. (자세한 용법은 내일 삽질 후에 올리도록 하겠다)</p>

<blockquote><p>sc failure MyServiceName reset= 0 actions= &#8220;restart/5000/restart/5000/reboot/5000&#8221;</p></blockquote>

<p>위 명령은 서비스의 시작 실패시 처음과 두번째에는 5초후 서비스 재시작, 세번째까지 실패하면 시스템 리붓을 하라는 이야기다. actions 의 단위는 밀리초라는 점에 유의할 것. reset 파라미터는 일단 서비스가 성공적으로 뜬 경우 몇 초 후에 실패 횟수를 초기화하느냐인데 그냥 0 으로 두는 편이 무난할 것 같다. actions 파라미터에 run 이 들어갈 경우 command 파라미터를 지정해줘야 하며, reboot 이 들어갈 경우 reboot 파라미터에다가 메시지를 넣어주면 훗날 디버깅이 용이할 것이다. (단 actions 을 사용할 경우 항상 reset 을 지정해야 하는 것처럼 필수 사항은 아니다.)</p>

<p>참고로 이 명령은 오래된 MSDN 에서는 확인할 수 없다. 아무래도 최신 OS에서만 지원되는 것일지도?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/02/13/console-vs-service/">Console vs. Service</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-02-13T18:48:45+09:00" pubdate  data-updated="true" >Feb 13<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>지금까지는 command line 파라미터로 콘솔로 실행할 것인지 아니면 서비스로 실행할 것인지를 결정했다. 그러지 말고 아예 ConsoleRunner 와 ServiceRunner 를 외부 실행 파일로 만들어버리고 나머지 코드는 dll 로 만들어버리는건 어떨까?</p>

<pre><code>- 컨텐트 코드가 dll 이므로, TestRunner 에게 넘기기도 용이하다
- ServiceRunner 를 아예 서비스로 만들 수 있다.
- 서버 모듈을 자동으로 다운받아서 지정된 넘을 실행하는 수준의 서비스 관리가 가능해진다.
</code></pre>

<p>특히 3번처럼 호스트-서비스의 결집도가 너무 높은 상황(서비스를 다른 머신으로 옮기려면 해당 머신에 실행 파일을 복사하고 서비스를 설치하는 등의 과정을 거쳐야 한다는 점)을 해소할 수 있다는 점에서 왠지 괜찮을 것 같다는 생각을 해본다.</p>

<p>시간이 나면 WYSIWYG 방식의 서버-서비스 배치툴을 만들어서 그 결과를 XML로 추출해내어 배포하면 알아서 적당한 서비스 모듈을 다운받아 실행하는 그런 멋쥔 환경을 구축해보고 싶다. (그렇다. 서비스 설치 및 설정이 너무 귀찮아서 망상에 젖은 것 뿐이다. 그보다는 빨리 서버간 패치 시스템을 구축해야 할텐데&#8230; rsync가 제일 나은 툴일까나..)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/02/11/pilot-movie/">파일럿 무비</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2006-02-11T05:48:52+09:00" pubdate  data-updated="true" >Feb 11<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>오늘 한 달동안 작업한 테크니컬 데모의 중간 버전을 프리젠테이션을 위한 동영상으로 만들어서 (한달동안 두명이서 한 것이라는 코멘트를 잊지 말라는 당부와 함께) 미국에 넘겼다. 화질, 코덱, 용량, 업로드 같은 사소한 문제 때문에 삽질을 조금 했지만 어쨌든 무사히 넘길 수 있었다. 디자이너가 없어서 이전 버전의 리소스를 거의 그대로 사용했고, 카메라 연출 같은 건 신경도 쓰지 못해서 좀 아쉽긴 하다.</p>

<p>어쨌든 시간이 좀 남았길래 저녁 무렵 사원들을 모아놓고 완다와 거상 예약판의 부록으로 따라온 <a href="http://remains.x-y.net/tt/index.php?pl=83">이코와 완다의 파일럿 무비</a>를 함께 관람하는 시간을 가졌다. 게임을 모르는 사람도 있어서 파일럿 무비와 최종 게임 동영상도 함께 보면서 이야기를 나누었는데, 만족스럽진 않았지만 어쨌든 다음 갈 길에 대한 합의를 볼 수 있었다.</p>

<p>대체로 기능 구현만을 근근히 마친 프로토타입을 개발하고 이를 실제로 시연하면서 경영진에게 게임의 특징을 하나씩 보여주는 게 보통인데, 파일럿 무비의 경우 처음부터 동영상으로 편집할 것을 감안해서 <strong>목표로 하는 게임성을 선택적으로 구현</strong>할 수 있기에 꽤 매력적인 것 같다. 그리고 보여주고 싶은 것만 보여줄 수 있으므로 게임의 비전에 대한 공유가 프로토타입 시연보다 더욱 효과적일 것이다. (참고로, 시연자가 잘못하면 보는 사람이 뭘 봐야 할지 모르게 될 수도 있다 -_-) 시연하면서 다운될 것도 걱정하지 않아도 되고, 갓 들어온 신참 교육용으로도 무지 좋으며, 나중에 게임이 대박이 나면 부록 DVD에 이 영상을 넣을 수도 있다!!</p>

<p>앞으로 예상하는 개발 프로세스는 대충 이렇다. 일단 새 엔진을 이용한 테크니컬 데모를 통해서 기술적인 방향을 공유하고, 프로토 타입 대신 파일럿 무비를 제작해서 게임성을 공유한 다음, 실질적인 제작에 들어간다는 것이다. 그때까지는 어쩔 수 없이 하드 코딩을 해야겠지만, 개발 도중 의견 충돌 때문에 엎어버린다든지, 낙하산 때문에 배가 산으로 간다든지 하는 위험을 줄일 수 있을테니 어찌 선택하지 않을 수 있으랴&#8230;</p>

<p>더 관심이 있는 사람은 <a href="http://kwanny.ntreev.net/tt/index.php?pl=133&amp;ct1=-1">서관희님의 관련글</a>을 참고하시길&#8230;</p>

<p>ps. 동영상 편집의 세계는 멀고도 험하다.</p>
</div>
  
  


    </article>
  
  <nav class="pagination">
    <div>
      
        <a class="prev" href="/page/45/">&larr; Older</a>
      
      <a href="/blog/archives">Blog Archives</a>
      
      <a class="next" href="/page/43/">Newer &rarr;</a>
      
    </div>
  </nav>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/09/21/wordpress-to-octopress/">Wordpress To Octopress</a>
      </li>
    
      <li class="post">
        <a href="/2011/07/09/jquery-proven-performance-tips-tricks/">jQuery Proven Performance Tips &amp; Tricks</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/18/jquery-mobile-tip/">jQuery Mobile Tip</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/18/clienpad-appspot-com/">clienpad.appspot.com</a>
      </li>
    
      <li class="post">
        <a href="/2011/04/15/ant-cookbook/">Ant Cookbook</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/reiot">@reiot</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'reiot',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("reiot", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/reiot" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @reiot</a>
  
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - Ray Yun -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
    (function () {
      var disqus_shortname = 'reiot';
      
        
        var disqus_script = 'count.js'
      

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


  

  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</body>
</html>
