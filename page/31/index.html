
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Social Reiot</title>
  <meta name="author" content="Ray Yun">

  
  <meta name="description" content="얼랭으로 만든, 가장 단순한 UDP Echo 서버와 클라이언트는 이렇게 생겨먹었다. (워드프레스에서 들여쓰기가 자꾸 날아가는 버그가 있으므로, 귀찮아서 고치지는 않겠다.) 123456789101112131415-module(udp_server).-compile(e...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://reiot.com/page/31/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Social Reiot" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header role="banner"><hgroup>
  <h1><a href="/">Social Reiot</a></h1>
  
    <h2>Social Game Developer wandering in strange dungeon.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:reiot.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/01/19/erlangotp-udp-server/">Erlang/OTP UDP Server</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2009-01-19T08:34:36+09:00" pubdate  data-updated="true" >Jan 19<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>얼랭으로 만든, 가장 단순한 UDP Echo 서버와 클라이언트는 이렇게 생겨먹었다. (워드프레스에서 들여쓰기가 자꾸 날아가는 버그가 있으므로, 귀찮아서 고치지는 않겠다.)</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="o">-</span><span class="n">module</span><span class="p">(</span><span class="n">udp_server</span><span class="p">).</span>
</span><span class='line'><span class="o">-</span><span class="n">compile</span><span class="p">(</span><span class="n">export_all</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="n">init</span><span class="p">(</span><span class="n">ServerPort</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="n">Sock</span><span class="p">}</span> <span class="o">=</span> <span class="nl">gen_udp:</span><span class="n">open</span><span class="p">(</span><span class="n">ServerPort</span><span class="p">,[</span><span class="n">binary</span><span class="p">,</span><span class="n">inet</span><span class="p">]),</span>
</span><span class='line'><span class="n">loop</span><span class="p">().</span>
</span><span class='line'>
</span><span class='line'><span class="n">loop</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;server_loop~n&quot;</span><span class="p">),</span>
</span><span class='line'><span class="n">receive</span>
</span><span class='line'><span class="p">{</span><span class="n">udp</span><span class="p">,</span> <span class="n">Sock</span><span class="p">,</span> <span class="n">ClientIP</span><span class="p">,</span> <span class="n">ClientPort</span><span class="p">,</span> <span class="n">Packet</span> <span class="p">}</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;~p:~p ==&gt; ~p~n&quot;</span><span class="p">,[</span><span class="n">ClientIP</span><span class="p">,</span><span class="n">ClientPort</span><span class="p">,</span><span class="n">Packet</span><span class="p">]),</span>
</span><span class='line'><span class="n">ok</span> <span class="o">=</span> <span class="nl">gen_udp:</span><span class="n">send</span><span class="p">(</span><span class="n">Sock</span><span class="p">,</span><span class="n">ClientIP</span><span class="p">,</span><span class="n">ClientPort</span><span class="p">,</span><span class="n">Packet</span><span class="p">),</span>
</span><span class='line'><span class="n">loop</span><span class="p">()</span>
</span><span class='line'><span class="n">end</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="o">-</span><span class="n">module</span><span class="p">(</span><span class="n">udp_client</span><span class="p">).</span>
</span><span class='line'><span class="o">-</span><span class="n">compile</span><span class="p">(</span><span class="n">export_all</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="n">init</span><span class="p">(</span><span class="n">ServerPort</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="n">Sock</span><span class="p">}</span> <span class="o">=</span> <span class="nl">gen_udp:</span><span class="n">open</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
</span><span class='line'><span class="nl">gen_udp:</span><span class="n">send</span><span class="p">(</span><span class="n">Sock</span><span class="p">,</span><span class="s">&quot;localhost&quot;</span><span class="p">,</span><span class="n">ServerPort</span><span class="p">,</span><span class="s">&quot;Hello World!&quot;</span><span class="p">),</span>
</span><span class='line'><span class="n">loop</span><span class="p">().</span>
</span><span class='line'>
</span><span class='line'><span class="n">loop</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;waiting response...~n&quot;</span><span class="p">),</span>
</span><span class='line'><span class="n">receive</span>
</span><span class='line'><span class="p">{</span><span class="n">udp</span><span class="p">,</span> <span class="n">Peer</span><span class="p">,</span> <span class="n">PeerIP</span><span class="p">,</span> <span class="n">PeerPort</span><span class="p">,</span> <span class="n">Packet</span> <span class="p">}</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;~p:~p ==&gt; ~p~n&quot;</span><span class="p">,[</span><span class="n">PeerIP</span><span class="p">,</span><span class="n">PeerPort</span><span class="p">,</span><span class="n">Packet</span><span class="p">])</span>
</span><span class='line'><span class="n">after</span> <span class="mi">1000</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;timeout..~n&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">end</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>여기에서 바로 OTP로 만들겠다고 뛰어들었다가 삽질을 한 후,  <a href="http://www.trapexit.org/Building_a_Non-blocking_TCP_server_using_OTP_principles">Building_a_Non-blocking_TCP_server_using_OTP_principles</a> 와 <a href="http://erlrtpproxy.googlecode.com/svn-history/r19/trunk/rtpproxy.erl">구글에서 검색한 gen_udp 예제</a>을 참고해서 겨우 성공한 게 다음의 코드이다.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="o">-</span><span class="n">module</span><span class="p">(</span><span class="n">udp_otp_server</span><span class="p">).</span>
</span><span class='line'><span class="o">-</span><span class="n">compile</span><span class="p">(</span><span class="n">export_all</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="o">%</span> <span class="n">stand</span><span class="o">-</span><span class="n">alone</span> <span class="n">server</span> <span class="n">version</span>
</span><span class='line'><span class="n">start</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">gen_server:</span><span class="n">start</span><span class="p">({</span><span class="n">local</span><span class="p">,</span> <span class="o">?</span><span class="n">MODULE</span><span class="p">},</span> <span class="o">?</span><span class="n">MODULE</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]).</span>
</span><span class='line'>
</span><span class='line'><span class="o">%</span> <span class="n">supervision</span> <span class="n">tree</span> <span class="n">version</span>
</span><span class='line'><span class="n">start_link</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">gen_server:</span><span class="n">start_link</span><span class="p">({</span><span class="n">local</span><span class="p">,</span> <span class="o">?</span><span class="n">MODULE</span><span class="p">},</span> <span class="o">?</span><span class="n">MODULE</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]).</span>
</span><span class='line'>
</span><span class='line'><span class="n">init</span><span class="p">([])</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="n">process_flag</span><span class="p">(</span><span class="n">trap_exit</span><span class="p">,</span><span class="kc">true</span><span class="p">),</span>
</span><span class='line'><span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="n">Sock</span><span class="p">}</span> <span class="o">=</span> <span class="nl">gen_udp:</span><span class="n">open</span><span class="p">(</span><span class="mi">1111</span><span class="p">,[</span><span class="n">binary</span><span class="p">,</span><span class="n">inet</span><span class="p">]),</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;udp server started...~n&quot;</span><span class="p">),</span>
</span><span class='line'><span class="p">{</span><span class="n">ok</span><span class="p">,</span><span class="mi">0</span><span class="p">}.</span>
</span><span class='line'>
</span><span class='line'><span class="n">handle_call</span><span class="p">(</span><span class="n">Request</span><span class="p">,</span> <span class="n">From</span><span class="p">,</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;~p~n&quot;</span><span class="p">,[</span><span class="n">Request</span><span class="p">]),</span>
</span><span class='line'><span class="p">{</span><span class="n">noreply</span><span class="p">,</span><span class="n">State</span><span class="p">}.</span>
</span><span class='line'>
</span><span class='line'><span class="n">handle_cast</span><span class="p">(</span><span class="n">_Msg</span><span class="p">,</span><span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;handle_cast(~p)~n&quot;</span><span class="p">,</span><span class="n">_Msg</span><span class="p">),</span>
</span><span class='line'><span class="p">{</span><span class="n">noreply</span><span class="p">,</span> <span class="n">State</span><span class="p">}.</span>
</span><span class='line'>
</span><span class='line'><span class="o">%%</span> <span class="n">udp</span> <span class="n">message</span> <span class="n">should</span> <span class="n">be</span> <span class="n">handled</span> <span class="n">here</span>
</span><span class='line'><span class="n">handle_info</span><span class="p">({</span><span class="n">udp</span><span class="p">,</span><span class="n">Sock</span><span class="p">,</span> <span class="n">ClientIP</span><span class="p">,</span> <span class="n">ClientPort</span><span class="p">,</span> <span class="n">Packet</span><span class="p">},</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;~p:~p ==&gt; ~p~n&quot;</span><span class="p">,[</span><span class="n">ClientIP</span><span class="p">,</span><span class="n">ClientPort</span><span class="p">,</span><span class="n">Packet</span><span class="p">]),</span>
</span><span class='line'><span class="n">ok</span> <span class="o">=</span> <span class="nl">gen_udp:</span><span class="n">send</span><span class="p">(</span><span class="n">Sock</span><span class="p">,</span><span class="n">ClientIP</span><span class="p">,</span><span class="n">ClientPort</span><span class="p">,</span><span class="n">Packet</span><span class="p">),</span>
</span><span class='line'><span class="p">{</span><span class="n">noreply</span><span class="p">,</span> <span class="n">State</span><span class="p">}</span>
</span><span class='line'><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">handle_info</span><span class="p">(</span><span class="n">_Info</span><span class="p">,</span><span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;handle_info~n&quot;</span><span class="p">),</span>
</span><span class='line'><span class="p">{</span><span class="n">noreply</span><span class="p">,</span> <span class="n">State</span><span class="p">}.</span>
</span><span class='line'>
</span><span class='line'><span class="n">terminate</span><span class="p">(</span><span class="n">_Reason</span><span class="p">,</span><span class="n">N</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nl">io:</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;stopping...~n&quot;</span><span class="p">),</span>
</span><span class='line'><span class="n">ok</span><span class="p">.</span>
</span><span class='line'><span class="n">code_change</span><span class="p">(</span><span class="n">_OldVsn</span><span class="p">,</span><span class="n">N</span><span class="p">,</span> <span class="n">_Extra</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">ok</span><span class="p">,</span><span class="n">N</span><span class="p">}.</span>
</span></code></pre></td></tr></table></div></figure>


<p>핵심 요지는, UDP 메시지는 handle_call 이나 cast 가 아니라, handle_info에서 처리해야 한다는 점이다. 요즘 <strong>업.무.가. 바.빠.서.</strong> 얼랭을 3주 정도 못봤는데 또 서서히 기억이 소멸하기 시작했다. OTP에서는 함수의 리턴값 규칙을 정말 잘 맞춰야 하는 관계로, 다음 번부터는 gen_server 템플릿 하나 정도는 갖고 시작해야겠다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/01/12/teamcide/">Teamcide</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2009-01-12T09:04:43+09:00" pubdate  data-updated="true" >Jan 12<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div>

[caption id=&#8221;&#8221; align=&#8221;alignnone&#8221; width=&#8221;478&#8221; caption=&#8221;Micro management (from conveniencebits.com)&#8221;]<a href="http://conveniencebits.com/2008/07/25/micromanaging-is-positive/"><img class='' src='http://conveniencebits.com/pics/micromanage.jpg' width='' height='' alt='Micromanagement' title='Micromanagement'></a>[/caption]

</div>


<div>Teamcide는 최근에 구독을 시작한 [코딩 호러](http://www.codinghorror.com/)의 [마이크로매니지먼트 좀비](http://www.codinghorror.com/blog/archives/001205.html)라는 글에서 발견한 7가지 팀관리의 안티 패턴이다. 알고 보니 피플웨어에서 소개된 이야기라고 해서 책을 찾아보려고 했는데, 어딘가에 쳐박혀 있는지 책이 보이지 않아, [일본어 웹문서 번역](http://translate.google.com/translate?prev=&hl=ko&ie=UTF-8&u=http://yuuntim.fc2web.com/chapter20.html&sl=auto&tl=ko&history_state0=)을 통해서 짤막하게만 정리해본다.</div>


<div>

    - 자기 방어적인 관리(Defensive Management)
    - 관료주의(Bureaucracy)
    - 팀원들을 여기 저기로 흩어 놓아서, 이동 거리를 멀게 하기(Physical Separation)
    - 한 명에게 여러 가지 작업을 시키기(Fragmentation of People&#8217;s Time)
    - 납기일을 위해 품질을 희생하기(Quality Reduction of the Product)
    - 무의미한, 또는 가짜 데드라인(Phony Deadlines)
    - 파벌이 무서워서 프로젝트 종료 후 팀을 해체하기(Clique Control)

</div>


<p>거리 이야기는 이제 상식 수준이고, 마지막 파벌 이야기는 좀 비현실적이긴 한데, 가짜 데드라인 같은 이야기는 나도 종종 유혹을 느꼈기에, 이 시간을 빌어 씁쓸한 반성을 해본다.</p>

<p>때로는 빠른 의사 결정과 그에 따른 무한한 책임을 지는 <a href="http://seoworld.net/tt/261">잡스 같은 카리스마적인 독재자</a>와 일해보고 싶기도 하다. 다만, 거의 무개념 폭군이라는 이미지가 강한 초기의 잡스보다는, 이제 필 쉴러 아저씨에게 키노트 진행을 양보(?)한 최근의 잡스가 더 나을 것 같다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/01/08/redmine/">Redmine</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2009-01-08T07:36:12+09:00" pubdate  data-updated="true" >Jan 8<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.redmine.org/screenshots/gantt.png"><img class='' src='http://www.redmine.org/screenshots/gantt_tn.png' width='' height='' alt='' title=''></a></p>

<p><a href="http://bitnami.org/stack/mantis">bitnami mantis</a> 는 한글이 안되고, trac은 뭔가 플러그인 설치가 귀찮아서, 아<a href="http://www.redmine.org/wiki/redmine/Features">름다운 간트 차트</a>도 지원하는  <a href="http://bitnami.org/stack/redmine">bitnami redmine </a>을 써보기로 했다. (<a href="http://twiny.tistory.com/1676">twiny 님</a> 감사~)</p>

<p>평소대로라면 최신 버전(0.8)을 위해 ruby 와 rails 부터 설치했겠지만, 이런 삽질은 꿈도 못 꿀 정도로 바빠서, 그냥 0.7 버전을 마음 편하게 깔아버렸다. 한글 문제(이슈, 파일 업로드)는 전혀 없었고, SMTP와 https svn 저장소 연결만 남은 상태인데, 각각 한번씩 해보고 연결이 안되길래 과감하게 포기했다. 참고로, <a href="http://www.redmine.org/wiki/redmine/ThemeBasecamp">베이스캠프 테마</a>를 설치하면 mantis 보다 100배 미려한 화면을 볼 수 있다. :)</p>

<p>아쉬운 점이라면 위키 포맷이 익숙치 않은 textile 이라는 점과, 이미 <a href="http://www.gtdinbox.com/">GTDinbox </a>에 적응해버렸다는 정도. 그러고보니 GTD를 지원하는 이슈 관리 시스템은 없을까나~</p>

<p>ps. 드디어 SQL 2005 스키마의 개별 객체들을 <a href="http://www.sqlservercentral.com/articles/Administering/2896/">각각 SQL 로 추출해주는 방법</a>을 찾았다. 소스 코드르 다운받아서 약간만 수정해주면 SQL  스키마의 버전 관리는 끝!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/01/03/fault-tolerant-system/">Fault Tolerant System</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2009-01-03T07:33:04+09:00" pubdate  data-updated="true" >Jan 3<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>얼랭스터디에서 얼랭/OTP 의 무정지성(Fault Tolerance)에 대해서 소개하자,</p>

<blockquote><p>&#8220;문제가 생긴 서버를 되살리는 것도 좋은데, 메모리상의 중요한 데이터들을 어떻게 다른 서버로 안전하게 전송할 수 있는가?&#8221;</p></blockquote>


<p>라는 질문이 나왔다. 여기에 대해서 가장 먼저 떠오른 생각은</p>

<blockquote><p>&#8220;클라이언트와의 연결은 어차피 날아가는 거고, 과연 그 서버 안에 있는 데이터까지 살릴 만한 가치가 있는 것일까?&#8221;</p></blockquote>


<p>라는 것이었다. 일반적인 C++ 서버의 경우 오류로 인한 서버의 크래시가 발생했을 때 당연히 SEH 를 이용해서 그 순간을 캡처해낼 수는 있다. 그러나 문제는 그때의 메모리가 정말 DB에 저장하거나 다른 머신으로 보낼 만큼 신뢰성이 있는가? 하는 것이다. 치명적인 오류가 발생한지 시간이 좀 지나서, 이미 많은 데이터가 오염되었을 수도 있기 때문에, 보통은 그냥 데이터는 버리고 서버를 내려버리는 것이 정상이다.</p>

<p>그러다보니 무정지성이라는 의미에 대해서 다시금 생각하게 되었다. 그래서, 위키피디아에서 <a href="http://en.wikipedia.org/wiki/Fault-tolerant_system">Fault Tolerant System</a>을 검색해보니 다음과 같이 나와 있었다.</p>

<blockquote><p>- No single point of failure<br/>    - No single point of repair<br/>    - Fault isolation to the failing component<br/> - Fault containment to prevent propagation of the failure<br/>  - Availability of reversion modes</p></blockquote>


<p>즉, 하나 죽었다고 전체 시스템이 마비된다든지, 복구하다가 바보가 된다든지, 실패한 모듈 때문에 나머지 시스템이 동작하지 않는 등의 현상이 없어야 된다는, Five Nine(99.999%) 수준의 가용성(Availability)에 대한 이야기이지 완벽하게 모든 것이 재가동되어야 한다는 이야기는 아니었다. DB에도 오류가 생기면 롤백을 하듯이, MMO의 서버 시스템 역시 어느 수준으로 롤백을 하더라도 나머지 사용자들이 모를 정도로만 감춰줘도 사장님한테 이쁨받기에 충분한 수준인 것이다.</p>

<p>그런데, &#8221;<strong>진정한 변수</strong>&#8220;가 없는 얼랭에서는 - <em>정말 에러가 발생한 직후라는 확신이 든다면 </em>- 아래와 같은 코드를 이용해서, 오류를 다른 모듈로 확산시키지 않고도 로컬 코드 레벨에서 롤백이 가능하긴 하다.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">loop</span><span class="p">(</span> <span class="nx">OldState</span> <span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="k">try</span> <span class="nx">handle_something</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span><span class="nx">OldState</span><span class="p">)</span> <span class="nx">of</span>
</span><span class='line'><span class="p">{</span> <span class="nx">ok</span><span class="p">,</span> <span class="nx">NewState</span> <span class="p">}</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nx">loop</span><span class="p">(</span><span class="nx">NewState</span><span class="p">)</span>
</span><span class='line'><span class="k">catch</span>
</span><span class='line'><span class="p">{</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">-&gt;</span>
</span><span class='line'><span class="nx">loop</span><span class="p">(</span><span class="nx">OldState</span><span class="p">)</span>
</span><span class='line'><span class="nx">end</span>
</span><span class='line'><span class="nx">end</span><span class="p">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>여기에 얼랭/OTP의 슈퍼비전 트리가 결합하면 책에서 주장하는 것처럼 Nine Nine(99.9999999%)의 가용성이 보장된다고 하니, 초반에 생각했던 언어적 분산 네트워킹의 지원 보다는 이쪽이 더 매력적인 기능이 아닐까 싶다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/28/networking-metaphore/">Networking Metaphor</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-12-28T08:39:55+09:00" pubdate  data-updated="true" >Dec 28<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>[caption id=&#8221;&#8221; align=&#8221;aligncenter&#8221; width=&#8221;500&#8221; caption=&#8221;http://www.flickr.com/photos/jasoncross/1260110610/&#8221;]<a href="http://www.flickr.com/photos/jasoncross/1260110610/"><img class='' src='http://farm2.static.flickr.com/1304/1260110610_4e110ad3f5.jpg' width='' height='' alt='' title=''></a>[/caption]</p>

<p>네트워크 프로그래머가 클라이언트 서버간 통신(혹은 P2P 통신)을 바라보는 메타포에 대해서 갑자기 궁금해졌다.</p>

<p>가장 흔한 개념은 바로 패킷이다. 만약 컨텐트 코드에서 Packet 이나 Command, Message 같은 객체와, Send 와 Receive 같은 함수가 노출되어 있다면, 그걸 만든 사람은 데이터 통신을 바이트의 전송이라는 개념으로 인지하는 것이 아닐까? 데이터를 던지고 받는다는 개념의 네트워킹은 아마도 귀찮은 하드코딩 노가다 작업일 확률이 높다. 흐흐.</p>

<p>조금 높은 레벨(?)로 올라간다면 원격 함수 호출(RPC)이 있겠다. 무언가를 상대방에게 요청(request)하면, 상대방은 그걸 처리한 후 성공이나 실패 같은 결과(response)를 보내준다. 이런 메타포에서는 동기/비동기라든지, 타임아웃 같은 처리들이 따라오게 된다. 만약 네트워크로 무언가를 요청하는 행위가 함수 호출 인터페이스처럼 잘 래핑되어 있다면, 대략 1초간 으쓱해도 무방하겠다. :P</p>

<p><img class='' src='http://ou800doc.caldera.com/en/SDK_netapi/graphics/rpc.gif' width='' height='' alt='' title=''></p>

<p>추가적으로, 결과가 없는 요청은 특별히 이벤트(event) 혹은 통지(notification)라는 메타포라고 부를 수 있겠다. 사실 매번 렌더링을 해야 하는 게임 클라이언트나, 항상 빠른 응답 속도를 보장해야 하는 서버가 동기적 요청을 하는 일은 정말 드문 경우이다. 이런 이유로 비동기적인 통신이 대부분이기 때문에 적당히 현재 상황을 알려주고 잊어버리고 있다가, 혹시나 결과(보통은 에러)가 오면 음..그런가? 하고 처리하는 느낌으로 코드를 만들 때가 있다. 시간이 나면 Notify 같은 이름들이 있는지 한번 체크해보시라.</p>

<p>위에 나온 것들은 대체로 즉각적인 처리를 필요로 하는 반면, 어떤 이벤트들은 시간축으로 늘어질 때가 있다. 무슨 말이냐 하면 이동, 공격, 물리 같이 float 단위의 정밀한 사건들은 공간 뿐만 아니라 시간과도 밀접한 관계가 있기 때문이다. 이런 상황을 아름답게 처리하려면, 받는 족족 무언가를 처리하기보다는, 데이터를 시간순으로 쌓아두고 예측, 보간을 통해 그럴듯하게 보여줄 필요가 있다. 이런 걸 보통 동기화(synchronization) 또는 복제(replication)이라고 부른다. 보통 이런 코드들은 네트워크를 넘어선 상위 로직 레벨에 존재하는 경우가 많은데, 어떤 네트워크 라이브러리들은 이런 수준도 알아서 잘 처리하기도 한다.</p>

<p>[caption id=&#8221;&#8221; align=&#8221;aligncenter&#8221; width=&#8221;300&#8221; caption=&#8221;from http://www.problogger.net&#8221;]<a href="http://www.problogger.net"><img class='' src='http://www.problogger.net/wp-content/uploads/2007/08/rss-buttons.gif' width='' height='' alt='' title=''></a>[/caption]</p>

<p>좀 억지스럽긴 하나, 이메일이나 RSS 등에서 주로 쓰이는 발행(publish)과 구독(subscribe)이라는 메타포는 어떨까?  채팅 채널 같이 지속적인 이벤트가 간간히 발생하는 논리적인 영역에 참가하면, 꾸준히 어떤 이벤트들이 날아오게 된다. 사람들이 바글바글 거리는 지역에 발생하는 수많은 이벤트들을 클라이언트에게 알려줄 때 즉각적인 브로드캐스팅 대신, 이런 개념을 사용한다면 필터링을 통해 트래픽 절감의 효과를 손쉽게 얻을 지도 모르겠다. 후후.</p>

<p>이렇게 단순한 이야기를 현학적으로 어렵게 쓴 이유는, 사실 며칠 전 XML로 프로토콜을 정의하고 코드를 만드는 걸 한번 해볼까 하고, <a href="http://www.codalogic.com/lmx/xsd-overview.html">스키마 튜토리얼</a>을 살펴 보다가, 프로토콜은 XML이 아니라 XSD에 들어가는게 맞지 않냐는 생각이 들어서였다. 물론 XSD도 사실 XML이니까, 쓸데없는 고민 없이 그냥 해도 될 것 같기도 한데&#8230; 그러다보니 또 굳이 요즘 세상에 트래픽이 많은 게임이 아니라면 XML 프로토콜을 쓰고, 파싱 및 검증을 XSD로 하는 것도 괜찮지 않냐는 망상에서 허우적 거리고 있다.</p>

<p><img class='' src='http://upload.wikimedia.org/wikipedia/en/3/32/CheckEmail.png' width='' height='' alt='' title=''></p>

<p>또 한편으로는 클래스 다이어그램과 시퀀스 다이어그램으로 클라이언트/서버간 통신을 표현하고, 그걸 파싱해서 각종 RPC 함수들의 골격을 만들어내면 인생이 좀 수월해지지 않을까 하는 생각도 든다. 물론 프로토콜이 바뀔 때에 기존 코드가 날아가지 않도록 코드 제너레이터를 잘 짜야겠지.</p>

<p>글 시작과 끝의 주제가 다른 걸로 봐서, 아무래도 요즘 스트레스를 많이 받나 보다. ㅋㅋ</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/21/memory-wall/">Memory Wall</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-12-21T18:56:57+09:00" pubdate  data-updated="true" >Dec 21<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p> </p>

<p><img class='' src='http://lh6.ggpht.com/_nOquiran9-s/Rur1hp0B7kI/AAAAAAAAALI/rjrpIObJtMo/IMG_1987.JPG' width='' height='' alt='' title=''></p>

<p>9.11 Memory Wall</p>

<p>구글에서 memory wall 을 검색하면 위와 같은 사진들이 나온다. 아마도 기억과 회상을 위한 그림이나 사진, 메모들을 붙이는 벽을  memory wall 또는 remembrance wall 이라고 부르는 모양이다.</p>

<p>훗날 128 코어의 시대가 도래하면 얼랭 게임 서버가 혹시 대세가 되지는 않을까 했는데, 벌써부터 <a href="http://minjang.egloos.com/2166350">멀티 코어에도 메모리 장벽이라는 한계가 있다는 이야기</a>가 솔솔 들린다. 이로 인해 <a href="http://devnote.net/86">8-16코어를 넘어서기가 힘들다고 해서 널티코어 효과(Nulticore Effect)</a>라고 부른다니.. <a href="http://xeraph.egloos.com/4781141">xeraph님이 GG하신 게</a> 정답이지도? :)</p>

<p>보통 물리적/논리적으로 서버 프로세스가 늘어날수록 디버깅이 어려워지고, 관리 비용도 증가한다고 한다. 그래서 요즘은 분산을 고려해서 모듈끼리도 메시지 통신을 하도록 한 후, 개별 모듈들을 최대한으로 단순하게 구현하려고 노력중이다. 대신 메시지를 만드는게 여간 귀찮은 일이 아니라서, 언제 시간이 나면 후딱 XML 메시지 같은 걸 만들어볼까 싶기도 한데&#8230; 그럴 여유도 없을 뿐더러, 만들어도 같이 감동해줄 전우가 없다는 게 안타깝다. 크흑.</p>

<blockquote><p> </p></blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/09/smart-people/">Smart People</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-12-09T06:55:20+09:00" pubdate  data-updated="true" >Dec 9<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class='' src='http://pds9.egloos.com/logo/200804/01/93/f0025793.jpg' width='' height='' alt='' title=''></p>

<pre><code>- [열심히 하는 사람 보다는, 잘하는 사람이 되어라.(Don't Work Hard, Work Well)](http://agile.egloos.com/2897508)
- 전문 직장인이 되기 보단, 전문 직업인이 되어라.
</code></pre>

<p>예전에 모시던 분들이 즐겨 하시던 말들이다. 과거의 무능하고 나태했던 내 모습을 곳곳에서 찾아낼 때마다, 혹시나 나도 곧 그렇게 무뎌질까 두렵다.</p>

<p>칼날을 더욱 날카롭게 세우기 위해서, 이번 달부터 새벽 영어 회화를 다시 시작했다. 영어 강사에게 리만 브라더스가 왜 나쁜지를, 왜 미국산 소고기가 나쁜지를 설명하기가 여간 힘들지 않았다. 역시나 함께 듣는 이십대 중반의 젊은 친구들은 정치에 관심이 없었다는 것도 확인했다. 덕분에 의도하지 않게 근무 시간이 한 시간 넘게 늘어나 버렸는데, 나보다 항상 더 일찍 나와서 일하는 사람도 있어서 깜짝 놀랬다. 역시 출근 순서가 회사의 실질적 직급 순라는 이야기가 맞는 걸까 하핫 :)</p>

<p>그리고, 스마트한 회사 친구들과 얼랭 대결(?) 프로젝트도 바야흐로 가동되었다. 주사위를 굴려 2:2 로 짝을 지어 모종의 코딩 대결을 펼치려고 하는 중인데, 역시나 한 마디만으로 열길 사람 속도 알아듣는 친구들이라서 기대가 된다. 반짝이는 후학들의 걸림돌이 되지 않기 위해서라도, 집에서 열심히 예습복습을 해야것다. 클클.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/16/prepare-the-battle/">Prepare the Battle</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-16T23:59:35+09:00" pubdate  data-updated="true" >Nov 16<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://minjang.egloos.com/2137737"><img class='' src='http://www.tesionline.com/intl/img/focus/asian-crisis.jpg' width='' height='' alt='' title=''></a></p>

<p><a href="http://minjang.egloos.com/2137737">DHL도 미국에서 철수하고, SUN, 구글, HP, 이베이, 아마존 같은 유수 기업들이 감원을 하고 있고,</a> 실리콘밸리에는 <a href="http://mushman.co.kr/2690827">총격 사고</a>까지 나고 있는데, 펀더멘탈이 그렇게나 튼튼하다는 바이 코리아의 게임 회사들은 어떨게 될까? 최대한 네가티브하게 예측해서 그게 운좋게 맞아 떨어지면 나중에 1g 정도 우쭐하려나 싶어, 최악의 경우만을 가정해 보겠다.</p>

<p>조만간 닥쳐온다는 10년짜리 세계적 불황에 대해 조금이라도 고려하고 있는 회사라면, 슬슬 군살을 빼기 시작할 것이다. 가장 간단한 전기 절약 운동에서부터 연봉 동결, 유휴 인력 정리 해고, 싹수 없는 프로젝트의 조기 캔슬에 이르기까지 다양한 방식의 근검절약을 시행할 것이다. 최근의 중대형 회사들은 개발자들을 싹쓸이한 후, 동시에 5-10개의 프로젝트를 돌리는 것이 대세인데, 게임이란 것이 50% 의 성공률 완성율도 보장할 수 없는게 현실이다. 즉 인건비만 년간 50-100억 정도 까먹는다는 걸 감안해보면, 어떤 CEO도 이런 유혹을 이겨낼 수 없을 게다. 만약 이게 현실이 된다면 조만간 인력 시장에 고급 인력들이 가득하게 되고, 그러면 <a href="http://reiot.cafe24.com/2008/10/19/pareto-principle/">회사에서 어울렁 더울렁 웹서핑하면서 버티던 베짱이들</a>의 목은 더욱 위태로워질 것이다. :P</p>

<p>또, 부분 유료화라는 비지니스 모델이 기나긴 불황의 터널 속에서는 오히려 악재가 될 수도 있다. 내수 침체로 청소년들의 지갑이 얇아지면 그냥 무료 상태로만 게임을 즐길 가능성도 배제할 수 없으니까 말이다. 혹자는 IMF 시절을 예로 들면서, 경기가 침체될 수록 사람들이 값싼 놀이 수단을 찾기 때문에 게임 쪽은 괜찮을 거라고 하고, 나도 그렇게 믿고 싶지만.. 마찬가지로 이유로 해외 수출에 의존하는 모델도 힘들어질 수 있다. 이미 불황을 겪고 있는 일본이나, 중국 같은 이머징 마켓을 제외하면, 다들 배고픈데 비싼 돈을 주고 우리 나라 게임을 수입해와서 서비스 할 이유도 없지 않을까. 단 쥐새끼가 계속 삽질을 해대면 계속 원화 가치가 떨어져서 그때쯤이면 비싼 돈이 아닐 수도 있으니, 어째 고마워해야 할지도 모르겠다.</p>

<p><img class='' src='http://img148.imageshack.us/img148/9008/bf2142billboard2ha4.jpg' width='' height='' alt='' title=''></p>

<p>또 불황이 길어지면 사람들이 더이상 컴퓨터를 업그레이드하지 않을 수도 있다. 즉 차세대 콘솔 수준의 높은 퀄리티의 그래픽 때문에 개발비를 투입하는 것보다는, 아이폰 게임이나 닌텐도의 Wii처럼 게임성에 올인하는 게 더 현명한 전략일 수도 있겠다. 이런 걸 감안해보면 저사양에서도 잘 돌아가면서, 전세계 글로벌하게 광고를 수주해서 게임 내에서 보여주는 방식으로 (게이머들에게 금전적인 부담없이) 수익을 벌어들이는 모델이 가장 좋지 않을까 싶기도 하다. 광고 한번 보면 한 시간 플레이가 가능해요! 아이템도 하나 드려요! 뭐 이런 방식이 될까나..</p>

<p>그렇다면 대한민국만큼 공돌이들이 하류 인생인 나라도 드물테니, 해외로 나가서 새로운 미래를 개척해보면 어떨까?  아마 그때 쯤이면 환급받을 국민 연금도 똥값이 되고, 그나마 현금 보유한 걸 달러로 환전하면 50% 로 줄어들어 버릴 것 같다. 그나마 내수가 튼튼한 나라로 이민가서 후딱 적응하는 게 나을 수도 있겠지만, 이 불황이란 게 전지구적인 규모라서 그 나라의 게임 회사들이라고 영향을 받지 않으리란 보장이 없으니&#8230; 지금 후딱 나가서 신입으로 입사해도 시원찮을 판이다. (<a href="http://criburn.net/blog/jongs/entry/%EB%B8%94%EB%A6%AC%EC%9E%90%EB%93%9C-%EA%B0%9C%EB%B0%9C%EC%9E%90-Jeff-Kang%EA%B0%95%ED%98%95%EC%9B%90%EC%94%A8%EA%B0%80-%EB%A7%90%ED%95%98%EB%8A%94-%EA%B0%9C%EB%B0%9C-%ED%8F%AC%EC%9D%B8%ED%8A%B8%EC%99%80-%EB%82%B4-%EC%83%9D%EA%B0%81">블리자드는 56살짜리 신입 디자이너도 뽑는다</a>니, 두려워하지 말지어다)</p>

<p>이래서, 회사를 옮기려고 하는 지인들에게 무조건 100억 이상의 매출을 가진 회사로 옮기라고 권했는데, 어째 다들 힘든 모양이다. 올해를 넘기면 새 회사에서 실력을 발휘해 보기도 전에 밀려날 지도 모르니 어서 빨리 취업하시기 바라며, 결국 중요한 건 자신의 내공을 재테크 하고, 회사에서 열심히 일해서 낙오 그룹에 끼이지 않는 방법 밖에 없다. 그래도 안되면 핀란드 가서 임업을 하든, 뉴질랜드에서 목축업을 해야 될지도&#8230; ㅠ_ㅠ</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/15/three-rules-for-database-work/">Three Rules for Database Work</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-15T18:52:46+09:00" pubdate  data-updated="true" >Nov 15<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.openmaru.com/273"><img class='' src='http://www.openmaru.com/attach/1/1046597520.jpg' width='' height='' alt='' title=''></a>
<em><a href="http://www.openmaru.com/273">하루에 10만을 채우는 게임</a>은 이런 게 이벤트가 되는구나.</em></p>

<p>오늘자 코드 프로젝트에 올라온 <a href="http://www.codeproject.com/KB/architecture/DBTool.aspx">DBTool</a>의 근간이 된, <a href="http://odetocode.com/Blogs/scott/archive/2008/01/30/11702.aspx">데이터베이스를 갖고 놀 때의 세가지 룰</a>은 생각보다 간단했다.</p>

<h3>Never use a shared database server for development work.</h3>

<p>예전에는 (rails 스타일의) development-test-production 의 3단계 구분법을 사용했다. DBA와 서버 프로그래머는 dev DB에서 열심히 뒤집어 엎어도, test DB에 연결된 다른 프로그래머들이나 테스터들은 안정적으로 사용할 수 있고, 실제 서비스는 production 데이터베이스를 쓰게 된다는 거다.</p>

<h3>Always Have a Single, Authoritative Source For Your Schema</h3>

<p>DB 에 짧지만 단순한 나의 지론은, 레파지토리 어딘가에 무조건 전체 스키마+초기데이터를 담은 SQL 파일을 두고 버전 관리를 해야 한다는 거다. 소스 코드, 애셋들은 과거의 특정 시점의 스냅샷을 꺼내올 수 있는데, 유독 데이터베이스가 열외일 수는 없다고 본다.</p>

<p>또한 어차피 데이터베이스 패치를 해야 할 테니, create, alter로 가득찬 DB 패치 스크립트도 버전 관리해야 한다. test -> production 를 업그레이드할 때 모두 지우고 새로 만드는 만행을 할 수 없을테니, 아예 dev -> test 에서부터 미리 스크립트를 만들어서 테스트하면 정신 건강에 좋지 않겠냔 말이다. 처음에 언급한 DBTool 이 이런 걸 자동화해주는 모양이다.</p>

<h3>Always Version Your Database</h3>

<p>보통은 Config 테이블에다가 문자열로 데이터베이스 스키마 최종 변경일을 넣어두는 걸로 해결하고 있다. 그런데 아직 뭔가 변경이 잘 되었는지를 체크할 만한 테스트를 만들 능력은 안된다. 대체로 alter 든 drop 이든 서버가 뜰 때까지는 잘 모를것 같아서.. :)</p>

<p>이 외에도 무시무시하게 긴 <a href="http://www.ssw.com.au/ssw/Standards/Rules/RulesToBetterSQLServerDatabases.aspx">Better SQL Server Databases</a> 라는 규칙도 있는데 이건 좀 귀찮구나&#8230;.</p>

<p>추가:</p>

<pre><code>- 다른 글을 찾아 보니, 프로시저나 테이블 각각을 서로 다른 파일에 저장해서 관리하라는 말도 있다. 은근히 그럴듯한데?
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/15/kgc2008-2/">KGC2008(2)</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-15T06:38:11+09:00" pubdate  data-updated="true" >Nov 15<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class='' src='http://sirini.net/blog/data/diablo_3_3.jpg' width='' height='' alt='' title=''></p>

<p>컨셉 아트에서부터 모델링, 매핑에 이르는 모든 영역을 소화해낸다는 특급 제너럴리스트들로 구성된 디아블로3 배경팀의 아티스트는 <strong>&#8220;아트는 결국 게임을 위해서 존재한다&#8221;</strong>고 말씀하셨다.</p>

<p>파이프라인의 2단계에서부터, 텍스처도 없는 애셋을 게임에 올려서 테스트해볼 수 있어야 한다는 이야기를 그분도 좀 새겨 들으셨으면 싶다. 디테일이 지나쳐서 플레이어들에게 시각적 혼란을 주면 안되기 때문에 사진 텍스처 대신 손으로 그린다는 이야기도.</p>

<p>바닥 양탄자 색깔을 암묵적인 진행 방향으로 삼는다든지, 모든 디자이너들이 실시간으로 애셋들을 공유하되 거기에서 자신만의 커스터마이징을 거쳐서 항상 다르게 보이는 배경을 만든다든지, 3D 환경에서 랜덤맵 기반의 배경 그래픽을 만든다는 이야기들은 역시 블리자드 스케일! 이라는 인상을 받았다.</p>

<p>그나저나 먼저 다함께 스타일 가이드를 만들고, 컬러 스터디를 하고, 디자인 템플릿이 나오면 페인트오버 덧칠해서 돌려본다고 하니, 실컷 작업한 후 디렉터가 drop시키면 울면서 재작업한다던 이야기가 떠올라서 씁쓸했다. (어제 배씨 아저씨는 민주적으로는 타협과 협상의 결과가 나온다고던데, 이 아저씨는 직위 고하에 관계없이 브레인스토밍해서 최대한 아이디어를 살려 나간다고 하니, 이게 바로 국민성의 차이인가..)</p>

<p><a href="http://www.moven.com/en/home_moven.php">Moven</a> 이 고작 5천만원이라는 사실에 처음 경악했고 <em>(우리는 모캡 받은 후 그 결과를 넘겨 받는데 두 달이나 걸렸는데도  천오백만원이었는데..)</em>, 우리가 UBO에서 구현했던 게 Motion Library Based Character Simulation 에 근접한 기술이었다는데 순간 뿌듯했으며(물론 우린 더 파지 않아서 단순 Parameterized Blending 수준이었지만), 이걸 더 발전시킨 게 스포어에서 사용된 기법이었다는 것도 놀라웠다. </p>

<p>컴포넌트 기반 방법론은 강연자가 멋지다는 이야기만 하고 구체적인 적용 방안이나 장단점에 대해서는 코드조차 보여주지 않아서 아쉽다는 이야기가 있었다. (망갈로라서 그런가!!) 컴포넌트간 메시지 기반 통신은 모듈간 의존도는 확실히 줄어들고, 유닛테스트하기도 편하고, 멀티코어 대응도 쉬울 것 같은데, 클라이언트야 그렇다 치더라도 서버에서는 어떻게 잘 쓸 수 있을지가 좀 애매했다. 실제로 이런 구현을 쓰고 있는 모군에게 물어보면 역시나 디버그하기가 괴롭다는데&#8230; 흐흠. GPG 5권이나 다시 읽어봐야지.</p>

<p>jacking75님의 강연은 내가 대구 출신이라서 그런지 구수했다. C# - C++ 연동 때문에 고생을 많이 하신 것 같은데, 역시 XML로 프로토콜을 디자인하고 각 언어별로 코드 제너레이터를 만드는게 최종 진화의 모습이 아닐까 추측해본다. 조만간 나도 비슷한 툴들을 많이 만들어야 할 것 같은데, C# 보다는 VB.NET을 주로 써봐서 뭘 해야 할지 고민이다. 이런 툴의 문제점이라면 편집은 간편하지만 유출 및 보안 문제가 걸릴텐데, 요즘의 대세는 접근 제어가 가능하고 업데이트 걱정을 안해도 되는 웹 기반이 아닐까 싶다. 근데 사내에 .NET 툴들이 많고 자동 업데이트도 잘 되는 걸로 봐서는 또 괜찮을 것도 같고&#8230; (시간만 있으면 rails로 해보고도 싶은데.. 아니면 누가 실버라이트로 만들어주든가. 흐흐)</p>

<p>마지막 시간은 이미 알던 이야기라서. 32코어의 시대가 도래하면 얼랭이 세상을 지배할지도 모른다..라고만 정리해보련다. 그 때가 되면 다시 플레이어, 몬스터들 마다 얼랭 프로세스를 할당해서 갖고 놀게 될지도 모르겠다.</p>
</div>
  
  


    </article>
  
  <nav class="pagination">
    <div>
      
        <a class="prev" href="/page/32/">&larr; Older</a>
      
      <a href="/blog/archives">Blog Archives</a>
      
      <a class="next" href="/page/30/">Newer &rarr;</a>
      
    </div>
  </nav>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/07/09/jquery-proven-performance-tips-tricks/">jQuery Proven Performance Tips &amp; Tricks</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/18/jquery-mobile-tip/">jQuery Mobile Tip</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/18/clienpad-appspot-com/">clienpad.appspot.com</a>
      </li>
    
      <li class="post">
        <a href="/2011/04/15/ant-cookbook/">Ant Cookbook</a>
      </li>
    
      <li class="post">
        <a href="/2011/04/14/bulkloader-gdata-connector/">Bulkloader GData Connector</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/reiot">@reiot</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'reiot',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("reiot", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/reiot" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @reiot</a>
  
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - Ray Yun -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
    (function () {
      var disqus_shortname = 'reiot';
      
        
        var disqus_script = 'count.js'
      

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


  

  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</body>
</html>
